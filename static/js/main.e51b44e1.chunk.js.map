{"version":3,"sources":["app/tools/xmlToolsClasses/GenericXmlTools.js","app/tools/xmlToolsClasses/CirculationXmlTools.js","app/tools/xmlToolsClasses/EnchainementXmlTools.js","app/tools/xmlToolsClasses/PtxXmlTools.js","app/tools/xmlTools.js","app/enums/editedObject.js","app/actions.js","mainComponents/toolbar/SelectionButtonsGroup.js","mainComponents/toolbar/LoadButton.js","app/tools/saveFile.js","mainComponents/toolbar/SaveButton.js","mainComponents/toolbar/DeleteButton.js","mainComponents/toolbar/DuplicateButton.js","mainComponents/toolbar/ChangeIdButton.js","mainComponents/toolbar/ShiftDateButton.js","circulationsComponents/toolbar/FanHeureDepartButton.js","circulationsComponents/toolbar/FanNumMarcheButton.js","circulationsComponents/toolbar/FanActionsDropdown.js","circulationsComponents/toolbar/CirculationsSpecificToolbar.js","enchainementsComponents/toolbar/ApplyGuidMapButton.js","enchainementsComponents/toolbar/EnchainementsSpecificToolbar.js","mainComponents/toolbar/ObjectSpecificToolbar.js","mainComponents/toolbar/CurrentlyEditedLabel.js","mainComponents/toolbar/SaveGuidMapButton.js","app/tools/buildGuidJsonMap.js","mainComponents/toolbar/Toolbar.js","mainComponents/table/RowActions.js","circulationsComponents/tableRow/NumMarcheCellEditor.js","circulationsComponents/tableRow/HeureDepartCellEditor.js","circulationsComponents/tableRow/HeureArriveeCellEditor.js","app/tools/codeTctTools.js","circulationsComponents/tableRow/CodeTctCellEditor.js","circulationsComponents/tableRow/CirculationRow.js","circulationsComponents/CirculationsTable.js","enchainementsComponents/tableRow/EnchainementRow.js","enchainementsComponents/EnchainementsTable.js","ptxComponents/tableRow/DateHeureDebutCellEditor.js","ptxComponents/tableRow/NumeroPlancheCellEditor.js","ptxComponents/tableRow/PtxRow.js","ptxComponents/PtxsTable.js","mainComponents/table/MainTable.js","mainComponents/modals/ShiftDateModal.js","circulationsComponents/modals/FanHeureDepartModal.js","circulationsComponents/modals/FanNumMarcheModal.js","circulationsComponents/modals/CirculationsSpecificModals.js","mainComponents/modals/Modals.js","App.js","app/reducers/defaultObjectsById.js","app/reducers/circulationsById.js","app/reducers/enchainementsById.js","app/reducers/ptxsById.js","app/reducers/main.js","app/reducers/index.js","app/store.js","index.js"],"names":["GenericXmlTools","xmlParser","xmlSerializer","elementsTagName","elementTagName","getElementId","element","getElementsByTagName","innerHTML","setElementId","elementXml","id","xmlTextToElementsObject","xmlText","defaultObject","result","elements","parseFromString","Array","from","forEach","currentId","origineId","content","outerHTML","getElementAsXmlText","concatAllElementsAsXmlText","elementsById","text","Object","keys","withId","xmlDom","serializeToString","getHeure","Date","now","withHeure","date","this","constructor","TypeError","CirculationXmlTools","circulations","circulation","hasChildNodes","childNodes","node","tagName","dateCreation","demandeur","localisation","parcours","mission","profilHoraire","profilDeCirculation","evenementsCirculation","etatCirculation","typeConvoi","typeGestion","renvoisStandards","parcoursTopologique","circulationsText","getNumMarche","withNumMarche","numMarche","getCodeTCT","withCodeTCT","tctId","tctCode","getHeureDepart","withHeureDepart","heureDepart","heureToWrite","toISOString","slice","getDureeTrajet","detailHoraire","length","getDepart","getAttribute","getArrivee","Etapes","EnchainementXmlTools","getCirculationId","enchainement","elementTag","undefined","setCirculationId","getElementEntrantId","getElementSortantId","setElementEntrantId","setElementSortantId","enchainements","elementEntrantId","elementSortantId","enchainementXml","PtxXmlTools","getPtxRessourcesInfraType","ptx","firstElementChild","getPtxRessourcesDescription","getDateHeureDebut","withDateHeureDebut","dateHeureDebut","getNumeroPlance","withNumeroPlanche","numeroPlanche","DOMParser","XMLSerializer","circulationXmlTools","ptxXmlTools","enchainementXmlTools","editedObject","NONE","CIRCULATIONS","PTX","ENCHAINEMENTS","getEditedObjectXmlTools","edited","Error","getEditedObjectState","state","circulationsById","ptxsById","enchainementsById","clickOnRow","type","stopNumMarcheCellEdition","stopHeureDepartCellEdition","changeHeureDepart","stopHeureArriveeCellEdition","stopCodeTctCellEdition","stopDateHeureDebutCellEdition","stopNumeroPlancheCellEdition","SelectionButtonsGroup","ButtonGroup","className","props","OverlayTrigger","placement","delay","show","hide","overlay","Tooltip","Button","variant","disabled","onClick","dispatch","React","Component","connect","LoadButton","event","stopPropagation","preventDefault","Promise","all","target","files","map","file","then","textArray","textFile","size","isLoading","upload","click","ref","style","display","onChange","onChangeFile","bind","multiple","buttonText","main","loadingInfo","config","require","saveAsFile","filename","dataType","document","createElement","setAttribute","encodeURIComponent","body","appendChild","removeChild","dateStringForFileName","getFullYear","String","getMonth","padStart","getDate","getHours","getMinutes","SaveButton","fileName","handleValidate","fileType","header","xml_header","footer","xml_footer","saveAsXmlFile","trigger","rootClose","Popover","Title","as","Content","InputGroup","width","FormControl","defaultValue","aria-label","value","Append","getCurrentFileName","DeleteButton","DuplicateButton","ChangeIdButton","ShiftDateButton","handleShow","FanHeureDepartButton","DropdownItem","FanNumMarcheButton","FanActionsDropdown","DropdownButton","title","CirculationsSpecificToolbar","ApplyGuidMapButton","guidMapText","EnchainementsSpecificToolbar","ObjectSpecificToolbar","CurrentlyEditedLabel","Badge","SaveGuidMapButton","jsonGuidMap","reduce","JSON","stringify","guidChanged","Navbar","bg","sticky","Collapse","RowActions","NumMarcheCellEditor","numMarcheEdit","onKeyDown","key","onKeyPress","HeureDepartCellEditor","parsedDate","dateEdited","timeEdited","toLocaleTimeString","newHeureDepart","HeureArriveeCellEditor","parsedHeureDepart","getTime","dureeTrajet","newHeureArrivee","tctCodeIdMap","CodeTctCellEditor","codeTctEdit","codeTCT","changeCodeTct","codeTct","CirculationRow","heureArrivee","selected","numMarcheEdited","codeTctEdited","heureDepartEdited","toLocaleDateString","heureArriveeEdited","ownProps","circulationsIdList","Table","hover","circulationId","EnchainementRow","enchainementsIdList","enchainementId","DateHeureDebutCellEditor","heureDebut","newHeureDebut","NumeroPlancheCellEditor","numeroPlancheEdit","PtxRow","numeroPlancheEdited","ressourceInfraType","ressourceDescription","dateHeureDebutEdited","ptxsIdList","ptxId","MainTable","Container","marginTop","ShiftDateModal","startDay","startDate","startTime","goalDay","goalTime","handleClose","start","goal","shiftDateValidated","Modal","shown","onHide","Header","closeButton","Body","Form","Group","Label","Footer","selectedElementId","find","shiftDateModal","FanHeureDepartModal","increment","secondsIncrement","Control","step","placeholder","secondsInc","parseInt","secondsPart","isNaN","selectedId","fanHeureDepartModal","FanNumMarcheModal","selectedNumMarche","fanNumMarcheModal","CirculationSpecificModals","fanHeureDepartShown","fanNumMarcheShown","ObjectSpecificModals","CirculationsSpecificModals","Modals","shiftDateShown","App","fluid","paddingLeft","paddingRight","extended","defaultObjectsById","action","xmlTools","objectsToAdd","produce","draftState","omit","filterObject","newId","uuidv1","originedId","duplicateSelectedElement","changeIdSelectedElement","shiftDate","keyToOmit","omittedPropObj","object","filterFunction","filtered","delta","origDate","defaultCirculationObject","fanHeureDepart","currentDate","setSeconds","getSeconds","fanNumMarche","defaultEnchainementObject","applyGuidMapFile","guidMap","parse","circulationsIdMap","draftResult","entrant","sortant","guidToChangeList","sort","guidToChangeIndex","circulationsIdIndex","idToChange","defaultPtxObject","defaultState","toLoadCount","loadedCount","getXmlFileObject","searchedString","includes","reducer","configureStore","ReactDOM","render","StrictMode","store","getElementById"],"mappings":"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","file":"static/js/main.e51b44e1.chunk.js","sourcesContent":["export class GenericXmlTools {\r\n\r\n    constructor(xmlParser, xmlSerializer, elementsTagName, elementTagName) {\r\n        if (this.constructor === GenericXmlTools) {\r\n            throw new TypeError('Abstract class \"GenericXmlTools\" cannot be instantiated directly');\r\n        }\r\n        this.xmlParser = xmlParser;\r\n        this.xmlSerializer = xmlSerializer;\r\n    }\r\n\r\n    elementsTagName = \"<elementsTagName>\";\r\n    elementTagName = \"<elementTagName>\";\r\n\r\n    getElementId = (element) => {\r\n        return element.getElementsByTagName(\"id\")[0].innerHTML;\r\n    }\r\n\r\n    setElementId = (elementXml, id) => {\r\n        elementXml.getElementsByTagName(\"id\")[0].innerHTML = id;\r\n    }\r\n\r\n    xmlTextToElementsObject = (xmlText, defaultObject) => {\r\n        let result = {};\r\n        let xmlDoc = this.xmlParser.parseFromString(xmlText, \"application/xml\");\r\n        let elements = xmlDoc.getElementsByTagName(this.elementTagName);\r\n\r\n        Array.from(elements).forEach((element) => {\r\n            var currentId = this.getElementId(element);\r\n            result[currentId] = {\r\n                id: currentId,\r\n                origineId: currentId,\r\n                content: element.outerHTML,\r\n                ...defaultObject\r\n            }\r\n        })\r\n\r\n        return result;\r\n    }\r\n\r\n    getElementAsXmlText = (element) => {\r\n        return element.content;\r\n    } \r\n\r\n    concatAllElementsAsXmlText = (elementsById) => {\r\n        var text = \"<\" + this.elementsTagName + \">\\n\";\r\n\r\n        Object.keys(elementsById).forEach((id) => {\r\n            text += this.getElementAsXmlText(elementsById[id]);\r\n        });\r\n\r\n        text += \"</\" + this.elementsTagName + \">\";\r\n        return text;\r\n    }\r\n\r\n    withId = (element, id) => {\r\n        let xmlDom = this.xmlParser.parseFromString(element.content, \"application/xml\");\r\n        this.setElementId(xmlDom, id);\r\n        return ({\r\n            ...element,\r\n            id: id,\r\n            content: this.xmlSerializer.serializeToString(xmlDom)\r\n        })\r\n    }\r\n\r\n    getHeure = (element) => {\r\n        return new Date(Date.now());\r\n    }\r\n\r\n    withHeure = (element, date) => {\r\n        return element;\r\n    }\r\n\r\n}","import { GenericXmlTools } from './GenericXmlTools'\r\n\r\nexport class CirculationXmlTools extends GenericXmlTools {\r\n\r\n  elementsTagName = \"circulations\";\r\n  elementTagName = \"Circulation\";\r\n\r\n  xmlTextToElementsObject = (xmlText, defaultObject) => {\r\n    let result = {};\r\n    let xmlDoc = this.xmlParser.parseFromString(xmlText, \"application/xml\");\r\n    let circulations = xmlDoc.getElementsByTagName(\"Circulation\");\r\n\r\n    Array.from(circulations).forEach((circulation) => {\r\n      var currentId = 0;\r\n      if (circulation.hasChildNodes) {\r\n        circulation.childNodes.forEach((node) => {\r\n          switch (node.tagName) {\r\n            case \"id\":\r\n              currentId = node.innerHTML;\r\n              result[currentId] = {\r\n                ...defaultObject,\r\n                id: currentId,\r\n                origineId: currentId,\r\n              };\r\n              break;\r\n            case \"dateCreation\":\r\n              result[currentId].dateCreation = node.innerHTML;\r\n              break;\r\n            case \"demandeur\":\r\n              result[currentId].demandeur = node.innerHTML;\r\n              break;\r\n            case \"localisation\":\r\n              result[currentId].localisation = node.innerHTML;\r\n              break;\r\n            case \"Parcours\":\r\n              result[currentId].parcours = this.xmlSerializer.serializeToString(node);\r\n              break;\r\n            case \"Mission\":\r\n              result[currentId].mission = this.xmlSerializer.serializeToString(node);\r\n              break;\r\n            case \"ProfilHoraire\":\r\n              result[currentId].profilHoraire = this.xmlSerializer.serializeToString(node);\r\n              break;\r\n            case \"ProfilDeCirculation\":\r\n              result[currentId].profilDeCirculation = this.xmlSerializer.serializeToString(node);\r\n              break;\r\n            case \"evenementsCirculation\":\r\n              result[currentId].evenementsCirculation = this.xmlSerializer.serializeToString(node);\r\n              break;\r\n            case \"EtatCirculation\":\r\n              result[currentId].etatCirculation = this.xmlSerializer.serializeToString(node);\r\n              break;\r\n            case \"TypeConvoi\":\r\n              result[currentId].typeConvoi = this.xmlSerializer.serializeToString(node);\r\n              break;\r\n            case \"TypeGestion\":\r\n              result[currentId].typeGestion = this.xmlSerializer.serializeToString(node);\r\n              break;\r\n            case \"renvoisStandards\":\r\n              result[currentId].renvoisStandards = this.xmlSerializer.serializeToString(node);\r\n              break;\r\n            case \"ParcoursTopologique\":\r\n              result[currentId].parcoursTopologique = this.xmlSerializer.serializeToString(node);\r\n              break;\r\n            default:\r\n              return;\r\n          }\r\n        })\r\n      }\r\n    })\r\n\r\n    return result;\r\n  }\r\n\r\n  getElementAsXmlText = (element) => {\r\n    var circulationsText = \"<Circulation>\\n\";\r\n\r\n    circulationsText += \"<id>\" + element.id + \"</id>\\n\";\r\n    circulationsText += \"<dateCreation>\" + element.dateCreation + \"</dateCreation>\\n\";\r\n    circulationsText += \"<demandeur>\" + element.demandeur + \"</demandeur>\\n\"\r\n    circulationsText += \"<localisation>\" + element.localisation + \"</localisation>\\n\";\r\n    circulationsText += element.parcours + \"\\n\";\r\n    circulationsText += element.mission + \"\\n\";\r\n    circulationsText += element.profilHoraire + \"\\n\";\r\n    circulationsText += element.profilDeCirculation + \"\\n\";\r\n    circulationsText += element.evenementsCirculation + \"\\n\";\r\n    circulationsText += element.etatCirculation + \"\\n\";\r\n    circulationsText += element.typeConvoi + \"\\n\";\r\n    circulationsText += element.typeGestion + \"\\n\";\r\n    circulationsText += element.renvoisStandards + \"\\n\";\r\n    circulationsText += element.parcoursTopologique + \"\\n\";\r\n\r\n    circulationsText += \"</Circulation>\\n\";\r\n\r\n    return circulationsText;\r\n  }\r\n\r\n  getNumMarche = (circulation) => {\r\n    let xmlDom = this.xmlParser.parseFromString(circulation.etatCirculation, \"application/xml\");\r\n    return xmlDom.getElementsByTagName(\"numMarcheOrigine\")[0].innerHTML;\r\n  }\r\n\r\n  withNumMarche = (circulation, numMarche) => {\r\n    let xmlDom = this.xmlParser.parseFromString(circulation.etatCirculation, \"application/xml\");\r\n    xmlDom.getElementsByTagName(\"numMarcheOrigine\")[0].innerHTML = numMarche;\r\n    return ({\r\n      ...circulation,\r\n      etatCirculation: this.xmlSerializer.serializeToString(xmlDom)\r\n    })\r\n  }\r\n\r\n  getCodeTCT = (circulation) => {\r\n    let xmlDom = this.xmlParser.parseFromString(circulation.typeGestion, \"application/xml\");\r\n    return xmlDom.getElementsByTagName(\"tct\")[0].getElementsByTagName(\"libelle\")[0].innerHTML;\r\n  }\r\n\r\n  withCodeTCT = (circulation, tctId, tctCode) => {\r\n    let xmlDom = this.xmlParser.parseFromString(circulation.typeGestion, \"application/xml\");\r\n    xmlDom.getElementsByTagName(\"tct\")[0].getElementsByTagName(\"id\")[0].innerHTML = tctId;\r\n    xmlDom.getElementsByTagName(\"tct\")[0].getElementsByTagName(\"code\")[0].innerHTML = tctCode;\r\n    xmlDom.getElementsByTagName(\"tct\")[0].getElementsByTagName(\"libelle\")[0].innerHTML = tctCode;\r\n    return ({\r\n      ...circulation,\r\n      typeGestion: this.xmlSerializer.serializeToString(xmlDom)\r\n    })\r\n  }\r\n  getHeureDepart = (circulation) => {\r\n    let xmlDom = this.xmlParser.parseFromString(circulation.etatCirculation, \"application/xml\");\r\n    return xmlDom.getElementsByTagName(\"dateHeureOrigine\")[0].innerHTML;\r\n  }\r\n\r\n  withHeureDepart = (circulation, heureDepart) => {\r\n    let heureToWrite = new Date(heureDepart);\r\n    let xmlDom = this.xmlParser.parseFromString(circulation.etatCirculation, \"application/xml\");\r\n    xmlDom.getElementsByTagName(\"dateHeureOrigine\")[0].innerHTML = heureToWrite.toISOString().slice(0, -5) + \"Z\";\r\n    return ({\r\n      ...circulation,\r\n      etatCirculation: this.xmlSerializer.serializeToString(xmlDom)\r\n    })\r\n  }\r\n\r\n  getDureeTrajet = (circulation) => {\r\n    let xmlDom = this.xmlParser.parseFromString(circulation.profilHoraire, \"application/xml\");\r\n    let detailHoraire = xmlDom.getElementsByTagName(\"detailsHoraire\")[0]\r\n      .getElementsByTagName(\"DetailHoraire\");\r\n    return detailHoraire[detailHoraire.length - 1].getElementsByTagName(\"tempsDepuisOrigine\")[0].innerHTML;\r\n  }\r\n\r\n  getDepart = (circulation) => {\r\n    let xmlDom = this.xmlParser.parseFromString(circulation.mission, \"application/xml\");\r\n    return xmlDom.getElementsByTagName(\"etapesMission\")[0]\r\n      .getElementsByTagName(\"EtapeMission\")[0]\r\n      .getElementsByTagName(\"pr\")[0].getAttribute(\"id\");\r\n  }\r\n\r\n  getArrivee = (circulation) => {\r\n    let xmlDom = this.xmlParser.parseFromString(circulation.mission, \"application/xml\");\r\n    const Etapes = xmlDom.getElementsByTagName(\"etapesMission\")[0]\r\n      .getElementsByTagName(\"EtapeMission\");\r\n    return Etapes[Etapes.length - 1].getElementsByTagName(\"pr\")[0].getAttribute(\"id\");\r\n  }\r\n\r\n  withId = (element, id) => {\r\n    return ({\r\n        ...element,\r\n        id: id,\r\n    })\r\n  }\r\n\r\n  getHeure = this.getHeureDepart;\r\n  withHeure = this.withHeureDepart;\r\n\r\n}","import { GenericXmlTools } from './GenericXmlTools'\r\n\r\nexport class EnchainementXmlTools extends GenericXmlTools {\r\n\r\n    elementsTagName = \"vueOffreEnchainementElementaires\";\r\n    elementTagName = \"vueOffreEnchainementElementaire\";\r\n\r\n    getElementId = (element) => {\r\n        return element.getElementsByTagName(\"offreEnchainementElementaire\")[0].getElementsByTagName(\"id\")[0].innerHTML;\r\n    }\r\n\r\n    setElementId = (element, id) => {\r\n        element.getElementsByTagName(\"offreEnchainementElementaire\")[0].getElementsByTagName(\"id\")[0].innerHTML = id;\r\n    }\r\n\r\n    getCirculationId = (enchainement, elementTag) => {\r\n        let circulation = enchainement.getElementsByTagName(elementTag)[0].getElementsByTagName(\"circulation\")[0];\r\n        return circulation === undefined ? \"Indéfini\" : circulation.getElementsByTagName(\"id\")[0].innerHTML;\r\n    }\r\n    \r\n    setCirculationId = (enchainement, elementTag, id) => {\r\n        if (id !== \"Indéfini\") {\r\n            enchainement.getElementsByTagName(elementTag)[0].getElementsByTagName(\"circulation\")[0]\r\n                .getElementsByTagName(\"id\")[0].innerHTML = id;\r\n        }\r\n    }\r\n\r\n    getElementEntrantId = (enchainement) => { return this.getCirculationId(enchainement, \"elementEntrant\"); }\r\n    getElementSortantId = (enchainement) => { return this.getCirculationId(enchainement, \"elementSortant\"); }\r\n\r\n    setElementEntrantId = (enchainement, id) => { this.setCirculationId(enchainement, \"elementEntrant\", id); }\r\n    setElementSortantId = (enchainement, id) => { this.setCirculationId(enchainement, \"elementSortant\", id); }\r\n\r\n    xmlTextToElementsObject = (xmlText, defaultObject) => {\r\n        let result = {};\r\n        let xmlDoc = this.xmlParser.parseFromString(xmlText, \"application/xml\");\r\n        let enchainements = xmlDoc.getElementsByTagName(this.elementTagName);\r\n\r\n        Array.from(enchainements).forEach((enchainement) => {\r\n            var currentId = this.getElementId(enchainement);\r\n            result[currentId] = {\r\n                id: currentId,\r\n                origineId: currentId,\r\n                content: enchainement.outerHTML,\r\n                elementEntrantId: this.getElementEntrantId(enchainement),\r\n                elementSortantId: this.getElementSortantId(enchainement),\r\n                ...defaultObject\r\n            }\r\n        })\r\n\r\n        return result;\r\n    }\r\n\r\n    getElementAsXmlText = (element) => {\r\n        let enchainementXml = this.xmlParser.parseFromString(element.content, \"application/xml\");\r\n        this.setElementEntrantId(enchainementXml, element.elementEntrantId);\r\n        this.setElementSortantId(enchainementXml, element.elementSortantId);\r\n        return this.xmlSerializer.serializeToString(enchainementXml);\r\n    }\r\n}","import { GenericXmlTools } from './GenericXmlTools'\r\n\r\nexport class PtxXmlTools extends GenericXmlTools {\r\n\r\n  elementsTagName = \"planchesTravaux\";\r\n  elementTagName = \"PlancheTravaux\";\r\n\r\n  getPtxRessourcesInfraType = (ptx) => {\r\n    let xmlDom = this.xmlParser.parseFromString(ptx.content, \"application/xml\");\r\n    let ressourcesType = xmlDom.getElementsByTagName(\"ressourcesInfra\")[0].firstElementChild.tagName;\r\n    return ressourcesType;\r\n  }\r\n\r\n  getPtxRessourcesDescription = (ptx) => {\r\n    let xmlDom = this.xmlParser.parseFromString(ptx.content, \"application/xml\");\r\n    return xmlDom.getElementsByTagName(\"ressourcesInfra\")[0].firstElementChild.getElementsByTagName(\"libelle\")[0].innerHTML;\r\n  }\r\n\r\n  getDateHeureDebut = (ptx) => {\r\n    let xmlDom = this.xmlParser.parseFromString(ptx.content, \"application/xml\");\r\n    return xmlDom.getElementsByTagName(\"dateHeureDebut\")[0].innerHTML;\r\n  }\r\n\r\n  withDateHeureDebut = (ptx, dateHeureDebut) => {\r\n    let heureToWrite = new Date(dateHeureDebut);\r\n    let xmlDom = this.xmlParser.parseFromString(ptx.content, \"application/xml\");\r\n    xmlDom.getElementsByTagName(\"dateHeureDebut\")[0].innerHTML = heureToWrite.toISOString().slice(0, -5) + \"Z\";\r\n    return ({\r\n      ...ptx,\r\n      content: this.xmlSerializer.serializeToString(xmlDom)\r\n    })\r\n  }\r\n\r\n  getHeure = this.getDateHeureDebut;\r\n  withHeure = this.withDateHeureDebut;\r\n\r\n  getNumeroPlance = (ptx) => {\r\n    let xmlDom = this.xmlParser.parseFromString(ptx.content, \"application/xml\");\r\n    return xmlDom.getElementsByTagName(\"numeroPlanche\")[0].innerHTML;\r\n  }\r\n\r\n  withNumeroPlanche = (ptx, numeroPlanche) => {\r\n    let xmlDom = this.xmlParser.parseFromString(ptx.content, \"application/xml\");\r\n    xmlDom.getElementsByTagName(\"numeroPlanche\")[0].innerHTML = numeroPlanche;\r\n    return ({\r\n      ...ptx,\r\n      content: this.xmlSerializer.serializeToString(xmlDom)\r\n    })\r\n  }\r\n\r\n}","import { editedObject } from '../enums/editedObject'\r\nimport { CirculationXmlTools } from './xmlToolsClasses/CirculationXmlTools'\r\nimport { EnchainementXmlTools } from './xmlToolsClasses/EnchainementXmlTools';\r\nimport { PtxXmlTools } from './xmlToolsClasses/PtxXmlTools'\r\n\r\nconst xmlParser = new DOMParser();\r\nconst xmlSerializer = new XMLSerializer();\r\n\r\nexport const circulationXmlTools = new CirculationXmlTools(xmlParser, xmlSerializer);\r\nexport const ptxXmlTools = new PtxXmlTools(xmlParser, xmlSerializer);\r\nexport const enchainementXmlTools = new EnchainementXmlTools(xmlParser, xmlSerializer);\r\n\r\nexport const getEditedObjectXmlTools = (edited) => {\r\n    switch (edited) {\r\n        case editedObject.CIRCULATIONS:\r\n            return circulationXmlTools;\r\n        case editedObject.PTX:\r\n            return ptxXmlTools;\r\n        case editedObject.ENCHAINEMENTS:\r\n            return enchainementXmlTools;\r\n        default:\r\n            throw new Error('Edited object has no associated XML tools.');\r\n    }\r\n}","import { circulationXmlTools, ptxXmlTools, enchainementXmlTools } from '../tools/xmlTools'\r\n\r\nexport const editedObject = {\r\n    NONE: 'none',\r\n    CIRCULATIONS: 'circulations',\r\n    PTX: \"ptx\",\r\n    ENCHAINEMENTS: \"enchainements\"\r\n}\r\n\r\nexport const getEditedObjectXmlTools = (edited) => {\r\n    switch (edited) {\r\n        case editedObject.CIRCULATIONS:\r\n            return circulationXmlTools;\r\n        case editedObject.PTX:\r\n            return ptxXmlTools;\r\n        case editedObject.ENCHAINEMENTS:\r\n            return enchainementXmlTools;\r\n        default:\r\n            throw new Error('Edited object has no associated XML tools.');\r\n    }\r\n}\r\n\r\nexport const getEditedObjectState = (state) => {\r\n    switch (state.editedObject) {\r\n        case editedObject.CIRCULATIONS:\r\n            return state.circulationsById;\r\n        case editedObject.PTX:\r\n            return state.ptxsById;\r\n        case editedObject.ENCHAINEMENTS:\r\n            return state.enchainementsById;\r\n        default:\r\n            throw new Error('Edited object has no associated XML tools.');\r\n    }\r\n}","export const submitXmlFile = (xmlText) => ({\r\n  type: 'XML_FILE_SUBMITED',\r\n  xmlText: xmlText\r\n})\r\n\r\nexport const selectAll = () => ({\r\n  type: 'SELECT_ALL'\r\n})\r\n\r\nexport const unselectAll = () => ({\r\n  type: 'UNSELECT_ALL'\r\n})\r\n\r\nexport const flipSelectionAll = () => ({\r\n  type: 'FLIP_SELECT_ALL'\r\n})\r\n\r\nexport const clickOnRow = (id) => ({\r\n  type: 'ROW_CLICKED_ON',\r\n  id: id\r\n})\r\n\r\nexport const deleteRow = (id) => ({\r\n  type: 'ROW_DELETED',\r\n  id: id\r\n})\r\n\r\nexport const deleteSelected = () => ({\r\n  type: 'DELETE_SELECTED_BUTTON_PRESSED',\r\n})\r\n\r\nexport const duplicateRow = (id) => ({\r\n  type: 'ROW_DUPLICATED',\r\n  id: id\r\n})\r\n\r\nexport const duplicateSelected = () => ({\r\n  type: 'DUPLICATE_SELECTED_BUTTON_PRESSED',\r\n})\r\n\r\nexport const changeIdSelected = () => ({\r\n  type: 'CHANGE_ID_SELECTED_BUTTON_PRESSED',\r\n})\r\n\r\nexport const shiftDateButtonClicked = () => ({\r\n  type: 'SHIFT_DATE_BUTTON_CLICKED',\r\n})\r\n\r\nexport const shiftDateClosed = () => ({\r\n  type: 'SHIFT_DATE_CLOSED'\r\n})\r\n\r\nexport const shiftDateValidated = (start, goal) =>  ({\r\n  type: 'SHIFT_DATE_VALIDATED',\r\n  start: start,\r\n  goal: goal\r\n})\r\n\r\nexport const changeCirculation = (id, circulation) => ({\r\n  type: 'CIRCULATION_CHANGED',\r\n  id: id,\r\n  circulation: circulation\r\n})\r\n\r\nexport const numMarcheCellClicked = (id) => ({\r\n  type: 'NUM_MARCHE_CELL_CLICKED',\r\n  id: id\r\n})\r\n\r\nexport const stopNumMarcheCellEdition = (id) => ({\r\n  type: 'STOP_NUM_MARCHE_CELL_EDITION',\r\n  id: id\r\n})\r\n\r\nexport const changeNumMarche = (id, numMarche) => ({\r\n  type: 'CIRCULATION_NUM_MARCHE_CHANGED',\r\n  id: id,\r\n  numMarche: numMarche\r\n})\r\n\r\nexport const heureDepartCellClicked = (id) => ({\r\n  type: 'HEURE_DEPART_CELL_CLICKED',\r\n  id: id\r\n})\r\n\r\nexport const stopHeureDepartCellEdition = (id) => ({\r\n  type: 'STOP_HEURE_DEPART_CELL_EDITION',\r\n  id: id\r\n})\r\n\r\nexport const changeHeureDepart = (id, heureDepart) => ({\r\n  type: 'CIRCULATION_HEURE_DEPART_CHANGED',\r\n  id: id,\r\n  heureDepart: heureDepart\r\n})\r\n\r\nexport const heureArriveeCellClicked = (id) => ({\r\n  type: 'HEURE_ARRIVEE_CELL_CLICKED',\r\n  id: id\r\n})\r\n\r\nexport const stopHeureArriveeCellEdition = (id) => ({\r\n  type: 'STOP_HEURE_ARRIVEE_CELL_EDITION',\r\n  id: id\r\n})\r\n\r\nexport const codeTctCellClicked = (id) => ({\r\n  type: 'TCT_CELL_CLICKED',\r\n  id: id\r\n})\r\n\r\nexport const stopCodeTctCellEdition = (id) => ({\r\n  type: 'STOP_TCT_CELL_EDITION',\r\n  id: id\r\n})\r\n\r\nexport const changeCodeTct = (id, tctId, tctCode) => ({\r\n  type: 'CIRCULATION_TCT_CHANGED',\r\n  id: id,\r\n  tctId: tctId,\r\n  tctCode: tctCode\r\n})\r\n\r\nexport const fanHeureDepartButtonClicked = () => ({\r\n  type: 'FAN_HEURE_DEPART_BUTTON_CLICKED',\r\n})\r\n\r\nexport const fanHeureDepartClosed = () => ({\r\n  type: 'FAN_HEURE_DEPART_CLOSED'\r\n})\r\n\r\nexport const fanHeureDepartValidated = (start, secondsIncrement) =>  ({\r\n  type: 'FAN_HEURE_DEPART_VALIDATED',\r\n  start: start,\r\n  secondsIncrement: secondsIncrement\r\n})\r\n\r\nexport const fanNumMarcheButtonClicked = () => ({\r\n  type: 'FAN_NUM_MARCHE_BUTTON_CLICKED',\r\n})\r\n\r\nexport const fanNumMarcheClosed = () => ({\r\n  type: 'FAN_NUM_MARCHE_CLOSED'\r\n})\r\n\r\nexport const fanNumMarcheValidated = (start, increment) =>  ({\r\n  type: 'FAN_NUM_MARCHE_VALIDATED',\r\n  start: start,\r\n  increment: increment\r\n})\r\n\r\nexport const dateHeureDebutCellClicked = (id) => ({\r\n  type: 'DATE_HEURE_DEBUT_CELL_CLICKED',\r\n  id: id\r\n})\r\n\r\nexport const stopDateHeureDebutCellEdition = (id) => ({\r\n  type: 'STOP_DATE_HEURE_DEBUT_CELL_EDITION',\r\n  id: id\r\n})\r\n\r\nexport const changeDateHeureDebut = (id, heureDebut) => ({\r\n  type: 'DATE_HEURE_DEBUT_CHANGED',\r\n  id: id,\r\n  dateHeureDebut: heureDebut\r\n})\r\n\r\nexport const applyGuidMapFile = (guidMapText) => ({\r\n  type: 'GUID_MAP_FILE_APPLIED',\r\n  guidMapText: guidMapText\r\n})\r\n\r\nexport const numeroPlancheCellClicked = (id) => ({\r\n  type: 'NUMERO_PLANCHE_CELL_CLICKED',\r\n  id: id\r\n})\r\n\r\nexport const stopNumeroPlancheCellEdition = (id) => ({\r\n  type: 'STOP_NUMERO_PLANCHE_CELL_EDITION',\r\n  id: id\r\n})\r\n\r\nexport const changeNumeroPlanche = (id, numeroPlanche) => ({\r\n  type: 'PTX_NUMERO_PLANCHE_CHANGED',\r\n  id: id,\r\n  numeroPlanche: numeroPlanche\r\n})\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { selectAll, unselectAll, flipSelectionAll } from '../../app/actions'\r\n\r\nimport Tooltip from 'react-bootstrap/Tooltip'\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger'\r\n\r\nimport ButtonGroup from 'react-bootstrap/ButtonGroup'\r\nimport Button from 'react-bootstrap/Button'\r\nimport { ListCheck, ListTask, CircleHalf } from 'react-bootstrap-icons';\r\n\r\nclass SelectionButtonsGroup extends React.Component {\r\n\r\n  render() {\r\n    return (\r\n      <ButtonGroup className={this.props.className}>\r\n        <OverlayTrigger\r\n          placement=\"bottom\"\r\n          delay={{ show: 250, hide: 400 }}\r\n          overlay={(props) => (\r\n            <Tooltip id=\"select-all-tooltip\" {...props}>\r\n              Tout sélectionner\r\n            </Tooltip>)}\r\n        >\r\n          <Button variant=\"light\" disabled={this.props.disabled}\r\n            onClick={() => { this.props.dispatch(selectAll()) }}>\r\n            <ListCheck />\r\n          </Button >\r\n        </OverlayTrigger>\r\n        <OverlayTrigger\r\n          placement=\"bottom\"\r\n          delay={{ show: 250, hide: 400 }}\r\n          overlay={(props) => (\r\n            <Tooltip id=\"unselect-all-tooltip\" {...props}>\r\n              Tout déselectionner\r\n            </Tooltip>)}\r\n        >\r\n          <Button variant=\"light\" disabled={this.props.disabled}\r\n            onClick={() => { this.props.dispatch(unselectAll()) }}>\r\n            <ListTask />\r\n          </Button >\r\n        </OverlayTrigger>\r\n        <OverlayTrigger\r\n          placement=\"bottom\"\r\n          delay={{ show: 250, hide: 400 }}\r\n          overlay={(props) => (\r\n            <Tooltip id=\"flip-selection-tooltip\" {...props}>\r\n              Inverser la sélection\r\n            </Tooltip>)}\r\n        >\r\n          <Button variant=\"light\" disabled={this.props.disabled}\r\n            onClick={() => { this.props.dispatch(flipSelectionAll()) }}>\r\n            <CircleHalf />\r\n          </Button>\r\n        </OverlayTrigger>\r\n      </ButtonGroup>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default connect()(SelectionButtonsGroup)","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { submitXmlFile } from '../../app/actions'\r\n\r\nimport Tooltip from 'react-bootstrap/Tooltip'\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger'\r\n\r\nimport Button from 'react-bootstrap/Button'\r\nimport { Download } from 'react-bootstrap-icons';\r\n\r\nclass LoadButton extends React.Component {\r\n\r\n  onChangeFile(event) {\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n    Promise.all(Array.from(event.target.files).map((file) => { return file.text(); }))\r\n      .then(textArray => {\r\n        textArray.forEach(textFile => { this.props.dispatch(submitXmlFile(textFile)); });\r\n      });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <OverlayTrigger\r\n        placement=\"bottom\"\r\n        delay={{ show: 250, hide: 400 }}\r\n        overlay={(props) => (\r\n          <Tooltip id=\"load-button-tooltip\" {...props}>\r\n            Charger un ou plusieurs fichiers à éditer\r\n          </Tooltip>)}\r\n      >\r\n        <Button variant=\"primary\" className={this.props.className} size={this.props.size}\r\n          disabled={this.props.isLoading}\r\n          onClick={() => { if (!this.props.isLoading) { this.upload.click() } }}>\r\n          <input type=\"file\" id=\"inputFiles\"\r\n            ref={(ref) => this.upload = ref}\r\n            style={{ display: \"none\" }}\r\n            onChange={this.onChangeFile.bind(this)} multiple />\r\n          <Download />\r\n          {this.props.buttonText}\r\n        </Button >\r\n      </OverlayTrigger>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nconst mapState = (state) => {\r\n  return { isLoading: state.main.loadingInfo.isLoading }\r\n}\r\n\r\nexport default connect(mapState)(LoadButton)","const config = require('../../config/config.json') \r\n\r\nconst saveAsFile = (filename, content, dataType) => {\r\n    var element = document.createElement('a');\r\n    element.setAttribute('href',\r\n        dataType + ';charset=utf-8,' + encodeURIComponent(content));\r\n    element.setAttribute('download', filename);\r\n\r\n    element.style.display = 'none';\r\n    document.body.appendChild(element);\r\n\r\n    element.click();\r\n\r\n    document.body.removeChild(element);\r\n}\r\n\r\nexport const saveAsXmlFile = (filename, content) => {\r\n    const header = config.xml_header;\r\n    const footer = config.xml_footer;\r\n\r\n    saveAsFile(filename, header + content + footer, 'data:application/xml');\r\n}\r\n\r\nexport const saveAsJsonFile = (filename, content) => {\r\n    saveAsFile(filename, content, 'data:application/json');\r\n}","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport Popover from 'react-bootstrap/Popover'\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger'\r\n\r\nimport Button from 'react-bootstrap/Button'\r\nimport { Upload } from 'react-bootstrap-icons';\r\n\r\nimport InputGroup from 'react-bootstrap/InputGroup'\r\nimport FormControl from 'react-bootstrap/FormControl'\r\nimport { Check } from 'react-bootstrap-icons';\r\n\r\nimport { editedObject, getEditedObjectXmlTools, getEditedObjectState } from '../../app/enums/editedObject'\r\nimport { saveAsXmlFile } from '../../app/tools/saveFile'\r\n\r\nconst dateStringForFileName = () => {\r\n    let now = new Date();\r\n    var result = \"\";\r\n\r\n    result += now.getFullYear();\r\n    result += String(now.getMonth()).padStart(2, '0')\r\n    result += String(now.getDate()).padStart(2, '0');\r\n    result += \"T\";\r\n    result += String(now.getHours()).padStart(2, '0');\r\n    result += String(now.getMinutes()).padStart(2, '0');\r\n\r\n    return result;\r\n}\r\n\r\nclass SaveButton extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.fileName = dateStringForFileName() + \"_element.xml\";\r\n        this.handleValidate = this.handleValidate.bind(this);\r\n    }\r\n\r\n    getCurrentFileName() {\r\n        var fileType = this.props.editedObject;\r\n        return dateStringForFileName() + \"_\" + fileType + \".xml\";\r\n    }\r\n\r\n    handleValidate() {\r\n        var xmlText = getEditedObjectXmlTools(this.props.editedObject)\r\n            .concatAllElementsAsXmlText(getEditedObjectState(this.props.state));\r\n        saveAsXmlFile(this.fileName, xmlText);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <OverlayTrigger\r\n                placement=\"bottom\"\r\n                delay={{ show: 100, hide: 100 }}\r\n                trigger=\"click\"\r\n                rootClose={true}\r\n                overlay={(props) => (\r\n                    <Popover id=\"save-name-popover\" placement=\"bottom\" {...props}>\r\n                        <Popover.Title as=\"h3\">Nom du fichier</Popover.Title>\r\n                        <Popover.Content>\r\n                            <InputGroup className={this.props.className} style={{ width: 300 }}>\r\n                                <FormControl\r\n                                    defaultValue={this.fileName}\r\n                                    aria-label=\"Nom du fichier\"\r\n                                    onChange={(event) => { this.fileName = event.target.value }}\r\n                                    onClick={(event) => { event.stopPropagation() }}\r\n                                />\r\n                                <InputGroup.Append>\r\n                                    <Button variant=\"success\"\r\n                                        onClick={(event) => {\r\n                                            this.handleValidate();\r\n                                            event.stopPropagation();\r\n                                        }}>\r\n                                        <Check />\r\n                                    </Button >\r\n                                </InputGroup.Append>\r\n                            </InputGroup>\r\n                        </Popover.Content>\r\n                    </Popover>\r\n                )}\r\n            >\r\n                <Button variant=\"success\" className={this.props.className}\r\n                    onClick={() => { this.fileName = this.getCurrentFileName(); }}\r\n                    disabled={this.props.editedObject === editedObject.NONE}\r\n                >\r\n                    <Upload />\r\n                </Button >\r\n            </OverlayTrigger>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return ({\r\n        editedObject: state.editedObject,\r\n        state: state\r\n    })\r\n}\r\n\r\nexport default connect(mapStateToProps)(SaveButton)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { deleteSelected } from '../../app/actions'\r\n\r\nimport Tooltip from 'react-bootstrap/Tooltip'\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger'\r\n\r\nimport Button from 'react-bootstrap/Button'\r\nimport { Trash } from 'react-bootstrap-icons';\r\n\r\nclass DeleteButton extends React.Component {\r\n\r\n  render() {\r\n    return (\r\n      <OverlayTrigger\r\n        placement=\"bottom\"\r\n        delay={{ show: 250, hide: 400 }}\r\n        overlay={(props) => (\r\n          <Tooltip id=\"button-tooltip\" {...props}>\r\n            Supprimer\r\n          </Tooltip>)}\r\n      >\r\n        <Button variant=\"light\" className={this.props.className}\r\n          disabled={this.props.disabled}\r\n          onClick={() => { this.props.dispatch(deleteSelected()) }}>\r\n          <Trash />\r\n        </Button >\r\n      </OverlayTrigger>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default connect()(DeleteButton)","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { duplicateSelected } from '../../app/actions'\r\n\r\nimport Tooltip from 'react-bootstrap/Tooltip'\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger'\r\n\r\nimport Button from 'react-bootstrap/Button'\r\nimport { Files } from 'react-bootstrap-icons';\r\n\r\nclass DuplicateButton extends React.Component {\r\n\r\n  render() {\r\n    return (\r\n      <OverlayTrigger\r\n        placement=\"bottom\"\r\n        delay={{ show: 250, hide: 400 }}\r\n        overlay={(props) => (\r\n          <Tooltip id=\"duplicate-button-tooltip\" {...props}>\r\n            Dupliquer\r\n          </Tooltip>)}\r\n      >\r\n        <Button variant=\"light\" className={this.props.className}\r\n          disabled={this.props.disabled}\r\n          onClick={() => { this.props.dispatch(duplicateSelected()) }}>\r\n          <Files />\r\n        </Button >\r\n      </OverlayTrigger>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default connect()(DuplicateButton)","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { changeIdSelected } from '../../app/actions'\r\n\r\nimport Tooltip from 'react-bootstrap/Tooltip'\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger'\r\n\r\nimport Button from 'react-bootstrap/Button'\r\nimport { Code } from 'react-bootstrap-icons';\r\n\r\nclass ChangeIdButton extends React.Component {\r\n\r\n  render() {\r\n    return (\r\n      <OverlayTrigger\r\n        placement=\"bottom\"\r\n        delay={{ show: 250, hide: 400 }}\r\n        overlay={(props) => (\r\n          <Tooltip id=\"changeid-button-tooltip\" {...props}>\r\n            Affecter un nouveau GUID\r\n          </Tooltip>)}\r\n      >\r\n        <Button variant=\"light\" className={this.props.className}\r\n          disabled={this.props.disabled}\r\n          onClick={() => { this.props.dispatch(changeIdSelected()) }}>\r\n          <Code />\r\n        </Button >\r\n      </OverlayTrigger>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default connect()(ChangeIdButton)","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { shiftDateButtonClicked } from '../../app/actions'\r\n\r\nimport Tooltip from 'react-bootstrap/Tooltip'\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger'\r\n\r\nimport Button from 'react-bootstrap/Button'\r\nimport { BoxArrowRight } from 'react-bootstrap-icons'\r\n\r\nclass ShiftDateButton extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        // These bindings are necessary to make `this` work in the callback    \r\n        this.handleShow = this.handleShow.bind(this);\r\n    }\r\n\r\n    handleShow(event) {\r\n        this.props.dispatch(shiftDateButtonClicked());\r\n        event.stopPropagation();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <OverlayTrigger\r\n                placement=\"bottom\"\r\n                delay={{ show: 250, hide: 400 }}\r\n                overlay={(props) => (\r\n                    <Tooltip id=\"shift-date-tooltip\" {...props}>\r\n                        Déplacer la date et l'heure\r\n                    </Tooltip>)}>\r\n                <Button variant=\"light\" className={this.props.className} \r\n                    disabled={this.props.disabled} onClick={this.handleShow}>\r\n                    <BoxArrowRight />\r\n                </Button>\r\n            </OverlayTrigger >\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default connect()(ShiftDateButton)","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { fanHeureDepartButtonClicked } from '../../app/actions'\r\n\r\nimport DropdownItem from 'react-bootstrap/DropdownItem'\r\n\r\nclass FanHeureDepartButton extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        // These bindings are necessary to make `this` work in the callback    \r\n        this.handleShow = this.handleShow.bind(this);\r\n    }\r\n\r\n    handleShow(event) {\r\n        this.props.dispatch(fanHeureDepartButtonClicked());\r\n        event.stopPropagation();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <DropdownItem variant=\"light\" onClick={this.handleShow}>\r\n                Heure départ\r\n            </DropdownItem>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default connect()(FanHeureDepartButton)","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { fanNumMarcheButtonClicked } from '../../app/actions'\r\n\r\nimport DropdownItem from 'react-bootstrap/DropdownItem'\r\n\r\nclass FanNumMarcheButton extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        // These bindings are necessary to make `this` work in the callback    \r\n        this.handleShow = this.handleShow.bind(this);\r\n    }\r\n\r\n    handleShow(event) {\r\n        this.props.dispatch(fanNumMarcheButtonClicked());\r\n        event.stopPropagation();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <DropdownItem onClick={this.handleShow}>\r\n                Numéro de marche\r\n            </DropdownItem>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default connect()(FanNumMarcheButton)","import React from 'react'\r\n\r\nimport Tooltip from 'react-bootstrap/Tooltip'\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger'\r\n\r\nimport DropdownButton from 'react-bootstrap/DropdownButton'\r\nimport { ListNested } from 'react-bootstrap-icons';\r\n\r\nimport FanHeureDepartButton from './FanHeureDepartButton'\r\nimport FanNumMarcheButton from './FanNumMarcheButton'\r\n\r\nclass FanActionsDropdown extends React.Component {\r\n\r\n  render() {\r\n    return (\r\n      <OverlayTrigger\r\n        placement=\"right\"\r\n        delay={{ show: 250, hide: 400 }}\r\n        overlay={(props) => (\r\n          <Tooltip id=\"fan-dropdown-tooltip\" {...props}>\r\n            Répartir pour la sélection\r\n          </Tooltip>)}\r\n      >\r\n        <DropdownButton variant=\"light\" title={<ListNested />}>\r\n            <FanNumMarcheButton />\r\n            <FanHeureDepartButton />\r\n        </DropdownButton>\r\n      </OverlayTrigger>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default FanActionsDropdown","import React from 'react';\r\n\r\nimport FanActionsDropdown from './FanActionsDropdown'\r\n\r\nconst CirculationsSpecificToolbar = () => (\r\n        <FanActionsDropdown />\r\n)\r\n\r\nexport default CirculationsSpecificToolbar;\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { applyGuidMapFile } from '../../app/actions'\r\n\r\nimport Tooltip from 'react-bootstrap/Tooltip'\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger'\r\n\r\nimport Button from 'react-bootstrap/Button'\r\n\r\nclass ApplyGuidMapButton extends React.Component {\r\n\r\n  onChangeFile(event) {\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n    Promise.all(Array.from(event.target.files).map((file) => { return file.text(); }))\r\n      .then(textArray => {\r\n        textArray.forEach(textFile => { this.props.dispatch(applyGuidMapFile(textFile)); });\r\n      });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <OverlayTrigger\r\n        placement=\"bottom\"\r\n        delay={{ show: 250, hide: 400 }}\r\n        overlay={(props) => (\r\n          <Tooltip id=\"load-button-tooltip\" {...props}>\r\n            Charger un ou plusieurs fichiers à éditer\r\n          </Tooltip>)}\r\n      >\r\n        <Button variant=\"primary\" className={this.props.className} size={this.props.size}\r\n          disabled={this.props.isLoading}\r\n          onClick={() => { if (!this.props.isLoading) { this.upload.click() } }}>\r\n          <input type=\"file\" id=\"inputFiles\"\r\n            ref={(ref) => this.upload = ref}\r\n            style={{ display: \"none\" }}\r\n            onChange={this.onChangeFile.bind(this)} multiple />\r\n          Appliquer un fichier de correspondances\r\n          {this.props.buttonText}\r\n        </Button >\r\n      </OverlayTrigger>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default connect()(ApplyGuidMapButton)","import React from 'react';\r\n\r\nimport ApplyGuidMapButton from '../toolbar/ApplyGuidMapButton'\r\n\r\nconst EnchainementsSpecificToolbar = () => (\r\n        <ApplyGuidMapButton />\r\n)\r\n\r\nexport default EnchainementsSpecificToolbar;\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { editedObject } from '../../app/enums/editedObject'\r\nimport CirculationsSpecificToolbar from '../../circulationsComponents/toolbar/CirculationsSpecificToolbar'\r\nimport EnchainementsSpecificToolbar from '../../enchainementsComponents/toolbar/EnchainementsSpecificToolbar'\r\n\r\nclass ObjectSpecificToolbar extends React.Component {\r\n\r\n    render() {\r\n        switch (this.props.editedObject) {\r\n            case editedObject.CIRCULATIONS:\r\n                return (<CirculationsSpecificToolbar />);\r\n            case editedObject.ENCHAINEMENTS:\r\n                return (<EnchainementsSpecificToolbar />);\r\n            case editedObject.NONE:\r\n            default:\r\n                return (<></>);\r\n        }\r\n    }\r\n\r\n}\r\n\r\nconst mapState = (state) => {\r\n    return { editedObject: state.editedObject }\r\n}\r\n\r\nexport default connect(mapState)(ObjectSpecificToolbar)","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport Badge from 'react-bootstrap/Badge'\r\nimport { editedObject } from '../../app/enums/editedObject'\r\n\r\nclass CurrentlyEditedLabel extends React.Component {\r\n\r\n    render() {\r\n        switch (this.props.editedObject) {\r\n            case editedObject.CIRCULATIONS:\r\n                return (<Badge variant=\"primary\" {...this.props}>Circulations</Badge>);\r\n            case editedObject.PTX:\r\n                return (<Badge variant=\"warning\" {...this.props}>PTX</Badge>);\r\n            case editedObject.ENCHAINEMENTS:\r\n                return (<Badge variant=\"info\" {...this.props}>Enchainements</Badge>);\r\n            case editedObject.NONE:\r\n            default:\r\n                return (<></>);\r\n        }\r\n    }\r\n\r\n}\r\n\r\nconst mapState = (state) => {\r\n    return { editedObject: state.editedObject }\r\n}\r\n\r\nexport default connect(mapState)(CurrentlyEditedLabel)","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport Popover from 'react-bootstrap/Popover'\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger'\r\n\r\nimport Button from 'react-bootstrap/Button'\r\nimport { FileCode } from 'react-bootstrap-icons';\r\n\r\nimport InputGroup from 'react-bootstrap/InputGroup'\r\nimport FormControl from 'react-bootstrap/FormControl'\r\nimport { Check } from 'react-bootstrap-icons';\r\n\r\nimport { getEditedObjectState } from '../../app/enums/editedObject'\r\nimport { buildGuidJsonMap } from '../../app/tools/buildGuidJsonMap'\r\nimport { saveAsJsonFile } from '../../app/tools/saveFile'\r\n\r\nconst dateStringForFileName = () => {\r\n    let now = new Date();\r\n    var result = \"\";\r\n\r\n    result += now.getFullYear();\r\n    result += String(now.getMonth()).padStart(2, '0')\r\n    result += String(now.getDate()).padStart(2, '0');\r\n    result += \"T\";\r\n    result += String(now.getHours()).padStart(2, '0');\r\n    result += String(now.getMinutes()).padStart(2, '0');\r\n\r\n    return result;\r\n}\r\n\r\nclass SaveGuidMapButton extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.fileName = dateStringForFileName() + \"_correspondances_guid.json\";\r\n        this.handleValidate = this.handleValidate.bind(this);\r\n    }\r\n\r\n    getCurrentFileName() {\r\n        return dateStringForFileName() + \"_correspondances_guid.json\";\r\n    }\r\n\r\n    handleValidate() {\r\n        var jsonGuidMap = buildGuidJsonMap(getEditedObjectState(this.props.state));\r\n        saveAsJsonFile(this.fileName, JSON.stringify(jsonGuidMap));\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <OverlayTrigger\r\n                placement=\"bottom\"\r\n                delay={{ show: 100, hide: 100 }}\r\n                trigger=\"click\"\r\n                rootClose={true}\r\n                overlay={(props) => (\r\n                    <Popover id=\"save-guidmap-name-popover\" placement=\"bottom\" {...props}>\r\n                        <Popover.Title as=\"h3\">Nom du fichier</Popover.Title>\r\n                        <Popover.Content>\r\n                            <InputGroup className={this.props.className} style={{ width: 300 }}>\r\n                                <FormControl\r\n                                    defaultValue={this.fileName}\r\n                                    aria-label=\"Nom du fichier\"\r\n                                    onChange={(event) => { this.fileName = event.target.value }}\r\n                                    onClick={(event) => { event.stopPropagation() }}\r\n                                />\r\n                                <InputGroup.Append>\r\n                                    <Button variant=\"success\"\r\n                                        onClick={(event) => {\r\n                                            this.handleValidate();\r\n                                            event.stopPropagation();\r\n                                        }}>\r\n                                        <Check />\r\n                                    </Button >\r\n                                </InputGroup.Append>\r\n                            </InputGroup>\r\n                        </Popover.Content>\r\n                    </Popover>\r\n                )}\r\n            >\r\n                <Button variant=\"light\" className={this.props.className}\r\n                    onClick={() => { this.fileName = this.getCurrentFileName(); }}\r\n                    disabled={!this.props.guidChanged}\r\n                >\r\n                    <FileCode />\r\n                </Button >\r\n            </OverlayTrigger>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return ({\r\n        guidChanged: state.main.guidChanged,\r\n        state: state\r\n    })\r\n}\r\n\r\nexport default connect(mapStateToProps)(SaveGuidMapButton)\r\n","export const buildGuidJsonMap = (elementsById) => {\r\n    return Object.keys(elementsById).reduce((result, id) => {\r\n        if (elementsById[id].origineId === undefined) {\r\n            return result;\r\n        } else if (elementsById[id].origineId !== elementsById[id].id ) {\r\n            return ({...result, [elementsById[id].origineId] : elementsById[id].id});\r\n        } else {\r\n            return result;\r\n        }\r\n    }, {});\r\n}","import React from 'react';\r\nimport { connect } from 'react-redux'\r\n\r\nimport Navbar from 'react-bootstrap/Navbar'\r\nimport ButtonGroup from 'react-bootstrap/ButtonGroup'\r\n\r\nimport { editedObject } from '../../app/enums/editedObject'\r\n\r\nimport SelectionButtonsGroup from './SelectionButtonsGroup'\r\nimport LoadButton from './LoadButton'\r\nimport SaveButton from './SaveButton'\r\nimport DeleteButton from './DeleteButton'\r\nimport DuplicateButton from './DuplicateButton'\r\nimport ChangeIdButton from './ChangeIdButton'\r\nimport ShiftDateButton from './ShiftDateButton'\r\nimport ObjectSpecificToolbar from './ObjectSpecificToolbar'\r\nimport CurrentlyEditedLabel from './CurrentlyEditedLabel'\r\nimport SaveGuidMapButton from './SaveGuidMapButton';\r\n\r\nconst Toolbar = (props) => (\r\n    <Navbar bg=\"dark\" sticky=\"top\">\r\n        <LoadButton className=\"mr-2\" />\r\n        <SelectionButtonsGroup className=\"mr-2\" disabled={props.editedObject === editedObject.NONE} />\r\n        <ButtonGroup className=\"mr-2\">\r\n            <DuplicateButton disabled={props.editedObject === editedObject.NONE} />\r\n            <DeleteButton disabled={props.editedObject === editedObject.NONE} />\r\n        </ButtonGroup>\r\n        <ButtonGroup className=\"mr-2\">\r\n            <ChangeIdButton disabled={props.editedObject === editedObject.NONE} />\r\n            <SaveGuidMapButton />\r\n        </ButtonGroup>\r\n\r\n        <ShiftDateButton className=\"mr-2\" disabled={props.editedObject === editedObject.NONE } />\r\n        <ObjectSpecificToolbar />\r\n\r\n        <Navbar.Collapse className=\"justify-content-end\">\r\n            <CurrentlyEditedLabel className=\"mr-sm-3\" />\r\n            <SaveButton />\r\n        </Navbar.Collapse>\r\n    </Navbar>\r\n)\r\n\r\nconst mapState = (state) => {\r\n    return { editedObject: state.editedObject }\r\n}\r\n\r\nexport default connect(mapState)(Toolbar)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { duplicateRow } from '../../app/actions'\r\nimport { deleteRow } from '../../app/actions'\r\n\r\nimport Button from 'react-bootstrap/Button'\r\nimport { Files } from 'react-bootstrap-icons';\r\nimport { Trash } from 'react-bootstrap-icons';\r\n\r\nclass RowActions extends React.Component {\r\n\r\n  render() {\r\n    return (\r\n      <div className={this.props.className}>\r\n        <Button\r\n          onClick={(event) => {\r\n            this.props.dispatch(duplicateRow(this.props.id));\r\n            event.stopPropagation();\r\n          }}\r\n          variant=\"outline-dark\" size=\"sm\"\r\n          className=\"mr-1 py-0 btn-xs\" >\r\n          <Files />\r\n        </Button>\r\n        <Button\r\n          onClick={(event) => {\r\n            this.props.dispatch(deleteRow(this.props.id));\r\n            event.stopPropagation();\r\n          }}\r\n          variant=\"outline-dark\" size=\"sm\"\r\n          className=\"py-0 btn-xs\" >\r\n          <Trash />\r\n        </Button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default connect()(RowActions)","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { changeNumMarche, stopNumMarcheCellEdition } from '../../app/actions'\r\n\r\nimport InputGroup from 'react-bootstrap/InputGroup'\r\nimport Button from 'react-bootstrap/Button'\r\nimport FormControl from 'react-bootstrap/FormControl'\r\nimport { Check } from 'react-bootstrap-icons';\r\n\r\nclass NumMarcheCellEditor extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.numMarcheEdit = props.numMarche;\r\n\r\n        // This binding is necessary to make `this` work in the callback    \r\n        this.handleValidate = this.handleValidate.bind(this);\r\n    }\r\n\r\n    handleValidate() {\r\n        if (this.props.numMarche !== this.numMarcheEdit) {\r\n            this.props.dispatch(\r\n                changeNumMarche(this.props.id, this.numMarcheEdit));\r\n        } else {\r\n            this.props.dispatch(\r\n                stopNumMarcheCellEdition(this.props.id));\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <InputGroup className={this.props.className}>\r\n                <FormControl\r\n                    defaultValue={this.props.numMarche}\r\n                    aria-label=\"Numéro de marche\"\r\n                    onChange={(event) => { this.numMarcheEdit = event.target.value }}\r\n                    onClick={(event) => { event.stopPropagation() }}\r\n                    onKeyDown={(event) => { \r\n                        if (event.key === \"Escape\") {\r\n                        this.props.dispatch(stopNumMarcheCellEdition(this.props.id));\r\n                    }}}\r\n                    onKeyPress={(event) => {\r\n                        if (event.key === \"Enter\") {\r\n                            this.handleValidate();\r\n                    }}}\r\n                />\r\n                <InputGroup.Append>\r\n                    <Button variant=\"success\"\r\n                        onClick={(event) => {\r\n                            this.handleValidate();\r\n                            event.stopPropagation();\r\n                        }}>\r\n                        <Check />\r\n                    </Button >\r\n                </InputGroup.Append>\r\n            </InputGroup>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default connect()(NumMarcheCellEditor)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { changeHeureDepart, stopHeureDepartCellEdition } from '../../app/actions'\r\n\r\nimport InputGroup from 'react-bootstrap/InputGroup'\r\nimport Button from 'react-bootstrap/Button'\r\nimport FormControl from 'react-bootstrap/FormControl'\r\nimport { Check } from 'react-bootstrap-icons';\r\n\r\nclass HeureDepartCellEditor extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        let parsedDate = new Date(props.heureDepart);\r\n        this.dateEdited = parsedDate.toISOString().slice(0, 10);\r\n        this.timeEdited = parsedDate.toLocaleTimeString('fr-FR');\r\n\r\n        // This binding is necessary to make `this` work in the callback    \r\n        this.handleValidate = this.handleValidate.bind(this);\r\n    }\r\n\r\n    handleValidate() {\r\n        let newHeureDepart = new Date(\r\n            this.dateEdited + \" \" + this.timeEdited);\r\n        if (newHeureDepart !== this.props.heureDepart) {\r\n            this.props.dispatch(changeHeureDepart(\r\n                this.props.id, newHeureDepart.toISOString()))\r\n\r\n        } else {\r\n            this.props.dispatch(stopHeureDepartCellEdition(this.props.id));\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={this.props.className}>\r\n                <InputGroup>\r\n                    <FormControl\r\n                        defaultValue={this.dateEdited}\r\n                        aria-label=\"Date de départ\"\r\n                        type=\"date\"\r\n                        onChange={(event) => {\r\n                            this.dateEdited = event.target.value\r\n                        }}\r\n                        onClick={(event) => { event.stopPropagation() }}\r\n                        onKeyDown={(event) => {\r\n                            if (event.key === \"Escape\") {\r\n                                this.props.dispatch(stopHeureDepartCellEdition(this.props.id));\r\n                            }\r\n                        }}\r\n                        onKeyPress={(event) => {\r\n                            if (event.key === \"Enter\") {\r\n                                this.handleValidate();\r\n                            }\r\n                        }}\r\n                    />\r\n                    <FormControl\r\n                        defaultValue={this.timeEdited}\r\n                        aria-label=\"Heure de départ\"\r\n                        type=\"time\"\r\n                        onChange={(event) => { this.timeEdited = event.target.value }}\r\n                        onClick={(event) => { event.stopPropagation() }}\r\n                        onKeyDown={(event) => {\r\n                            if (event.key === \"Escape\") {\r\n                                this.props.dispatch(stopHeureDepartCellEdition(this.props.id));\r\n                            }\r\n                        }}\r\n                        onKeyPress={(event) => {\r\n                            if (event.key === \"Enter\") {\r\n                                this.handleValidate();\r\n                            }\r\n                        }}\r\n                    />\r\n                    <InputGroup.Append>\r\n                        <Button variant=\"success\"\r\n                            onClick={(event) => {\r\n                                this.handleValidate();\r\n                                event.stopPropagation();\r\n                            }}>\r\n                            <Check />\r\n                        </Button >\r\n                    </InputGroup.Append>\r\n                </InputGroup>\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default connect()(HeureDepartCellEditor)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { changeHeureDepart, stopHeureArriveeCellEdition } from '../../app/actions'\r\n\r\nimport InputGroup from 'react-bootstrap/InputGroup'\r\nimport Button from 'react-bootstrap/Button'\r\nimport FormControl from 'react-bootstrap/FormControl'\r\nimport { Check } from 'react-bootstrap-icons';\r\n\r\nclass HeureArriveeCellEditor extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        let parsedHeureDepart = new Date(props.heureDepart);\r\n        let parsedDate = new Date(parsedHeureDepart.getTime() + 1000 * props.dureeTrajet); \r\n        this.dateEdited = parsedDate.toISOString().slice(0, 10);\r\n        this.timeEdited = parsedDate.toLocaleTimeString('fr-FR');\r\n\r\n        // This binding is necessary to make `this` work in the callback    \r\n        this.handleValidate = this.handleValidate.bind(this);\r\n    }\r\n\r\n    handleValidate() {\r\n        let newHeureArrivee = new Date(this.dateEdited + \" \" + this.timeEdited);\r\n        let newHeureDepart = new Date(newHeureArrivee.getTime() - 1000 * this.props.dureeTrajet);\r\n        if (newHeureDepart !== this.props.heureDepart) {\r\n            this.props.dispatch(changeHeureDepart(\r\n                this.props.id, newHeureDepart.toISOString()))\r\n\r\n        } else {\r\n            this.props.dispatch(stopHeureArriveeCellEdition(this.props.id));\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={this.props.className}>\r\n                <InputGroup>\r\n                    <FormControl\r\n                        defaultValue={this.dateEdited}\r\n                        aria-label=\"Date de départ\"\r\n                        type=\"date\"\r\n                        onChange={(event) => {\r\n                            this.dateEdited = event.target.value\r\n                        }}\r\n                        onClick={(event) => { event.stopPropagation() }}\r\n                        onKeyDown={(event) => {\r\n                            if (event.key === \"Escape\") {\r\n                                this.props.dispatch(stopHeureArriveeCellEdition(this.props.id));\r\n                            }\r\n                        }}\r\n                        onKeyPress={(event) => {\r\n                            if (event.key === \"Enter\") {\r\n                                this.handleValidate();\r\n                            }\r\n                        }}\r\n                    />\r\n                    <FormControl\r\n                        defaultValue={this.timeEdited}\r\n                        aria-label=\"Heure de départ\"\r\n                        type=\"time\"\r\n                        onChange={(event) => { this.timeEdited = event.target.value }}\r\n                        onClick={(event) => { event.stopPropagation() }}\r\n                        onKeyDown={(event) => {\r\n                            if (event.key === \"Escape\") {\r\n                                this.props.dispatch(stopHeureArriveeCellEdition(this.props.id));\r\n                            }\r\n                        }}\r\n                        onKeyPress={(event) => {\r\n                            if (event.key === \"Enter\") {\r\n                                this.handleValidate();\r\n                            }\r\n                        }}\r\n                    />\r\n                    <InputGroup.Append>\r\n                        <Button variant=\"success\"\r\n                            onClick={(event) => {\r\n                                this.handleValidate();\r\n                                event.stopPropagation();\r\n                            }}>\r\n                            <Check />\r\n                        </Button >\r\n                    </InputGroup.Append>\r\n                </InputGroup>\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default connect()(HeureArriveeCellEditor)\r\n","const tctCodeIdMap = {\r\n    \"FCB\": \"77e8acc5-2d5c-11e6-8bb5-01e08e116de3\",\r\n    \"FCC\": \"7c996166-2d5c-11e6-a2d2-01e08e116de3\",\r\n    \"FEC\": \"76982e97-2d5c-11e6-8203-01e08e116de3\",\r\n    \"FER\": \"9009a7b6-2d5c-11e6-af37-01e08e116de3\",\r\n    \"FLC\": \"9f1e1dc1-2d5c-11e6-9942-01e08e116de3\",\r\n    \"FMB\": \"a87a1b74-2d5c-11e6-959d-01e08e116de3\",\r\n    \"FRR\": \"8a559299-2d5c-11e6-820b-01e08e116de3\",\r\n    \"FVC\": \"0460da1f-2d5d-11e6-b2be-01e08e116de3\",\r\n    \"HYD\": \"013eacaf-2d5e-11e6-a2b9-01e08e116de3\",\r\n    \"HZF\": \"807a7227-2d5c-11e6-b4aa-01e08e116de3\",\r\n    \"HZI\": \"dbee4698-2d5d-11e6-83ca-01e08e116de3\",\r\n    \"HZN\": \"fcaf8b51-2d5c-11e6-b540-01e08e116de3\",\r\n    \"IAT\": \"844416b7-2d7b-11e6-a021-01148e116de3\",\r\n    \"IEA\": \"ad77bd92-2d78-11e6-b578-01148e116de3\",\r\n    \"IVO\": \"8ddbe0fe-2d5c-11e6-90ac-01e08e116de3\",\r\n    \"JAB\": \"8492a97e-2d5d-11e6-93b3-01e08e116de3\",\r\n    \"JAC\": \"ce7c9a7d-2d5d-11e6-8f95-01e08e116de3\",\r\n    \"LBB\": \"ad4f8172-2d78-11e6-b384-01148e116de3\",\r\n    \"LBC\": \"76ceb1ad-2d5c-11e6-8409-01e08e116de3\",\r\n    \"LBG\": \"9ed9e77a-2d5c-11e6-95a2-01e08e116de3\",\r\n    \"LBL\": \"5b3d758f-2d5c-11e6-89c5-01e08e116de3\",\r\n    \"LCA\": \"3a4773c1-2d5d-11e6-9f32-01e08e116de3\",\r\n    \"LVD\": \"5ab0ab1c-2d5c-11e6-83e7-01e08e116de3\",\r\n    \"LVH\": \"5a58bbca-2d5c-11e6-802f-01e08e116de3\",\r\n    \"RBD\": \"fe9e3ec5-2d5b-11e6-892f-01e08e116de3\",\r\n    \"RBK\": \"6d957615-2d5c-11e6-8c5c-01e08e116de3\",\r\n    \"RBS\": \"00b5e5f7-2d5c-11e6-90cb-01e08e116de3\",\r\n    \"RCD\": \"6e53e9ee-2d5c-11e6-95fc-01e08e116de3\",\r\n    \"RCK\": \"6dbb8ee8-2d5c-11e6-8dfd-01e08e116de3\",\r\n    \"SCD\": \"dd4454d2-2d5c-11e6-9b0a-01e08e116de3\",\r\n    \"SCK\": \"8872471c-2d5c-11e6-ac4c-01e08e116de3\"\r\n}\r\n\r\nexport const getCodesTctArray = () => {\r\n    return Object.keys(tctCodeIdMap);\r\n}\r\n\r\nexport const getCodeTctId = (tctCode) => {\r\n     return tctCodeIdMap[tctCode];\r\n}","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { getCodesTctArray, getCodeTctId } from '../../app/tools/codeTctTools'\r\nimport { changeCodeTct, stopCodeTctCellEdition } from '../../app/actions'\r\n\r\nimport InputGroup from 'react-bootstrap/InputGroup'\r\nimport Button from 'react-bootstrap/Button'\r\nimport FormControl from 'react-bootstrap/FormControl'\r\nimport { Check } from 'react-bootstrap-icons';\r\n\r\nclass CodeTctCellEditor extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.codeTctEdit = props.codeTCT;\r\n\r\n        // This binding is necessary to make `this` work in the callback    \r\n        this.handleValidate = this.handleValidate.bind(this);\r\n    }\r\n\r\n    handleValidate() {\r\n        if (this.props.codeTCT !== this.codeTctEdit) {\r\n            this.props.dispatch(\r\n                changeCodeTct(\r\n                    this.props.id, \r\n                    getCodeTctId(this.codeTctEdit), \r\n                    this.codeTctEdit));\r\n        } else {\r\n            this.props.dispatch(\r\n                stopCodeTctCellEdition(this.props.id));\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <InputGroup className={this.props.className}>\r\n                <FormControl as=\"select\"\r\n                    defaultValue={this.props.codeTCT}\r\n                    aria-label=\"Code TCT\"\r\n                    onChange={(event) => { this.codeTctEdit = event.target.value }}\r\n                    onClick={(event) => { event.stopPropagation() }}\r\n                    onKeyDown={(event) => {\r\n                        if (event.key === \"Escape\") {\r\n                            this.props.dispatch(stopCodeTctCellEdition(this.props.id));\r\n                        }\r\n                    }}\r\n                    onKeyPress={(event) => {\r\n                        if (event.key === \"Enter\") {\r\n                            this.handleValidate();\r\n                        }\r\n                }}>\r\n                    {getCodesTctArray().map(codeTct => (\r\n                        <option>{codeTct}</option>\r\n                    ))}\r\n                </FormControl>\r\n                <InputGroup.Append>\r\n                    <Button variant=\"success\"\r\n                        onClick={(event) => {\r\n                            this.handleValidate();\r\n                            event.stopPropagation();\r\n                        }}>\r\n                        <Check />\r\n                    </Button >\r\n                </InputGroup.Append>\r\n            </InputGroup>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default connect()(CodeTctCellEditor)\r\n","import React from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { clickOnRow, numMarcheCellClicked, heureDepartCellClicked, codeTctCellClicked, heureArriveeCellClicked } from '../../app/actions'\r\nimport { circulationXmlTools } from '../../app/tools/xmlTools'\r\n\r\nimport RowActions from '../../mainComponents/table/RowActions'\r\nimport NumMarcheCellEditor from './NumMarcheCellEditor'\r\nimport HeureDepartCellEditor from './HeureDepartCellEditor'\r\nimport HeureArriveeCellEditor from './HeureArriveeCellEditor'\r\nimport CodeTctCellEditor from './CodeTctCellEditor'\r\n\r\nclass CirculationRow extends React.Component {\r\n    render() {\r\n        let heureDepart = new Date(this.props.heureDepart);\r\n        let heureArrivee = new Date(heureDepart.getTime() + 1000 * this.props.dureeTrajet);\r\n        return (\r\n            <tr className={this.props.selected ? \"table-secondary\" : \"\"}\r\n                onClick={() => { this.props.dispatch(clickOnRow(this.props.id)) }} >\r\n                <td>{this.props.id}</td>\r\n                <td>{\r\n                    this.props.numMarcheEdited\r\n                        ? <NumMarcheCellEditor\r\n                            id={this.props.id}\r\n                            numMarche={this.props.numMarche} />\r\n                        : <span onClick={(event) => {\r\n                            this.props.dispatch(numMarcheCellClicked(this.props.id));\r\n                            event.stopPropagation();\r\n                        }}>\r\n                            {this.props.numMarche}\r\n                        </span>\r\n                }</td>\r\n                <td>{\r\n                    this.props.codeTctEdited\r\n                        ? <CodeTctCellEditor\r\n                            id={this.props.id}\r\n                            codeTCT={this.props.codeTCT} />\r\n                        : <span onClick={(event) => {\r\n                            this.props.dispatch(codeTctCellClicked(this.props.id));\r\n                            event.stopPropagation();\r\n                        }}>\r\n                            {this.props.codeTCT}\r\n                        </span>\r\n                }</td>\r\n                <td>{\r\n                    this.props.heureDepartEdited\r\n                        ? <HeureDepartCellEditor\r\n                            id={this.props.id}\r\n                            heureDepart={this.props.heureDepart} />\r\n                        : <span onClick={(event) => {\r\n                            this.props.dispatch(heureDepartCellClicked(this.props.id));\r\n                            event.stopPropagation();\r\n                        }}>\r\n                            {heureDepart.toLocaleDateString('fr-FR')} - {heureDepart.toLocaleTimeString('fr-FR')}\r\n                        </span>\r\n                }</td>\r\n                <td>{\r\n                    this.props.heureArriveeEdited\r\n                        ? <HeureArriveeCellEditor\r\n                            id={this.props.id}\r\n                            heureDepart={this.props.heureDepart}\r\n                            dureeTrajet={this.props.dureeTrajet} />\r\n                        : <span onClick={(event) => {\r\n                            this.props.dispatch(heureArriveeCellClicked(this.props.id));\r\n                            event.stopPropagation();\r\n                        }}>\r\n                            {heureArrivee.toLocaleDateString('fr-FR')} - {heureArrivee.toLocaleTimeString('fr-FR')}\r\n                        </span>\r\n                }</td>\r\n                <td><RowActions\r\n                    id={this.props.id} className=\"float-right\" /></td>\r\n            </tr>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    let circulation = state.circulationsById[ownProps.id];\r\n    return {\r\n        numMarche: circulationXmlTools.getNumMarche(circulation),\r\n        codeTCT: circulationXmlTools.getCodeTCT(circulation),\r\n        heureDepart: circulationXmlTools.getHeureDepart(circulation),\r\n        dureeTrajet: circulationXmlTools.getDureeTrajet(circulation),\r\n        selected: circulation.selected,\r\n        numMarcheEdited: circulation.numMarcheEdited,\r\n        heureDepartEdited: circulation.heureDepartEdited,\r\n        heureArriveeEdited: circulation.heureArriveeEdited,\r\n        codeTctEdited: circulation.codeTctEdited\r\n    }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps)(CirculationRow);","import React from 'react';\r\nimport { connect } from 'react-redux'\r\n\r\nimport Table from 'react-bootstrap/Table';\r\nimport CirculationRow from './tableRow/CirculationRow';\r\n\r\nconst CirculationsTable = ({ circulationsIdList }) => (\r\n    <Table hover>\r\n        <thead>\r\n            <tr>\r\n                <th className=\"w-30\">Id</th>\r\n                <th className=\"w-10\">Num. Marche</th>\r\n                <th className=\"w-10\">Code TCT</th>\r\n                <th className=\"w-15\">Date et heure de départ</th>\r\n                <th className=\"w-15\">Date et heure d'arrivée</th>\r\n                <th className=\"w-10\"></th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            {circulationsIdList.map(circulationId => (\r\n                <CirculationRow  key={circulationId}\r\n                id={circulationId} />\r\n            ))}\r\n        </tbody>\r\n    </Table >\r\n)\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        circulationsIdList: Object.keys(state.circulationsById)\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(CirculationsTable);","import React from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { clickOnRow } from '../../app/actions'\r\n\r\nimport RowActions from '../../mainComponents/table/RowActions'\r\n\r\nclass EnchainementRow extends React.Component {\r\n    render() {\r\n        return (\r\n            <tr className={this.props.selected ? \"table-secondary\" : \"\"}\r\n                onClick={() => { this.props.dispatch(clickOnRow(this.props.id)) }} >\r\n                <td>{this.props.id}</td>\r\n                <td>{this.props.elementEntrantId}</td>\r\n                <td>{this.props.elementSortantId}</td>\r\n                <td><RowActions\r\n                    id={this.props.id} className=\"float-right\" /></td>\r\n            </tr>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    let enchainement = state.enchainementsById[ownProps.id];\r\n    return {\r\n        selected: enchainement.selected,\r\n        elementEntrantId: enchainement.elementEntrantId,\r\n        elementSortantId: enchainement.elementSortantId\r\n    }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps)(EnchainementRow);","import React from 'react';\r\nimport { connect } from 'react-redux'\r\n\r\nimport Table from 'react-bootstrap/Table';\r\n\r\nimport EnchainementRow from './tableRow/EnchainementRow'\r\n\r\nconst EnchainementsTable = ({ enchainementsIdList }) => (\r\n    <Table hover>\r\n        <thead>\r\n            <tr>\r\n                <th className=\"w-20\">Id</th>\r\n                <th className=\"w-20\">Id Entrant</th>\r\n                <th className=\"w-20\">Id Sortant</th>\r\n                <th className=\"w-10\"></th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            {enchainementsIdList.map(enchainementId => (\r\n                <EnchainementRow key={enchainementId}\r\n                id={enchainementId} />\r\n            ))}\r\n        </tbody>\r\n    </Table >\r\n)\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        enchainementsIdList: Object.keys(state.enchainementsById)\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(EnchainementsTable);","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { changeDateHeureDebut, stopDateHeureDebutCellEdition } from '../../app/actions'\r\n\r\nimport InputGroup from 'react-bootstrap/InputGroup'\r\nimport Button from 'react-bootstrap/Button'\r\nimport FormControl from 'react-bootstrap/FormControl'\r\nimport { Check } from 'react-bootstrap-icons';\r\n\r\nclass DateHeureDebutCellEditor extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        let parsedDate = new Date(props.dateHeureDebut);\r\n        this.dateEdited = parsedDate.toISOString().slice(0, 10);\r\n        this.timeEdited = parsedDate.toLocaleTimeString('fr-FR');\r\n\r\n        // This binding is necessary to make `this` work in the callback    \r\n        this.handleValidate = this.handleValidate.bind(this);\r\n    }\r\n\r\n    handleValidate() {\r\n        let newHeureDebut = new Date(\r\n            this.dateEdited + \" \" + this.timeEdited);\r\n        if (newHeureDebut !== this.props.dateHeureDebut) {\r\n            this.props.dispatch(changeDateHeureDebut(\r\n                this.props.id, newHeureDebut.toISOString()))\r\n\r\n        } else {\r\n            this.props.dispatch(stopDateHeureDebutCellEdition(this.props.id));\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={this.props.className}>\r\n                <InputGroup>\r\n                    <FormControl\r\n                        defaultValue={this.dateEdited}\r\n                        aria-label=\"Date du début\"\r\n                        type=\"date\"\r\n                        onChange={(event) => {\r\n                            this.dateEdited = event.target.value\r\n                        }}\r\n                        onClick={(event) => { event.stopPropagation() }}\r\n                        onKeyDown={(event) => {\r\n                            if (event.key === \"Escape\") {\r\n                                this.props.dispatch(stopDateHeureDebutCellEdition(this.props.id));\r\n                            }\r\n                        }}\r\n                        onKeyPress={(event) => {\r\n                            if (event.key === \"Enter\") {\r\n                                this.handleValidate();\r\n                            }\r\n                        }}\r\n                    />\r\n                    <FormControl\r\n                        defaultValue={this.timeEdited}\r\n                        aria-label=\"Heure du début\"\r\n                        type=\"time\"\r\n                        onChange={(event) => { this.timeEdited = event.target.value }}\r\n                        onClick={(event) => { event.stopPropagation() }}\r\n                        onKeyDown={(event) => {\r\n                            if (event.key === \"Escape\") {\r\n                                this.props.dispatch(stopDateHeureDebutCellEdition(this.props.id));\r\n                            }\r\n                        }}\r\n                        onKeyPress={(event) => {\r\n                            if (event.key === \"Enter\") {\r\n                                this.handleValidate();\r\n                            }\r\n                        }}\r\n                    />\r\n                    <InputGroup.Append>\r\n                        <Button variant=\"success\"\r\n                            onClick={(event) => {\r\n                                this.handleValidate();\r\n                                event.stopPropagation();\r\n                            }}>\r\n                            <Check />\r\n                        </Button >\r\n                    </InputGroup.Append>\r\n                </InputGroup>\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default connect()(DateHeureDebutCellEditor)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { changeNumeroPlanche, stopNumeroPlancheCellEdition } from '../../app/actions'\r\n\r\nimport InputGroup from 'react-bootstrap/InputGroup'\r\nimport Button from 'react-bootstrap/Button'\r\nimport FormControl from 'react-bootstrap/FormControl'\r\nimport { Check } from 'react-bootstrap-icons';\r\n\r\nclass NumeroPlancheCellEditor extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.numeroPlancheEdit = props.numeroPlanche;\r\n\r\n        // This binding is necessary to make `this` work in the callback    \r\n        this.handleValidate = this.handleValidate.bind(this);\r\n    }\r\n\r\n    handleValidate() {\r\n        if (this.props.numeroPlanche !== this.numeroPlancheEdit) {\r\n            this.props.dispatch(\r\n                changeNumeroPlanche(this.props.id, this.numeroPlancheEdit));\r\n        } else {\r\n            this.props.dispatch(\r\n                stopNumeroPlancheCellEdition(this.props.id));\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <InputGroup className={this.props.className}>\r\n                <FormControl\r\n                    defaultValue={this.props.numeroPlanche}\r\n                    aria-label=\"Numéro de planche\"\r\n                    onChange={(event) => { this.numeroPlancheEdit = event.target.value }}\r\n                    onClick={(event) => { event.stopPropagation() }}\r\n                    onKeyDown={(event) => { \r\n                        if (event.key === \"Escape\") {\r\n                        this.props.dispatch(stopNumeroPlancheCellEdition(this.props.id));\r\n                    }}}\r\n                    onKeyPress={(event) => {\r\n                        if (event.key === \"Enter\") {\r\n                            this.handleValidate();\r\n                    }}}\r\n                />\r\n                <InputGroup.Append>\r\n                    <Button variant=\"success\"\r\n                        onClick={(event) => {\r\n                            this.handleValidate();\r\n                            event.stopPropagation();\r\n                        }}>\r\n                        <Check />\r\n                    </Button >\r\n                </InputGroup.Append>\r\n            </InputGroup>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default connect()(NumeroPlancheCellEditor)\r\n","import React from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { clickOnRow, dateHeureDebutCellClicked, numeroPlancheCellClicked } from '../../app/actions'\r\n\r\nimport RowActions from '../../mainComponents/table/RowActions'\r\nimport DateHeureDebutCellEditor from './DateHeureDebutCellEditor'\r\nimport NumeroPlancheCellEditor from './NumeroPlancheCellEditor'\r\nimport { ptxXmlTools } from '../../app/tools/xmlTools'\r\n\r\nclass PtxRow extends React.Component {\r\n    render() {\r\n        let dateHeureDebut = new Date(this.props.dateHeureDebut);\r\n        return (\r\n            <tr className={this.props.selected ? \"table-secondary\" : \"\"}\r\n                onClick={() => { this.props.dispatch(clickOnRow(this.props.id)) }} >\r\n                <td>{this.props.id}</td>\r\n                <td>{\r\n                    this.props.numeroPlancheEdited\r\n                        ? <NumeroPlancheCellEditor\r\n                            id={this.props.id}\r\n                            numeroPlanche={this.props.numeroPlanche} />\r\n                        : <span onClick={(event) => {\r\n                            this.props.dispatch(numeroPlancheCellClicked(this.props.id));\r\n                            event.stopPropagation();\r\n                        }}>\r\n                            {this.props.numeroPlanche}\r\n                        </span>\r\n                }</td>                \r\n                <td>{this.props.ressourceInfraType}</td>\r\n                <td>{this.props.ressourceDescription}</td>\r\n                <td>{\r\n                    this.props.dateHeureDebutEdited\r\n                        ? <DateHeureDebutCellEditor\r\n                            id={this.props.id}\r\n                            dateHeureDebut={this.props.dateHeureDebut} />\r\n                        : <span onClick={(event) => {\r\n                            this.props.dispatch(dateHeureDebutCellClicked(this.props.id));\r\n                            event.stopPropagation();\r\n                        }}>\r\n                            {dateHeureDebut.toLocaleDateString('fr-FR')} - {dateHeureDebut.toLocaleTimeString('fr-FR')}\r\n                        </span>\r\n                }</td>\r\n                <td><RowActions\r\n                    id={this.props.id} className=\"float-right\" /></td>\r\n            </tr>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    let ptx = state.ptxsById[ownProps.id];\r\n    return {\r\n        selected: ptx.selected,\r\n        ressourceInfraType: ptxXmlTools.getPtxRessourcesInfraType(ptx),\r\n        ressourceDescription: ptxXmlTools.getPtxRessourcesDescription(ptx),\r\n        dateHeureDebut: ptxXmlTools.getDateHeureDebut(ptx),\r\n        dateHeureDebutEdited: ptx.dateHeureDebutEdited,\r\n        numeroPlanche : ptxXmlTools.getNumeroPlance(ptx),\r\n        numeroPlancheEdited : ptx.numeroPlancheEdited\r\n    }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps)(PtxRow);","import React from 'react';\r\nimport { connect } from 'react-redux'\r\n\r\nimport Table from 'react-bootstrap/Table';\r\n\r\nimport PtxRow from './tableRow/PtxRow'\r\n\r\nconst PtxsTable = ({ ptxsIdList }) => (\r\n    <Table hover>\r\n        <thead>\r\n            <tr>\r\n                <th className=\"w-20\">Id</th>\r\n                <th className=\"w-10\">Numéro</th>\r\n                <th className=\"w-10\">Type ressource</th>\r\n                <th className=\"w-20\">Description ressource</th>\r\n                <th className=\"w-20\">Date et heure de début</th>\r\n                <th className=\"w-10\"></th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            {ptxsIdList.map(ptxId => (\r\n                <PtxRow key={ptxId}\r\n                id={ptxId} />\r\n            ))}\r\n        </tbody>\r\n    </Table >\r\n)\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        ptxsIdList: Object.keys(state.ptxsById)\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(PtxsTable);","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { editedObject } from '../../app/enums/editedObject'\r\n\r\nimport Container from 'react-bootstrap/Container'\r\n\r\nimport LoadButton from '../toolbar/LoadButton'\r\nimport CirculationsTable from '../../circulationsComponents/CirculationsTable'\r\nimport EnchainementsTable from '../../enchainementsComponents/EnchainementsTable'\r\nimport PtxsTable from '../../ptxComponents/PtxsTable'\r\n\r\nclass MainTable extends React.Component {\r\n\r\n    render() {\r\n        switch (this.props.editedObject) {\r\n            case editedObject.CIRCULATIONS:\r\n                return (<CirculationsTable />);\r\n            case editedObject.PTX:\r\n                return (<PtxsTable />);\r\n            case editedObject.ENCHAINEMENTS:\r\n                return (<EnchainementsTable />);\r\n            case editedObject.NONE:\r\n            default:\r\n                return (\r\n                    <Container style={{ marginTop: 50 }}>\r\n                        <h2>Éditeur de fichiers xml pour l'import dans GOC 2.0</h2>\r\n                        <p>\r\n                            <b>Aucun fichier chargé</b><br />\r\n                            Pour commencer charger un fichier xml à éditer\r\n                        </p>\r\n                        <LoadButton buttonText=\" Charger un fichier\" />\r\n                    </Container>\r\n                );\r\n        }\r\n    }\r\n\r\n}\r\n\r\nconst mapState = (state) => {\r\n    return { editedObject: state.editedObject }\r\n}\r\n\r\nexport default connect(mapState)(MainTable)","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { shiftDateButtonClicked, shiftDateClosed, shiftDateValidated } from '../../app/actions'\r\nimport { getEditedObjectXmlTools, getEditedObjectState } from '../../app/enums/editedObject'\r\n\r\nimport Button from 'react-bootstrap/Button'\r\nimport Modal from 'react-bootstrap/Modal'\r\nimport FormControl from 'react-bootstrap/FormControl'\r\nimport Form from 'react-bootstrap/Form'\r\nimport InputGroup from 'react-bootstrap/InputGroup'\r\n\r\nclass ShiftDateModal extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        let parsedDate = new Date(Date.now());\r\n        this.startDay = this.props.startDate.toISOString().slice(0, 10);\r\n        this.startTime = this.props.startDate.toLocaleTimeString('fr-FR');\r\n        this.goalDay = parsedDate.toISOString().slice(0, 10);\r\n        this.goalTime = this.props.startDate.toLocaleTimeString('fr-FR');\r\n\r\n        // These bindings are necessary to make `this` work in the callback    \r\n        this.handleShow = this.handleShow.bind(this);\r\n        this.handleClose = this.handleClose.bind(this);\r\n        this.handleValidate = this.handleValidate.bind(this);\r\n    }\r\n\r\n    handleShow(event) {\r\n        this.props.dispatch(shiftDateButtonClicked());\r\n        event.stopPropagation();\r\n    }\r\n\r\n    handleClose(event) {\r\n        this.props.dispatch(shiftDateClosed());\r\n        if (event) {\r\n            event.stopPropagation();\r\n        }\r\n    }\r\n\r\n    handleValidate(event) {\r\n        let start = new Date(this.startDay + \" \" + this.startTime);\r\n        let goal = new Date(this.goalDay + \" \" + this.goalTime);\r\n        this.props.dispatch(\r\n            shiftDateValidated(start.toISOString(), goal.toISOString())\r\n        );\r\n        event.stopPropagation();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Modal show={this.props.shown} onHide={this.handleClose}\r\n                onClick={(event) => { event.stopPropagation(); }}>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>Décalage des heures de départ</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <Form.Group>\r\n                        <Form.Label>De la date</Form.Label>\r\n                        <InputGroup>\r\n                            <FormControl\r\n                                defaultValue={this.startDay}\r\n                                aria-label=\"De la date (jour)\"\r\n                                type=\"date\"\r\n                                onChange={(event) => {\r\n                                    this.startDay = event.target.value;\r\n                                }}\r\n                            />\r\n                            <FormControl\r\n                                defaultValue={this.startTime}\r\n                                aria-label=\"De la date (heure)\"\r\n                                type=\"time\"\r\n                                onChange={(event) => {\r\n                                    this.startTime = event.target.value;\r\n                                }}\r\n                            />\r\n                        </InputGroup>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group>\r\n                        <Form.Label>Vers la date</Form.Label>\r\n                        <InputGroup>\r\n                            <FormControl\r\n                                defaultValue={this.goalDay}\r\n                                aria-label=\"Vers la date (jour)\"\r\n                                type=\"date\"\r\n                                onChange={(event) => {\r\n                                    this.goalDay = event.target.value;\r\n                                }}\r\n                            />\r\n                            <FormControl\r\n                                defaultValue={this.goalTime}\r\n                                aria-label=\"Vers la date (heure)\"\r\n                                type=\"time\"\r\n                                onChange={(event) => {\r\n                                    this.goalTime = event.target.value;\r\n                                }}\r\n                            />\r\n                        </InputGroup>\r\n                    </Form.Group>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button variant=\"danger\" onClick={this.handleClose}>\r\n                        Annuler\r\n                    </Button>\r\n                    <Button variant=\"success\" onClick={this.handleValidate}>\r\n                        Valider\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nconst mapState = (state) => {\r\n    let selectedElementId = Object.keys(getEditedObjectState(state)).find(\r\n        (id) => { return getEditedObjectState(state)[id].selected });\r\n    return ({\r\n        shown: state.main.shiftDateModal.shown,\r\n        startDate:\r\n            (selectedElementId === undefined)\r\n                ? new Date(Date.now())\r\n                : new Date(getEditedObjectXmlTools(state.editedObject)\r\n                    .getHeure(getEditedObjectState(state)[selectedElementId]))\r\n    });\r\n}\r\n\r\nexport default connect(mapState)(ShiftDateModal)","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { fanHeureDepartButtonClicked, fanHeureDepartClosed, fanHeureDepartValidated } from '../../app/actions'\r\nimport { circulationXmlTools } from '../../app/tools/xmlTools'\r\n\r\nimport Button from 'react-bootstrap/Button'\r\nimport Modal from 'react-bootstrap/Modal'\r\nimport FormControl from 'react-bootstrap/FormControl'\r\nimport Form from 'react-bootstrap/Form'\r\nimport InputGroup from 'react-bootstrap/InputGroup'\r\n\r\nclass FanHeureDepartModal extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.dateEdited = this.props.startDate.toISOString().slice(0, 10);\r\n        this.timeEdited = this.props.startDate.toLocaleTimeString('fr-FR');\r\n\r\n        this.increment = 600; // default: 10 minutes increment\r\n\r\n        // These bindings are necessary to make `this` work in the callback    \r\n        this.handleShow = this.handleShow.bind(this);\r\n        this.handleClose = this.handleClose.bind(this);\r\n        this.handleValidate = this.handleValidate.bind(this);\r\n    }\r\n\r\n    handleShow(event) {\r\n        this.props.dispatch(fanHeureDepartButtonClicked());\r\n        event.stopPropagation();\r\n    }\r\n\r\n    handleClose(event) {\r\n        this.props.dispatch(fanHeureDepartClosed());\r\n        if (event) {\r\n            event.stopPropagation();\r\n        }\r\n    }\r\n\r\n    handleValidate(event) {\r\n        let newHeureDepart = new Date(\r\n            this.dateEdited + \" \" + this.timeEdited);\r\n        this.props.dispatch(\r\n            fanHeureDepartValidated(newHeureDepart.toISOString(), this.increment));\r\n        event.stopPropagation();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Modal show={this.props.shown} onHide={this.handleClose}\r\n                onClick={(event) => { event.stopPropagation(); }}>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>Ventilatation des heures de départ</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <Form.Group>\r\n                        <Form.Label>Heure de départ</Form.Label>\r\n\r\n                        <InputGroup>\r\n                            <FormControl\r\n                                defaultValue={this.dateEdited}\r\n                                aria-label=\"Date de départ\"\r\n                                type=\"date\"\r\n                                onChange={(event) => {\r\n                                    this.dateEdited = event.target.value;\r\n                                }}\r\n                            />\r\n                            <FormControl\r\n                                defaultValue={this.timeEdited}\r\n                                aria-label=\"Heure de départ\"\r\n                                type=\"time\"\r\n                                onChange={(event) => {\r\n                                    this.timeEdited = event.target.value;\r\n                                }}\r\n                            />\r\n                        </InputGroup>\r\n                    </Form.Group>\r\n                    <Form.Group>\r\n                        <Form.Label>Incrément</Form.Label>\r\n                        <Form.Control\r\n                            defaultValue={\"00:10:00\"}\r\n                            type=\"time\" step=\"1\" placeholder=\"Incrément\"\r\n                            onChange={(event) => {\r\n                                var secondsInc =\r\n                                    parseInt(event.target.value.slice(0, 2) * 3600, 10);\r\n                                secondsInc += parseInt(event.target.value.slice(3, 5) * 60, 10);\r\n                                var secondsPart = parseInt(event.target.value.slice(6, 8), 10);\r\n                                secondsInc += isNaN(secondsPart) ? 0 : secondsPart;\r\n                                this.increment = secondsInc;\r\n                            }} />\r\n                    </Form.Group>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button variant=\"danger\" onClick={this.handleClose}>\r\n                        Annuler\r\n                    </Button>\r\n                    <Button variant=\"success\" onClick={this.handleValidate}>\r\n                        Valider\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nconst mapState = (state) => {\r\n    let selectedId = Object.keys(state.circulationsById).find(\r\n        (id) => { return state.circulationsById[id].selected });\r\n    return ({\r\n        shown: state.main.fanHeureDepartModal.shown,\r\n        startDate:\r\n            (selectedId === undefined)\r\n                ? new Date(Date.now())\r\n                : new Date(circulationXmlTools.getHeureDepart(state.circulationsById[selectedId]))\r\n    });\r\n}\r\n\r\nexport default connect(mapState)(FanHeureDepartModal)","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { fanNumMarcheButtonClicked, fanNumMarcheClosed, fanNumMarcheValidated } from '../../app/actions'\r\nimport { circulationXmlTools } from '../../app/tools/xmlTools'\r\n\r\nimport Button from 'react-bootstrap/Button'\r\nimport Modal from 'react-bootstrap/Modal'\r\nimport FormControl from 'react-bootstrap/FormControl'\r\nimport Form from 'react-bootstrap/Form'\r\n\r\nclass FanNumMarcheModal extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.numMarcheEdited = this.props.selectedNumMarche;\r\n        this.increment = 2;\r\n\r\n        // These bindings are necessary to make `this` work in the callback    \r\n        this.handleShow = this.handleShow.bind(this);\r\n        this.handleClose = this.handleClose.bind(this);\r\n        this.handleValidate = this.handleValidate.bind(this);\r\n    }\r\n\r\n    handleShow(event) {\r\n        this.props.dispatch(fanNumMarcheButtonClicked());\r\n        event.stopPropagation();\r\n    }\r\n\r\n    handleClose(event) {\r\n        this.props.dispatch(fanNumMarcheClosed());\r\n        if (event) {\r\n            event.stopPropagation();\r\n        }\r\n    }\r\n\r\n    handleValidate(event) {\r\n        this.props.dispatch(\r\n            fanNumMarcheValidated(this.numMarcheEdited, this.increment));\r\n        event.stopPropagation();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Modal show={this.props.shown} onHide={this.handleClose}\r\n                onClick={(event) => { event.stopPropagation(); }}>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>Ventilatation des numéros de marche</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <Form.Group>\r\n                        <Form.Label>Numéro de marche intial</Form.Label>\r\n                        <FormControl\r\n                            defaultValue={this.numMarcheEdited}\r\n                            aria-label=\"Numéro de marche\"\r\n                            type=\"number\"\r\n                            onChange={(event) => {\r\n                                this.numMarcheEdited = parseInt(event.target.value, 10);\r\n                            }}\r\n                        />\r\n                    </Form.Group>\r\n                    <Form.Group>\r\n                        <Form.Label>Incrément</Form.Label>\r\n                        <Form.Control\r\n                            defaultValue={this.increment}\r\n                            type=\"number\" placeholder=\"Incrément\"\r\n                            onChange={(event) => {\r\n                                this.increment = parseInt(event.target.value, 10);\r\n                            }\r\n                            } />\r\n                    </Form.Group>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button variant=\"danger\" onClick={this.handleClose}>\r\n                        Annuler\r\n                    </Button>\r\n                    <Button variant=\"success\" onClick={this.handleValidate}>\r\n                        Valider\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nconst mapState = (state) => {\r\n    let selectedId = Object.keys(state.circulationsById).find(\r\n        (id) => { return state.circulationsById[id].selected });\r\n    return ({\r\n        shown: state.main.fanNumMarcheModal.shown,\r\n        selectedNumMarche:\r\n            (selectedId === undefined)\r\n                ? 0\r\n                : parseInt(circulationXmlTools.getNumMarche(state.circulationsById[selectedId]))\r\n    });\r\n}\r\n\r\nexport default connect(mapState)(FanNumMarcheModal)","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport FanHeureDepartModal from './FanHeureDepartModal'\r\nimport FanNumMarcheModal from './FanNumMarcheModal';\r\n\r\nclass CirculationSpecificModals extends React.Component {\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                {this.props.fanHeureDepartShown ? <FanHeureDepartModal /> : <></>}\r\n                {this.props.fanNumMarcheShown ? <FanNumMarcheModal /> : <></>}\r\n            </>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nconst mapState = (state) => {\r\n    return ({\r\n        fanHeureDepartShown: state.main.fanHeureDepartModal.shown,\r\n        fanNumMarcheShown: state.main.fanNumMarcheModal.shown,\r\n    });\r\n}\r\n\r\nexport default connect(mapState)(CirculationSpecificModals)","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { editedObject } from '../../app/enums/editedObject'\r\nimport ShiftDateModal from './ShiftDateModal';\r\nimport CirculationsSpecificModals from '../../circulationsComponents/modals/CirculationsSpecificModals'\r\n\r\nfunction ObjectSpecificModals(props) {\r\n    switch (props.editedObject) {\r\n        case editedObject.CIRCULATIONS:\r\n            return (<CirculationsSpecificModals />);\r\n        default:\r\n            return (<></>);\r\n    }\r\n}\r\n\r\nclass Modals extends React.Component {\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                {this.props.shiftDateShown ? <ShiftDateModal /> : <></>}\r\n                <ObjectSpecificModals {...this.props} />\r\n            </>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nconst mapState = (state) => {\r\n    return ({\r\n        editedObject: state.editedObject,\r\n        shiftDateShown: state.main.shiftDateModal.shown\r\n    });\r\n}\r\n\r\nexport default connect(mapState)(Modals)","import React from 'react';\r\n\r\nimport './App.css';\r\n\r\nimport Container from 'react-bootstrap/Container';\r\nimport Toolbar from './mainComponents/toolbar/Toolbar'\r\nimport MainTable from './mainComponents/table/MainTable'\r\nimport Modals from './mainComponents/modals/Modals';\r\n\r\nconst App = () => (\r\n  <Container fluid style={{ paddingLeft: 0, paddingRight: 0 }}>\r\n    <Toolbar />\r\n    <MainTable />\r\n    <Modals />\r\n  </Container>\r\n);\r\n\r\nexport default App;\r\n","import { produce } from 'immer'\r\nimport { v1 as uuidv1 } from 'uuid';\r\n\r\nexport const defaultObject = {\r\n  selected: false,\r\n  extended: false,\r\n  id: undefined,\r\n  origineId: undefined\r\n}\r\n\r\nexport const defaultObjectsById = (state = {}, action, xmlTools, defaultObject) => {\r\n  switch (action.type) {\r\n    case 'XML_FILE_SUBMITED':\r\n      let objectsToAdd = xmlTools.xmlTextToElementsObject(action.xmlText, defaultObject);\r\n      return ({\r\n        ...state,\r\n        ...objectsToAdd\r\n      });\r\n      case 'SELECT_ALL':\r\n        return produce(state, draftState => {\r\n          Object.keys(draftState).forEach((id => { draftState[id].selected = true; }));\r\n        });\r\n      case 'UNSELECT_ALL':\r\n        return produce(state, draftState => {\r\n          Object.keys(draftState).forEach((id => { draftState[id].selected = false; }));\r\n        });\r\n      case 'FLIP_SELECT_ALL':\r\n        return produce(state, draftState => {\r\n          Object.keys(draftState).forEach((id => {\r\n            draftState[id].selected = !(draftState[id].selected);\r\n          }));\r\n        });\r\n      case 'ROW_CLICKED_ON':\r\n        return produce(state, draftState => {\r\n          if (draftState[action.id] != null) {\r\n            draftState[action.id].selected = !(draftState[action.id].selected);\r\n          }\r\n        });\r\n      case 'ROW_DELETED':\r\n        return omit(action.id, state);\r\n      case 'DELETE_SELECTED_BUTTON_PRESSED':\r\n        return filterObject(state, (element) => { return !element.selected; });\r\n      case 'ROW_DUPLICATED':\r\n        return Object.keys(state).reduce((result, id) => {\r\n          if (id === action.id) {\r\n            let newId = uuidv1();\r\n            return ({\r\n              ...result,\r\n              [id]: state[id],\r\n              [newId]: {\r\n                ...state[id],\r\n                id: newId,\r\n                originedId: undefined,\r\n                selected: false\r\n              }\r\n            })\r\n          } else {\r\n            return ({ ...result, [id]: state[id] })\r\n          }\r\n        }, {});\r\n      case 'DUPLICATE_SELECTED_BUTTON_PRESSED':\r\n        return duplicateSelectedElement(state);\r\n      case 'CHANGE_ID_SELECTED_BUTTON_PRESSED':\r\n        return changeIdSelectedElement(state, xmlTools);\r\n      case 'SHIFT_DATE_VALIDATED':\r\n        return shiftDate(state, action.start, action.goal, xmlTools);\r\n      default:\r\n        return state\r\n    }\r\n}\r\n\r\nconst omit = (keyToOmit, { [keyToOmit]: _, ...omittedPropObj } = {}) => omittedPropObj;\r\n\r\nconst filterObject = (object, filterFunction) => {\r\n  let filtered = {};\r\n  Object.keys(object).forEach((key) => {\r\n    if (filterFunction(object[key])) {\r\n      filtered[key] = object[key];\r\n    }\r\n  })\r\n  return filtered;\r\n}\r\n\r\nconst duplicateSelectedElement = (state) => {\r\n  return Object.keys(state).reduce((result, id) => {\r\n    if (state[id].selected) {\r\n      let newId = uuidv1();\r\n      return ({\r\n        ...result,\r\n        [id]: state[id],\r\n        [newId]: {\r\n          ...state[id],\r\n          id: newId,\r\n          selected: false\r\n        }\r\n      })\r\n    } else {\r\n      return ({ ...result, [id]: state[id] })\r\n    }\r\n  }, {});\r\n}\r\n\r\nconst changeIdSelectedElement = (state, xmlTools) => {\r\n  return Object.keys(state).reduce((result, id) => {\r\n    if (state[id].selected) {\r\n      let newId = uuidv1();\r\n      return ({\r\n        ...result,\r\n        [newId]: xmlTools.withId(state[id], newId)\r\n      })\r\n    } else {\r\n      return ({ ...result, [id]: state[id] })\r\n    }\r\n  }, {});\r\n}\r\n\r\nconst shiftDate = (state, start, goal, xmlTools) => {\r\n  const startDate = new Date(start);\r\n  const goalDate = new Date(goal);\r\n  const delta = goalDate - startDate;\r\n\r\n  return produce(state, draftState => {\r\n    Object.keys(draftState).forEach((id) => {\r\n      const origDate = new Date(xmlTools.getHeure(draftState[id]));\r\n      draftState[id] = xmlTools.withHeure(draftState[id], (new Date(origDate.getTime() + delta)));\r\n    });\r\n  });\r\n}\r\n\r\nexport default defaultObjectsById","import { produce } from 'immer'\r\nimport { circulationXmlTools } from '../tools/xmlTools'\r\nimport { defaultObject, defaultObjectsById } from './defaultObjectsById'\r\n\r\nconst defaultCirculationObject = {\r\n  ...defaultObject,\r\n  numMarcheEdited: false,\r\n  heureDepartEdited: false,\r\n  heureArriveeEdited: false,\r\n  codeTctEdited: false\r\n}\r\n\r\nconst circulationsById = (state = {}, action) => {\r\n  switch (action.type) {\r\n    case 'CIRCULATION_CHANGED':\r\n      return produce(state, draftState => {\r\n        draftState[action.id] = {\r\n          ...draftState[action.id],\r\n          ...action.circulation\r\n        };\r\n      })\r\n    case 'NUM_MARCHE_CELL_CLICKED':\r\n      return produce(state, draftState => { draftState[action.id].numMarcheEdited = true; });\r\n    case 'STOP_NUM_MARCHE_CELL_EDITION':\r\n      return produce(state, draftState => { draftState[action.id].numMarcheEdited = false; });\r\n    case 'CIRCULATION_NUM_MARCHE_CHANGED':\r\n      return produce(state, draftState => {\r\n        draftState[action.id] = circulationXmlTools.withNumMarche(draftState[action.id], action.numMarche);\r\n        draftState[action.id].numMarcheEdited = false;\r\n      });\r\n    case 'HEURE_DEPART_CELL_CLICKED':\r\n      return produce(state, draftState => {\r\n        draftState[action.id].heureDepartEdited = true;\r\n        draftState[action.id].heureArriveeEdited = false;\r\n      });\r\n    case 'STOP_HEURE_DEPART_CELL_EDITION':\r\n      return produce(state, draftState => { draftState[action.id].heureDepartEdited = false; });\r\n    case 'HEURE_ARRIVEE_CELL_CLICKED':\r\n      return produce(state, draftState => {\r\n        draftState[action.id].heureArriveeEdited = true;\r\n        draftState[action.id].heureDepartEdited = false;\r\n      });\r\n    case 'STOP_HEURE_ARRIVEE_CELL_EDITION':\r\n      return produce(state, draftState => { draftState[action.id].heureArriveeEdited = false; });\r\n    case 'CIRCULATION_HEURE_DEPART_CHANGED':\r\n      return produce(state, draftState => {\r\n        draftState[action.id] = circulationXmlTools.withHeureDepart(draftState[action.id], action.heureDepart);\r\n        draftState[action.id].heureDepartEdited = false;\r\n        draftState[action.id].heureArriveeEdited = false;\r\n      });\r\n    case 'TCT_CELL_CLICKED':\r\n      return produce(state, draftState => { draftState[action.id].codeTctEdited = true; });\r\n    case 'STOP_TCT_CELL_EDITION':\r\n      return produce(state, draftState => { draftState[action.id].codeTctEdited = false; });\r\n    case 'CIRCULATION_TCT_CHANGED':\r\n      return produce(state, draftState => {\r\n        draftState[action.id] = circulationXmlTools.withCodeTCT(draftState[action.id], action.tctId, action.tctCode);\r\n        draftState[action.id].codeTctEdited = false;\r\n      });\r\n    case 'FAN_HEURE_DEPART_VALIDATED':\r\n      return fanHeureDepart(state, action.start, action.secondsIncrement);\r\n    case 'FAN_NUM_MARCHE_VALIDATED':\r\n      return fanNumMarche(state, action.start, action.increment);\r\n    default:\r\n      return defaultObjectsById(state, action, circulationXmlTools, defaultCirculationObject);\r\n  }\r\n}\r\n\r\nconst fanHeureDepart = (state, start, secondsIncrement) => {\r\n  var currentDate = new Date(start);\r\n  return produce(state, draftState => {\r\n    Object.keys(draftState).forEach((id) => {\r\n      if (draftState[id].selected) {\r\n        draftState[id] = circulationXmlTools.withHeureDepart(draftState[id], currentDate);\r\n        currentDate.setSeconds(currentDate.getSeconds() + secondsIncrement);\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\nconst fanNumMarche = (state, start, increment) => {\r\n  var currentId = start;\r\n  return produce(state, draftState => {\r\n    Object.keys(draftState).forEach((id) => {\r\n      if (draftState[id].selected) {\r\n        draftState[id] = circulationXmlTools.withNumMarche(draftState[id], currentId);\r\n        currentId += increment;\r\n      }\r\n    })\r\n  });\r\n}\r\n\r\nexport default circulationsById","import { produce } from 'immer'\r\nimport { enchainementXmlTools } from '../tools/xmlTools'\r\nimport { defaultObject, defaultObjectsById } from './defaultObjectsById'\r\n\r\nconst defaultEnchainementObject = {\r\n  ...defaultObject\r\n}\r\n\r\nconst enchainementsById = (state = {}, action) => {\r\n  switch (action.type) {\r\n    case 'GUID_MAP_FILE_APPLIED':\r\n      return applyGuidMapFile(state, action.guidMapText);\r\n    default:\r\n      return defaultObjectsById(state, action, enchainementXmlTools, defaultEnchainementObject);\r\n  }\r\n}\r\n\r\nconst buildCirculationsIdMap = (enchainementsById) => {\r\n  return Object.keys(enchainementsById).reduce((result, id) => {\r\n    return produce(result, draftResult => {\r\n      draftResult[enchainementsById[id].elementEntrantId] = {\r\n        ...draftResult[enchainementsById[id].elementEntrantId],\r\n        entrant: id\r\n      };\r\n      draftResult[enchainementsById[id].elementSortantId] = {\r\n        ...draftResult[enchainementsById[id].elementSortantId],\r\n        sortant: id\r\n      };\r\n    });\r\n  }, {});\r\n}\r\n\r\nconst applyGuidMapFile = (state, guidMapText) => {\r\n  let guidMap = JSON.parse(guidMapText);\r\n  let circulationsIdMap = buildCirculationsIdMap(state);\r\n\r\n  let guidToChangeList = Object.keys(guidMap).sort();\r\n  let circulationsIdList = Object.keys(circulationsIdMap).sort();\r\n\r\n  return produce(state, draftState => {\r\n    let guidToChangeIndex = 0;\r\n    let circulationsIdIndex = 0;\r\n\r\n    while (guidToChangeIndex < guidToChangeList.length && circulationsIdIndex < circulationsIdList.length) {\r\n      if (guidToChangeList[guidToChangeIndex] === circulationsIdList[circulationsIdIndex]) {\r\n        let idToChange = circulationsIdMap[circulationsIdList[circulationsIdIndex]];\r\n        if (idToChange.entrant !== undefined) {\r\n          draftState[idToChange.entrant].elementEntrantId = guidMap[guidToChangeList[guidToChangeIndex]];\r\n        }\r\n        if (idToChange.sortant !== undefined) {\r\n          draftState[idToChange.sortant].elementSortantId = guidMap[guidToChangeList[guidToChangeIndex]];\r\n        }\r\n        circulationsIdIndex += 1;\r\n      } else if (guidToChangeList[guidToChangeIndex] < circulationsIdList[circulationsIdIndex]) {\r\n        guidToChangeIndex += 1;\r\n      } else {\r\n        circulationsIdIndex += 1;\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\nexport default enchainementsById","import { produce } from 'immer'\r\nimport { ptxXmlTools } from '../tools/xmlTools'\r\nimport { defaultObject, defaultObjectsById } from './defaultObjectsById'\r\n\r\nconst defaultPtxObject = {\r\n  ...defaultObject,\r\n  numeroPlancheEdited: false,\r\n  dateHeureDebutEdited: false,\r\n}\r\n\r\nconst ptxsById = (state = {}, action) => {\r\n  switch (action.type) {\r\n    case 'DATE_HEURE_DEBUT_CELL_CLICKED':\r\n      return produce(state, draftState => { draftState[action.id].dateHeureDebutEdited = true; });\r\n    case 'STOP_DATE_HEURE_DEBUT_CELL_EDITION':\r\n      return produce(state, draftState => { draftState[action.id].dateHeureDebutEdited = false; });\r\n    case 'DATE_HEURE_DEBUT_CHANGED':\r\n      return produce(state, draftState => {\r\n        draftState[action.id] = ptxXmlTools.withDateHeureDebut(draftState[action.id], action.dateHeureDebut);\r\n        draftState[action.id].dateHeureDebutEdited = false;\r\n      });\r\n    case 'NUMERO_PLANCHE_CELL_CLICKED':\r\n      return produce(state, draftState => { draftState[action.id].numeroPlancheEdited = true; });\r\n    case 'STOP_NUMERO_PLANCHE_CELL_EDITION':\r\n      return produce(state, draftState => { draftState[action.id].numeroPlancheEdited = false; });\r\n    case 'PTX_NUMERO_PLANCHE_CHANGED':\r\n      return produce(state, draftState => {\r\n        draftState[action.id] = ptxXmlTools.withNumeroPlanche(draftState[action.id], action.numeroPlanche);\r\n        draftState[action.id].numeroPlancheEdited = false;\r\n      });\r\n    default:\r\n      return defaultObjectsById(state, action, ptxXmlTools, defaultPtxObject);\r\n  }\r\n}\r\n\r\nexport default ptxsById","import { produce } from 'immer'\r\n\r\nlet defaultState = {\r\n    loadingInfo: {\r\n        isLoading: false,\r\n        toLoadCount: 0,\r\n        loadedCount: 0\r\n    },\r\n    guidChanged: false,\r\n    shiftDateModal: {\r\n        shown: false,\r\n    },\r\n    fanHeureDepartModal: {\r\n        shown: false,\r\n    },\r\n    fanNumMarcheModal: {\r\n        shown: false,\r\n    }\r\n}\r\n\r\nconst main = (state = defaultState, action) => {\r\n    switch (action.type) {\r\n        case 'CHANGE_ID_SELECTED_BUTTON_PRESSED':\r\n            return produce(state, draftState => { draftState.guidChanged = true; });\r\n        case 'FAN_HEURE_DEPART_BUTTON_CLICKED':\r\n            return produce(state, draftState => { draftState.fanHeureDepartModal.shown = true; });\r\n        case 'FAN_HEURE_DEPART_VALIDATED':\r\n        case 'FAN_HEURE_DEPART_CLOSED':\r\n            return produce(state, draftState => { draftState.fanHeureDepartModal.shown = false; });\r\n        case 'FAN_NUM_MARCHE_BUTTON_CLICKED':\r\n            return produce(state, draftState => { draftState.fanNumMarcheModal.shown = true; });\r\n        case 'FAN_NUM_MARCHE_VALIDATED':\r\n        case 'FAN_NUM_MARCHE_CLOSED':\r\n            return produce(state, draftState => { draftState.fanNumMarcheModal.shown = false; });\r\n        case 'SHIFT_DATE_BUTTON_CLICKED':\r\n            return produce(state, draftState => { draftState.shiftDateModal.shown = true; });\r\n        case 'SHIFT_DATE_VALIDATED':\r\n        case 'SHIFT_DATE_CLOSED':\r\n            return produce(state, draftState => { draftState.shiftDateModal.shown = false; });\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default main","import { produce } from 'immer'\r\nimport { editedObject } from '../enums/editedObject'\r\n\r\nimport circulationsById from './circulationsById'\r\nimport enchainementsById from './enchainementsById'\r\nimport ptxsById from './ptxsById'\r\nimport main from './main'\r\n\r\nconst reducer = (state = { editedObject: editedObject.NONE }, action) => {\r\n    switch (action.type) {\r\n        case 'XML_FILE_SUBMITED':\r\n            let edited = getXmlFileObject(action.xmlText);\r\n            state = produce(state, draftState => {\r\n                draftState.editedObject = edited;\r\n            });\r\n            // caution: break is omitted intentionally - fallthrough to default\r\n        default:\r\n            return produce(state, draftState => {\r\n                draftState.main = main(state.main, action);\r\n                if (state.editedObject === editedObject.CIRCULATIONS) {\r\n                    draftState.circulationsById = circulationsById(state.circulationsById, action);\r\n                } else if (state.editedObject === editedObject.PTX) {\r\n                    draftState.ptxsById = ptxsById(state.ptxsById, action);\r\n                } else if (state.editedObject === editedObject.ENCHAINEMENTS) {\r\n                    draftState.enchainementsById = enchainementsById(state.enchainementsById, action);\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nconst getXmlFileObject = (xmlText) => {\r\n    let searchedString = xmlText.slice(0, 100);\r\n    if (searchedString.includes(\"<circulations>\")) {\r\n        return editedObject.CIRCULATIONS;\r\n    } else if (searchedString.includes(\"<planchesTravaux>\")) {\r\n        return editedObject.PTX;\r\n    } else if (searchedString.includes(\"<vueOffreEnchainementElementaires>\")) {\r\n        return editedObject.ENCHAINEMENTS;\r\n    } else {\r\n        return editedObject.NONE;\r\n    }\r\n}\r\nexport default reducer;","import { configureStore } from '@reduxjs/toolkit'\r\n\r\nimport reducer from './reducers/index'\r\n\r\nexport default configureStore({\r\n  reducer\r\n});","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nimport store from './app/store';\r\nimport { Provider } from 'react-redux';\r\n\r\n// Importing the Bootstrap CSS\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport './Bootstrap-override.css';\r\n\r\nReactDOM.render(\r\n    <React.StrictMode>\r\n      <Provider store={store}>\r\n        <App />\r\n      </Provider>\r\n    </React.StrictMode>,\r\n    document.getElementById('root')\r\n  );\r\n  "],"sourceRoot":""}