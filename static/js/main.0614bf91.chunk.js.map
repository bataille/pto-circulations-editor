{"version":3,"sources":["app/actions.js","containers/toolbar/SelectionButtonsGroup.js","containers/toolbar/LoadButton.js","containers/toolbar/SaveButton.js","containers/toolbar/DeleteButton.js","containers/toolbar/DuplicateButton.js","containers/toolbar/FanHeureDepartButton.js","containers/toolbar/FanNumMarcheButton.js","containers/toolbar/ShiftDateButton.js","components/Toolbar.js","app/tools/CirculationXmlTools.js","containers/circulationTableRow/CirculationRowActions.js","containers/circulationTableRow/NumMarcheCellEditor.js","containers/circulationTableRow/HeureDepartCellEditor.js","app/tools/CodeTctTools.js","containers/circulationTableRow/CodeTctCellEditor.js","containers/circulationTableRow/CirculationRow.js","containers/CirculationsTable.js","containers/modals/FanHeureDepartModal.js","containers/modals/FanNumMarcheModal.js","containers/modals/ShiftDateModal.js","containers/modals/Modals.js","App.js","app/reducers/circulationsById.js","app/reducers/toolbar.js","app/reducers/index.js","app/store.js","index.js"],"names":["stopNumMarcheCellEdition","id","type","stopHeureDepartCellEdition","stopCodeTctCellEdition","SelectionButtonsGroup","ButtonGroup","className","this","props","Button","variant","onClick","dispatch","React","Component","connect","LoadButton","event","stopPropagation","preventDefault","Promise","all","Array","from","target","files","map","file","text","then","textArray","fileText","length","reduce","acc","xmlText","disabled","isLoading","upload","click","ref","style","display","onChange","onChangeFile","bind","multiple","state","toolbar","loadingInfo","SaveButton","getCirculationXmlText","circulation","circulationsText","dateCreation","demandeur","localisation","parcours","mission","profilHoraire","profilDeCirculation","evenementsCirculation","etatCirculation","typeConvoi","typeGestion","renvoisStandards","parcoursTopologique","concatAllCirculationsAsText","circulationsById","Object","keys","forEach","fileName","circulations","element","document","createElement","setAttribute","encodeURIComponent","body","appendChild","removeChild","saveAsXmlFile","DeleteButton","DuplicateButton","FanHeureDepartButton","handleShow","DropdownItem","FanNumMarcheButton","ShiftDateButton","Toolbar","Navbar","bg","sticky","DropdownButton","title","xmlParser","DOMParser","xmlSerializer","XMLSerializer","xmlTextToCirculationsObject","defaultCirculationObject","result","parseFromString","getElementsByTagName","currentId","hasChildNodes","childNodes","node","tagName","innerHTML","serializeToString","getNumMarche","withNumMarche","numMarche","xmlDom","getCodeTCT","withCodeTCT","tctId","tctCode","getHeureDepart","withHeureDepart","heureDepart","heureToWrite","Date","toISOString","slice","CirculationRowAction","size","NumMarcheCellEditor","numMarcheEdit","handleValidate","InputGroup","FormControl","defaultValue","aria-label","value","onKeyDown","key","onKeyPress","Append","HeureDepartCellEditor","parsedDate","dateEdited","timeEdited","toLocaleTimeString","newHeureDepart","tctCodeIdMap","CodeTctCellEditor","codeTctEdit","codeTCT","changeCodeTct","as","codeTct","CirculationRow","selected","numMarcheEdited","codeTctEdited","heureDepartEdited","toLocaleDateString","CirculationRowActions","ownProps","circulationsIdList","Table","hover","circulationId","FanHeureDepartModal","startDate","increment","handleClose","start","secondsIncrement","Modal","show","shown","onHide","Header","closeButton","Title","Body","Form","Group","Label","Control","step","placeholder","secondsInc","parseInt","secondsPart","isNaN","Footer","selectedId","find","fanHeureDepartModal","undefined","now","FanNumMarcheModal","selectedNumMarche","fanNumMarcheModal","ShiftDateModal","startDay","startTime","goalDay","goalTime","goal","shiftDateValidated","shiftDateModal","Modals","fanHeureDepartShown","fanNumMarcheShown","shiftDateShown","App","Container","fluid","paddingLeft","paddingRight","extended","omit","keyToOmit","omittedPropObj","filterObject","object","filterFunction","filtered","duplicateSelectedCirculations","newId","uuidv1","fanHeureDepart","currentDate","produce","draftState","setSeconds","getSeconds","fanNumMarche","shiftDate","delta","origDate","getTime","action","circulationsToAdd","defaultState","toLoadCount","loadedCount","combineReducers","configureStore","reducer","ReactDOM","render","StrictMode","store","getElementById"],"mappings":"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","file":"static/js/main.0614bf91.chunk.js","sourcesContent":["export const submitXmlFile = (xmlText) => ({\n  type: 'XML_FILE_SUBMITED',\n  xmlText: xmlText\n})\n\nexport const selectAll = () => ({\n  type: 'SELECT_ALL'\n})\n\nexport const unselectAll = () => ({\n  type: 'UNSELECT_ALL'\n})\n\nexport const flipSelectionAll = () => ({\n  type: 'FLIP_SELECT_ALL'\n})\n\nexport const changeCirculation = (id, circulation) => ({\n  type: 'CIRCULATION_CHANGED',\n  id: id,\n  circulation: circulation\n})\n\nexport const clickOnCirculationRow = (id) => ({\n  type: 'CIRCULATION_ROW_CLICKED_ON',\n  id: id\n})\n\nexport const deleteCirculation = (id) => ({\n  type: 'CIRCULATION_DELETED',\n  id: id\n})\n\nexport const deleteSelected = () => ({\n  type: 'DELETE_SELECTED_BUTTON_PRESSED',\n})\n\nexport const duplicateCirculation = (id) => ({\n  type: 'CIRCULATION_DUPLICATED',\n  id: id\n})\n\nexport const duplicateSelected = () => ({\n  type: 'DUPLICATE_SELECTED_BUTTON_PRESSED',\n})\n\nexport const numMarcheCellClicked = (id) => ({\n  type: 'NUM_MARCHE_CELL_CLICKED',\n  id: id\n})\n\nexport const stopNumMarcheCellEdition = (id) => ({\n  type: 'STOP_NUM_MARCHE_CELL_EDITION',\n  id: id\n})\n\nexport const changeNumMarche = (id, numMarche) => ({\n  type: 'CIRCULATION_NUM_MARCHE_CHANGED',\n  id: id,\n  numMarche: numMarche\n})\n\nexport const heureDepartCellClicked = (id) => ({\n  type: 'HEURE_DEPART_CELL_CLICKED',\n  id: id\n})\n\nexport const stopHeureDepartCellEdition = (id) => ({\n  type: 'STOP_HEURE_DEPART_CELL_EDITION',\n  id: id\n})\n\nexport const changeHeureDepart = (id, heureDepart) => ({\n  type: 'CIRCULATION_HEURE_DEPART_CHANGED',\n  id: id,\n  heureDepart: heureDepart\n})\n\nexport const codeTctCellClicked = (id) => ({\n  type: 'TCT_CELL_CLICKED',\n  id: id\n})\n\nexport const stopCodeTctCellEdition = (id) => ({\n  type: 'STOP_TCT_CELL_EDITION',\n  id: id\n})\n\nexport const changeCodeTct = (id, tctId, tctCode) => ({\n  type: 'CIRCULATION_TCT_CHANGED',\n  id: id,\n  tctId: tctId,\n  tctCode: tctCode\n})\n\nexport const fanHeureDepartButtonClicked = () => ({\n  type: 'FAN_HEURE_DEPART_BUTTON_CLICKED',\n})\n\nexport const fanHeureDepartClosed = () => ({\n  type: 'FAN_HEURE_DEPART_CLOSED'\n})\n\nexport const fanHeureDepartValidated = (start, secondsIncrement) =>  ({\n  type: 'FAN_HEURE_DEPART_VALIDATED',\n  start: start,\n  secondsIncrement: secondsIncrement\n})\n\nexport const fanNumMarcheButtonClicked = () => ({\n  type: 'FAN_NUM_MARCHE_BUTTON_CLICKED',\n})\n\nexport const fanNumMarcheClosed = () => ({\n  type: 'FAN_NUM_MARCHE_CLOSED'\n})\n\nexport const fanNumMarcheValidated = (start, increment) =>  ({\n  type: 'FAN_NUM_MARCHE_VALIDATED',\n  start: start,\n  increment: increment\n})\n\nexport const shiftDateButtonClicked = () => ({\n  type: 'SHIFT_DATE_BUTTON_CLICKED',\n})\n\nexport const shiftDateClosed = () => ({\n  type: 'SHIFT_DATE_CLOSED'\n})\n\nexport const shiftDateValidated = (start, goal) =>  ({\n  type: 'SHIFT_DATE_VALIDATED',\n  start: start,\n  goal: goal\n})","import React from 'react'\nimport { connect } from 'react-redux'\nimport { selectAll, unselectAll, flipSelectionAll } from '../../app/actions'\n\nimport ButtonGroup from 'react-bootstrap/ButtonGroup'\nimport Button from 'react-bootstrap/Button'\nimport { ListCheck, ListTask, CircleHalf } from 'react-bootstrap-icons';\n\nclass SelectionButtonsGroup extends React.Component {\n\n  render() {\n    return (\n      <ButtonGroup className={this.props.className}>\n        <Button variant=\"light\"\n          onClick={() => { this.props.dispatch(selectAll()) }}>\n          <ListCheck />\n        </Button >\n        <Button variant=\"light\"\n          onClick={() => { this.props.dispatch(unselectAll()) }}>\n          <ListTask />\n        </Button >\n        <Button variant=\"light\"\n          onClick={() => { this.props.dispatch(flipSelectionAll())}}>\n          <CircleHalf />\n        </Button>\n      </ButtonGroup>\n    );\n  }\n\n}\n\nexport default connect()(SelectionButtonsGroup)","import React from 'react'\nimport { connect } from 'react-redux'\nimport { submitXmlFile } from '../../app/actions'\n\nimport Button from 'react-bootstrap/Button'\nimport { Download } from 'react-bootstrap-icons';\n\nclass LoadButton extends React.Component {\n\n  onChangeFile(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    Promise.all(Array.from(event.target.files).map((file) => { return file.text(); }))\n      .then(textArray => {\n        var fileText = \"\";\n        if (textArray.length === 1) {\n          fileText = textArray[0];\n        } else {\n          fileText = textArray.reduce(\n            (acc, text) => { return (acc + text + \"\\n\"); },\n            \"<circulations>\");\n          fileText += \"</circulations>\"\n        }\n        this.props.dispatch(submitXmlFile(fileText));\n      });\n  }\n\n  render() {\n    return (\n      <Button variant=\"primary\" className={this.props.className}\n        disabled={this.props.isLoading}\n        onClick={() => { if (!this.props.isLoading) { this.upload.click() } }}>\n        <input type=\"file\" id=\"circulationsFiles\"\n          ref={(ref) => this.upload = ref}\n          style={{ display: \"none\" }}\n          onChange={this.onChangeFile.bind(this)} multiple />\n        <Download />\n      </Button >\n    );\n  }\n\n}\n\nconst mapState = (state) => {\n  return { isLoading: state.toolbar.loadingInfo.isLoading }\n}\n\nexport default connect(mapState)(LoadButton)","import React from 'react'\nimport { connect } from 'react-redux'\n\nimport Button from 'react-bootstrap/Button'\nimport { Upload } from 'react-bootstrap-icons';\n\nclass SaveButton extends React.Component {\n\n    getCirculationXmlText = (circulation) => {\n        var circulationsText = \"<Circulation>\\n\";\n\n        circulationsText += \"<id>\" + circulation.id + \"</id>\\n\";\n        circulationsText += \"<dateCreation>\" + circulation.dateCreation + \"</dateCreation>\\n\";\n        circulationsText += \"<demandeur>\" + circulation.demandeur + \"</demandeur>\\n\"\n        circulationsText += \"<localisation>\" + circulation.localisation + \"</localisation>\\n\";\n        circulationsText += circulation.parcours + \"\\n\";\n        circulationsText += circulation.mission + \"\\n\";\n        circulationsText += circulation.profilHoraire + \"\\n\";\n        circulationsText += circulation.profilDeCirculation + \"\\n\";\n        circulationsText += circulation.evenementsCirculation + \"\\n\";\n        circulationsText += circulation.etatCirculation + \"\\n\";\n        circulationsText += circulation.typeConvoi + \"\\n\";\n        circulationsText += circulation.typeGestion + \"\\n\";\n        circulationsText += circulation.renvoisStandards + \"\\n\";\n        circulationsText += circulation.parcoursTopologique + \"\\n\";\n\n        circulationsText += \"</Circulation>\\n\";\n\n        return circulationsText;\n    }\n\n    concatAllCirculationsAsText = (circulationsById) => {\n        var text =  \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\n\\n\";\n        text += \"<circulations>\\n\";\n\n        Object.keys(circulationsById).forEach((id) => {\n            text += this.getCirculationXmlText(circulationsById[id]);\n        });\n\n        text += \"</circulations>\";\n        return text;\n    }\n\n    saveAsXmlFile(fileName) {\n        let xmlText = this.concatAllCirculationsAsText(this.props.circulations);\n\n        var element = document.createElement('a');\n        element.setAttribute('href',\n            'data:application/xml;charset=utf-8,' + encodeURIComponent(xmlText));\n        element.setAttribute('download', fileName);\n\n        element.style.display = 'none';\n        document.body.appendChild(element);\n\n        element.click();\n\n        document.body.removeChild(element);\n    }\n\n    render() {\n        return (\n            <Button variant=\"success\" className={this.props.className}\n                onClick={() => { this.saveAsXmlFile(this.props.fileName) }}>\n                <Upload />\n            </Button >\n        );\n    }\n\n}\n\n\nconst mapStateToProps = state => {\n    return ({\n        circulations: state.circulationsById\n    })\n}\n\nexport default connect(mapStateToProps)(SaveButton)\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { deleteSelected } from '../../app/actions'\n\nimport Button from 'react-bootstrap/Button'\nimport { Trash } from 'react-bootstrap-icons';\n\nclass DeleteButton extends React.Component {\n\n  render() {\n    return (\n      <Button variant=\"light\" className={this.props.className}\n        onClick={() => { this.props.dispatch(deleteSelected()) }}>\n        <Trash />\n      </Button >\n    );\n  }\n\n}\n\nexport default connect()(DeleteButton)","import React from 'react'\nimport { connect } from 'react-redux'\nimport { duplicateSelected } from '../../app/actions'\n\nimport Button from 'react-bootstrap/Button'\nimport { Files } from 'react-bootstrap-icons';\n\nclass DuplicateButton extends React.Component {\n\n  render() {\n    return (\n      <Button variant=\"light\" className={this.props.className}\n        onClick={() => { this.props.dispatch(duplicateSelected()) }}>\n        <Files />\n      </Button >\n    );\n  }\n\n}\n\nexport default connect()(DuplicateButton)","import React from 'react'\nimport { connect } from 'react-redux'\nimport { fanHeureDepartButtonClicked } from '../../app/actions'\n\nimport DropdownItem from 'react-bootstrap/DropdownItem'\n\nclass FanHeureDepartButton extends React.Component {\n    constructor(props) {\n        super(props);\n\n        // These bindings are necessary to make `this` work in the callback    \n        this.handleShow = this.handleShow.bind(this);\n    }\n\n    handleShow(event) {\n        this.props.dispatch(fanHeureDepartButtonClicked());\n        event.stopPropagation();\n    }\n\n    render() {\n        return (\n            <DropdownItem variant=\"light\" onClick={this.handleShow}>\n                Heure départ\n            </DropdownItem>\n        );\n    }\n\n}\n\nexport default connect()(FanHeureDepartButton)","import React from 'react'\nimport { connect } from 'react-redux'\nimport { fanNumMarcheButtonClicked } from '../../app/actions'\n\nimport DropdownItem from 'react-bootstrap/DropdownItem'\n\nclass FanNumMarcheButton extends React.Component {\n    constructor(props) {\n        super(props);\n\n        // These bindings are necessary to make `this` work in the callback    \n        this.handleShow = this.handleShow.bind(this);\n    }\n\n    handleShow(event) {\n        this.props.dispatch(fanNumMarcheButtonClicked());\n        event.stopPropagation();\n    }\n\n    render() {\n        return (\n            <DropdownItem onClick={this.handleShow}>\n                Numéro de marche\n            </DropdownItem>\n        );\n    }\n\n}\n\nexport default connect()(FanNumMarcheButton)","import React from 'react'\nimport { connect } from 'react-redux'\nimport { shiftDateButtonClicked } from '../../app/actions'\n\nimport Button from 'react-bootstrap/Button'\nimport { BoxArrowRight } from 'react-bootstrap-icons'\n\nclass ShiftDateButton extends React.Component {\n    constructor(props) {\n        super(props);\n\n        // These bindings are necessary to make `this` work in the callback    \n        this.handleShow = this.handleShow.bind(this);\n    }\n\n    handleShow(event) {\n        this.props.dispatch(shiftDateButtonClicked());\n        event.stopPropagation();\n    }\n\n    render() {\n        return (\n            <Button variant=\"light\" className={this.props.className} onClick={this.handleShow}>\n                <BoxArrowRight />\n            </Button>\n        );\n    }\n\n}\n\nexport default connect()(ShiftDateButton)","import React from 'react';\n\nimport Navbar from 'react-bootstrap/Navbar'\nimport ButtonGroup from 'react-bootstrap/ButtonGroup'\nimport DropdownButton from 'react-bootstrap/DropdownButton'\nimport { ListNested } from 'react-bootstrap-icons';\n\nimport SelectionButtonsGroup from '../containers/toolbar/SelectionButtonsGroup'\nimport LoadButton from '../containers/toolbar/LoadButton'\nimport SaveButton from '../containers/toolbar/SaveButton'\nimport DeleteButton from '../containers/toolbar/DeleteButton'\nimport DuplicateButton from '../containers/toolbar/DuplicateButton'\nimport FanHeureDepartButton from '../containers/toolbar/FanHeureDepartButton'\nimport FanNumMarcheButton from '../containers/toolbar/FanNumMarcheButton'\nimport ShiftDateButton from '../containers/toolbar/ShiftDateButton'\n\nconst Toolbar = () => (\n    <Navbar bg=\"dark\" sticky=\"top\">\n        <LoadButton className=\"mr-2\" />\n        <SelectionButtonsGroup className=\"mr-2\" />\n        <ButtonGroup className=\"mr-2\">\n            <DuplicateButton />\n            <DeleteButton />\n        </ButtonGroup>\n\n        <ShiftDateButton className=\"mr-2\" />\n\n        <DropdownButton variant=\"light\" title={<ListNested />}>\n            <FanNumMarcheButton />\n            <FanHeureDepartButton />\n        </DropdownButton>\n\n        <SaveButton fileName=\"circulations.xml\" className=\"ml-auto\" />\n    </Navbar>\n)\n\nexport default Toolbar;\n","const xmlParser = new DOMParser();\nconst xmlSerializer = new XMLSerializer();\n\nexport const xmlTextToCirculationsObject = (xmlText, defaultCirculationObject) => {\n  let result = { };\n  let xmlDoc = xmlParser.parseFromString(xmlText, \"application/xml\");\n  let circulations = xmlDoc.getElementsByTagName(\"Circulation\");\n\n  Array.from(circulations).forEach((circulation) => {\n    var currentId = 0;\n    if (circulation.hasChildNodes) {\n      circulation.childNodes.forEach((node) => {\n        switch (node.tagName) {\n          case \"id\":\n            currentId = node.innerHTML;\n            result[currentId] = {\n              ...defaultCirculationObject,\n              id: node.innerHTML,\n            };\n            break;\n          case \"dateCreation\":\n            result[currentId].dateCreation = node.innerHTML;\n            break;\n          case \"demandeur\":\n            result[currentId].demandeur = node.innerHTML;\n            break;\n          case \"localisation\":\n            result[currentId].localisation = node.innerHTML;\n            break;\n          case \"Parcours\":\n            result[currentId].parcours = xmlSerializer.serializeToString(node);\n            break;\n          case \"Mission\":\n            result[currentId].mission = xmlSerializer.serializeToString(node);\n            break;\n          case \"ProfilHoraire\":\n            result[currentId].profilHoraire = xmlSerializer.serializeToString(node);\n            break;\n          case \"ProfilDeCirculation\":\n            result[currentId].profilDeCirculation = xmlSerializer.serializeToString(node);\n            break;\n          case \"evenementsCirculation\":\n            result[currentId].evenementsCirculation = xmlSerializer.serializeToString(node);\n            break;\n          case \"EtatCirculation\":\n            result[currentId].etatCirculation = xmlSerializer.serializeToString(node);\n            break;\n          case \"TypeConvoi\":\n            result[currentId].typeConvoi = xmlSerializer.serializeToString(node);\n            break;\n          case \"TypeGestion\":\n            result[currentId].typeGestion = xmlSerializer.serializeToString(node);\n            break;\n          case \"renvoisStandards\":\n            result[currentId].renvoisStandards = xmlSerializer.serializeToString(node);\n            break;\n          case \"ParcoursTopologique\":\n            result[currentId].parcoursTopologique = xmlSerializer.serializeToString(node);\n            break;\n          default:\n            return;\n        }\n      })\n    }\n  })\n\n  return result;\n}\n\nexport const getNumMarche = (circulation) => {\n    let xmlDom = xmlParser.parseFromString(circulation.etatCirculation, \"application/xml\");\n    return xmlDom.getElementsByTagName(\"numMarcheOrigine\")[0].innerHTML;\n}\n\nexport const withNumMarche = (circulation, numMarche) => {\n  let xmlDom = xmlParser.parseFromString(circulation.etatCirculation, \"application/xml\");\n  xmlDom.getElementsByTagName(\"numMarcheOrigine\")[0].innerHTML = numMarche;\n  return ({\n    ...circulation,\n    etatCirculation: xmlSerializer.serializeToString(xmlDom) \n  })\n}\n\nexport const getCodeTCT = (circulation) => {\n    let xmlDom = xmlParser.parseFromString(circulation.typeGestion, \"application/xml\");\n    return xmlDom.getElementsByTagName(\"tct\")[0].getElementsByTagName(\"libelle\")[0].innerHTML;\n}\n\nexport const withCodeTCT = (circulation, tctId, tctCode) => {\n    let xmlDom = xmlParser.parseFromString(circulation.typeGestion, \"application/xml\");\n    xmlDom.getElementsByTagName(\"tct\")[0].getElementsByTagName(\"id\")[0].innerHTML = tctId;\n    xmlDom.getElementsByTagName(\"tct\")[0].getElementsByTagName(\"code\")[0].innerHTML = tctCode;\n    xmlDom.getElementsByTagName(\"tct\")[0].getElementsByTagName(\"libelle\")[0].innerHTML = tctCode;\n    return ({\n      ...circulation,\n      typeGestion: xmlSerializer.serializeToString(xmlDom) \n    })\n}\nexport const getHeureDepart = (circulation) => {\n    let xmlDom = xmlParser.parseFromString(circulation.etatCirculation, \"application/xml\");\n    return xmlDom.getElementsByTagName(\"dateHeureOrigine\")[0].innerHTML;\n}\n\nexport const withHeureDepart = (circulation, heureDepart) => {\n    let heureToWrite = new Date(heureDepart);\n    let xmlDom = xmlParser.parseFromString(circulation.etatCirculation, \"application/xml\");\n    xmlDom.getElementsByTagName(\"dateHeureOrigine\")[0].innerHTML = heureToWrite.toISOString().slice(0,-5)+\"Z\";\n    return ({\n      ...circulation,\n      etatCirculation: xmlSerializer.serializeToString(xmlDom) \n    })\n}\n\nexport const getDepart = (circulation) => {\n    let xmlDom = xmlParser.parseFromString(circulation.mission, \"application/xml\");\n    return xmlDom.getElementsByTagName(\"etapesMission\")[0]\n        .getElementsByTagName(\"EtapeMission\")[0]\n        .getElementsByTagName(\"pr\")[0].getAttribute(\"id\");\n}\n\nexport const getArrivee = (circulation) => {\n    let xmlDom = xmlParser.parseFromString(circulation.mission, \"application/xml\");\n    const Etapes = xmlDom.getElementsByTagName(\"etapesMission\")[0]\n        .getElementsByTagName(\"EtapeMission\");\n    return Etapes[Etapes.length - 1].getElementsByTagName(\"pr\")[0].getAttribute(\"id\");\n}\n","import React from 'react'\nimport { connect } from 'react-redux'\n\nimport { duplicateCirculation } from '../../app/actions'\nimport { deleteCirculation } from '../../app/actions'\n\nimport Button from 'react-bootstrap/Button'\nimport { Files } from 'react-bootstrap-icons';\nimport { Trash } from 'react-bootstrap-icons';\n\nclass CirculationRowAction extends React.Component {\n\n  render() {\n    return (\n      <div className={this.props.className}>\n        <Button\n          onClick={(event) => {\n            this.props.dispatch(duplicateCirculation(this.props.id));\n            event.stopPropagation();\n          }}\n          variant=\"outline-dark\" size=\"sm\"\n          className=\"mr-1 py-0 btn-xs\" >\n          <Files />\n        </Button>\n        <Button\n          onClick={(event) => {\n            this.props.dispatch(deleteCirculation(this.props.id));\n            event.stopPropagation();\n          }}\n          variant=\"outline-dark\" size=\"sm\"\n          className=\"py-0 btn-xs\" >\n          <Trash />\n        </Button>\n      </div>\n    );\n  }\n\n}\n\nexport default connect()(CirculationRowAction)","import React from 'react'\nimport { connect } from 'react-redux'\nimport { changeNumMarche, stopNumMarcheCellEdition } from '../../app/actions'\n\nimport InputGroup from 'react-bootstrap/InputGroup'\nimport Button from 'react-bootstrap/Button'\nimport FormControl from 'react-bootstrap/FormControl'\nimport { Check } from 'react-bootstrap-icons';\n\nclass NumMarcheCellEditor extends React.Component {\n    constructor(props) {\n        super(props);\n        this.numMarcheEdit = props.numMarche;\n\n        // This binding is necessary to make `this` work in the callback    \n        this.handleValidate = this.handleValidate.bind(this);\n    }\n\n    handleValidate() {\n        if (this.props.numMarche !== this.numMarcheEdit) {\n            this.props.dispatch(\n                changeNumMarche(this.props.id, this.numMarcheEdit));\n        } else {\n            this.props.dispatch(\n                stopNumMarcheCellEdition(this.props.id));\n        }\n    }\n\n    render() {\n        return (\n            <InputGroup className={this.props.className}>\n                <FormControl\n                    defaultValue={this.props.numMarche}\n                    aria-label=\"Numéro de marche\"\n                    onChange={(event) => { this.numMarcheEdit = event.target.value }}\n                    onClick={(event) => { event.stopPropagation() }}\n                    onKeyDown={(event) => { \n                        if (event.key === \"Escape\") {\n                        this.props.dispatch(stopNumMarcheCellEdition(this.props.id));\n                    }}}\n                    onKeyPress={(event) => {\n                        if (event.key === \"Enter\") {\n                            this.handleValidate();\n                    }}}\n                />\n                <InputGroup.Append>\n                    <Button variant=\"success\"\n                        onClick={(event) => {\n                            this.handleValidate();\n                            event.stopPropagation();\n                        }}>\n                        <Check />\n                    </Button >\n                </InputGroup.Append>\n            </InputGroup>\n        );\n    }\n\n}\n\nexport default connect()(NumMarcheCellEditor)\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { changeHeureDepart, stopHeureDepartCellEdition } from '../../app/actions'\n\nimport InputGroup from 'react-bootstrap/InputGroup'\nimport Button from 'react-bootstrap/Button'\nimport FormControl from 'react-bootstrap/FormControl'\nimport { Check } from 'react-bootstrap-icons';\n\nclass HeureDepartCellEditor extends React.Component {\n    constructor(props) {\n        super(props);\n        let parsedDate = new Date(props.heureDepart);\n        this.dateEdited = parsedDate.toISOString().slice(0, 10);\n        this.timeEdited = parsedDate.toLocaleTimeString('fr-FR');\n\n        // This binding is necessary to make `this` work in the callback    \n        this.handleValidate = this.handleValidate.bind(this);\n    }\n\n    handleValidate() {\n        let newHeureDepart = new Date(\n            this.dateEdited + \" \" + this.timeEdited);\n        if (newHeureDepart !== this.props.heureDepart) {\n            this.props.dispatch(changeHeureDepart(\n                this.props.id, newHeureDepart.toISOString()))\n\n        } else {\n            this.props.dispatch(stopHeureDepartCellEdition(this.props.id));\n        }\n    }\n\n    render() {\n        return (\n            <div className={this.props.className}>\n                <InputGroup>\n                    <FormControl\n                        defaultValue={this.dateEdited}\n                        aria-label=\"Date de départ\"\n                        type=\"date\"\n                        onChange={(event) => {\n                            this.dateEdited = event.target.value\n                        }}\n                        onClick={(event) => { event.stopPropagation() }}\n                        onKeyDown={(event) => {\n                            if (event.key === \"Escape\") {\n                                this.props.dispatch(stopHeureDepartCellEdition(this.props.id));\n                            }\n                        }}\n                        onKeyPress={(event) => {\n                            if (event.key === \"Enter\") {\n                                this.handleValidate();\n                            }\n                        }}\n                    />\n                    <FormControl\n                        defaultValue={this.timeEdited}\n                        aria-label=\"Heure de départ\"\n                        type=\"time\"\n                        onChange={(event) => { this.timeEdited = event.target.value }}\n                        onClick={(event) => { event.stopPropagation() }}\n                        onKeyDown={(event) => {\n                            if (event.key === \"Escape\") {\n                                this.props.dispatch(stopHeureDepartCellEdition(this.props.id));\n                            }\n                        }}\n                        onKeyPress={(event) => {\n                            if (event.key === \"Enter\") {\n                                this.handleValidate();\n                            }\n                        }}\n                    />\n                    <InputGroup.Append>\n                        <Button variant=\"success\"\n                            onClick={(event) => {\n                                this.handleValidate();\n                                event.stopPropagation();\n                            }}>\n                            <Check />\n                        </Button >\n                    </InputGroup.Append>\n                </InputGroup>\n            </div>\n        );\n    }\n\n}\n\nexport default connect()(HeureDepartCellEditor)\n","const tctCodeIdMap = {\n    \"FCB\": \"77e8acc5-2d5c-11e6-8bb5-01e08e116de3\",\n    \"FCC\": \"7c996166-2d5c-11e6-a2d2-01e08e116de3\",\n    \"FEC\": \"76982e97-2d5c-11e6-8203-01e08e116de3\",\n    \"FER\": \"9009a7b6-2d5c-11e6-af37-01e08e116de3\",\n    \"FLC\": \"9f1e1dc1-2d5c-11e6-9942-01e08e116de3\",\n    \"FMB\": \"a87a1b74-2d5c-11e6-959d-01e08e116de3\",\n    \"FRR\": \"8a559299-2d5c-11e6-820b-01e08e116de3\",\n    \"FVC\": \"0460da1f-2d5d-11e6-b2be-01e08e116de3\",\n    \"HYD\": \"013eacaf-2d5e-11e6-a2b9-01e08e116de3\",\n    \"HZF\": \"807a7227-2d5c-11e6-b4aa-01e08e116de3\",\n    \"HZI\": \"dbee4698-2d5d-11e6-83ca-01e08e116de3\",\n    \"HZN\": \"fcaf8b51-2d5c-11e6-b540-01e08e116de3\",\n    \"IAT\": \"844416b7-2d7b-11e6-a021-01148e116de3\",\n    \"IEA\": \"ad77bd92-2d78-11e6-b578-01148e116de3\",\n    \"IVO\": \"8ddbe0fe-2d5c-11e6-90ac-01e08e116de3\",\n    \"JAB\": \"8492a97e-2d5d-11e6-93b3-01e08e116de3\",\n    \"JAC\": \"ce7c9a7d-2d5d-11e6-8f95-01e08e116de3\",\n    \"LBB\": \"ad4f8172-2d78-11e6-b384-01148e116de3\",\n    \"LBC\": \"76ceb1ad-2d5c-11e6-8409-01e08e116de3\",\n    \"LBG\": \"9ed9e77a-2d5c-11e6-95a2-01e08e116de3\",\n    \"LBL\": \"5b3d758f-2d5c-11e6-89c5-01e08e116de3\",\n    \"LCA\": \"3a4773c1-2d5d-11e6-9f32-01e08e116de3\",\n    \"LVD\": \"5ab0ab1c-2d5c-11e6-83e7-01e08e116de3\",\n    \"LVH\": \"5a58bbca-2d5c-11e6-802f-01e08e116de3\",\n    \"RBD\": \"fe9e3ec5-2d5b-11e6-892f-01e08e116de3\",\n    \"RBK\": \"6d957615-2d5c-11e6-8c5c-01e08e116de3\",\n    \"RBS\": \"00b5e5f7-2d5c-11e6-90cb-01e08e116de3\",\n    \"RCD\": \"6e53e9ee-2d5c-11e6-95fc-01e08e116de3\",\n    \"RCK\": \"6dbb8ee8-2d5c-11e6-8dfd-01e08e116de3\",\n    \"SCD\": \"dd4454d2-2d5c-11e6-9b0a-01e08e116de3\",\n    \"SCK\": \"8872471c-2d5c-11e6-ac4c-01e08e116de3\"\n}\n\nexport const getCodesTctArray = () => {\n    return Object.keys(tctCodeIdMap);\n}\n\nexport const getCodeTctId = (tctCode) => {\n     return tctCodeIdMap[tctCode];\n}","import React from 'react'\nimport { connect } from 'react-redux'\nimport { getCodesTctArray, getCodeTctId } from '../../app/tools/CodeTctTools'\nimport { changeCodeTct, stopCodeTctCellEdition } from '../../app/actions'\n\nimport InputGroup from 'react-bootstrap/InputGroup'\nimport Button from 'react-bootstrap/Button'\nimport FormControl from 'react-bootstrap/FormControl'\nimport { Check } from 'react-bootstrap-icons';\n\nclass CodeTctCellEditor extends React.Component {\n    constructor(props) {\n        super(props);\n        this.codeTctEdit = props.codeTCT;\n\n        // This binding is necessary to make `this` work in the callback    \n        this.handleValidate = this.handleValidate.bind(this);\n    }\n\n    handleValidate() {\n        if (this.props.codeTCT !== this.codeTctEdit) {\n            this.props.dispatch(\n                changeCodeTct(\n                    this.props.id, \n                    getCodeTctId(this.codeTctEdit), \n                    this.codeTctEdit));\n        } else {\n            this.props.dispatch(\n                stopCodeTctCellEdition(this.props.id));\n        }\n    }\n\n    render() {\n        return (\n            <InputGroup className={this.props.className}>\n                <FormControl as=\"select\"\n                    defaultValue={this.props.codeTCT}\n                    aria-label=\"Code TCT\"\n                    onChange={(event) => { this.codeTctEdit = event.target.value }}\n                    onClick={(event) => { event.stopPropagation() }}\n                    onKeyDown={(event) => {\n                        if (event.key === \"Escape\") {\n                            this.props.dispatch(stopCodeTctCellEdition(this.props.id));\n                        }\n                    }}\n                    onKeyPress={(event) => {\n                        if (event.key === \"Enter\") {\n                            this.handleValidate();\n                        }\n                }}>\n                    {getCodesTctArray().map(codeTct => (\n                        <option>{codeTct}</option>\n                    ))}\n                </FormControl>\n                <InputGroup.Append>\n                    <Button variant=\"success\"\n                        onClick={(event) => {\n                            this.handleValidate();\n                            event.stopPropagation();\n                        }}>\n                        <Check />\n                    </Button >\n                </InputGroup.Append>\n            </InputGroup>\n        );\n    }\n\n}\n\nexport default connect()(CodeTctCellEditor)\n","import React from 'react';\nimport { connect } from 'react-redux'\nimport { clickOnCirculationRow, numMarcheCellClicked, heureDepartCellClicked, codeTctCellClicked } from '../../app/actions'\nimport { getCodeTCT, getHeureDepart, getNumMarche } from '../../app/tools/CirculationXmlTools'\n\nimport CirculationRowActions from './CirculationRowActions'\nimport NumMarcheCellEditor from './NumMarcheCellEditor'\nimport HeureDepartCellEditor from './HeureDepartCellEditor'\nimport CodeTctCellEditor from './CodeTctCellEditor'\n\nclass CirculationRow extends React.Component {\n    render() {\n        let heureDepart = new Date(this.props.heureDepart);\n        return (\n            <tr className={this.props.selected ? \"table-secondary\" : \"\"}\n                onClick={() => { this.props.dispatch(clickOnCirculationRow(this.props.id)) }} >\n                <td>{this.props.id}</td>\n                <td>{\n                    this.props.numMarcheEdited\n                        ? <NumMarcheCellEditor\n                            id={this.props.id}\n                            numMarche={this.props.numMarche} />\n                        : <span onClick={(event) => {\n                            this.props.dispatch(numMarcheCellClicked(this.props.id));\n                            event.stopPropagation();\n                        }}>\n                            { this.props.numMarche }\n                        </span>\n                }</td>\n                <td>{\n                    this.props.codeTctEdited\n                        ? <CodeTctCellEditor\n                            id={this.props.id}\n                            codeTCT={this.props.codeTCT} />\n                        : <span onClick={(event) => {\n                            this.props.dispatch(codeTctCellClicked(this.props.id));\n                            event.stopPropagation();\n                        }}>\n                            { this.props.codeTCT }\n                        </span>\n                }</td>\n                <td>{\n                    this.props.heureDepartEdited\n                        ? <HeureDepartCellEditor\n                            id={this.props.id}\n                            heureDepart={this.props.heureDepart} />\n                        : <span onClick={(event) => {\n                            this.props.dispatch(heureDepartCellClicked(this.props.id));\n                            event.stopPropagation();\n                        }}>\n                            {heureDepart.toLocaleDateString('fr-FR')} - {heureDepart.toLocaleTimeString('fr-FR')}\n                        </span>\n                }</td>\n                <td><CirculationRowActions \n                id={this.props.id} className=\"float-right\" /></td>\n            </tr>\n        );\n    }\n}\n\nconst mapStateToProps = (state, ownProps) => {\n    let circulation = state.circulationsById[ownProps.id];\n    return {\n        numMarche: getNumMarche(circulation),\n        codeTCT: getCodeTCT(circulation),\n        heureDepart: getHeureDepart(circulation),\n        selected: circulation.selected,\n        numMarcheEdited: circulation.numMarcheEdited,\n        heureDepartEdited: circulation.heureDepartEdited,\n        codeTctEdited: circulation.codeTctEdited\n    }\n}\n\n\nexport default connect(mapStateToProps)(CirculationRow);","import React from 'react';\nimport { connect } from 'react-redux'\n\nimport Table from 'react-bootstrap/Table';\nimport CirculationRow from './circulationTableRow/CirculationRow';\n\nconst CirculationsTable = ({ circulationsIdList }) => (\n    <Table hover>\n        <thead>\n            <tr>\n                <th className=\"w-30\">Id</th>\n                <th className=\"w-20\">Num. Marche</th>\n                <th className=\"w-15\">Code TCT</th>\n                <th className=\"w-25\">Date et heure de départ</th>\n                <th className=\"w-10\"></th>\n            </tr>\n        </thead>\n        <tbody>\n            {circulationsIdList.map(circulationId => (\n                <CirculationRow  key={circulationId}\n                id={circulationId} />\n            ))}\n        </tbody>\n    </Table >\n)\n\nconst mapStateToProps = state => {\n    return {\n        circulationsIdList: Object.keys(state.circulationsById)\n    }\n}\n\nexport default connect(mapStateToProps)(CirculationsTable);","import React from 'react'\nimport { connect } from 'react-redux'\nimport { fanHeureDepartButtonClicked, fanHeureDepartClosed, fanHeureDepartValidated } from '../../app/actions'\nimport { getHeureDepart } from '../../app/tools/CirculationXmlTools'\n\nimport Button from 'react-bootstrap/Button'\nimport Modal from 'react-bootstrap/Modal'\nimport FormControl from 'react-bootstrap/FormControl'\nimport Form from 'react-bootstrap/Form'\nimport InputGroup from 'react-bootstrap/InputGroup'\n\nclass FanHeureDepartModal extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.dateEdited = this.props.startDate.toISOString().slice(0, 10);\n        this.timeEdited = this.props.startDate.toLocaleTimeString('fr-FR');\n\n        this.increment = 600; // default: 10 minutes increment\n\n        // These bindings are necessary to make `this` work in the callback    \n        this.handleShow = this.handleShow.bind(this);\n        this.handleClose = this.handleClose.bind(this);\n        this.handleValidate = this.handleValidate.bind(this);\n    }\n\n    handleShow(event) {\n        this.props.dispatch(fanHeureDepartButtonClicked());\n        event.stopPropagation();\n    }\n\n    handleClose(event) {\n        this.props.dispatch(fanHeureDepartClosed());\n        if (event) {\n            event.stopPropagation();\n        }\n    }\n\n    handleValidate(event) {\n        let newHeureDepart = new Date(\n            this.dateEdited + \" \" + this.timeEdited);\n        this.props.dispatch(\n            fanHeureDepartValidated(newHeureDepart.toISOString(), this.increment));\n        event.stopPropagation();\n    }\n\n    render() {\n        return (\n            <Modal show={this.props.shown} onHide={this.handleClose}\n                onClick={(event) => { event.stopPropagation(); }}>\n                <Modal.Header closeButton>\n                    <Modal.Title>Ventilatation des heures de départ</Modal.Title>\n                </Modal.Header>\n                <Modal.Body>\n                    <Form.Group>\n                        <Form.Label>Heure de départ</Form.Label>\n\n                        <InputGroup>\n                            <FormControl\n                                defaultValue={this.dateEdited}\n                                aria-label=\"Date de départ\"\n                                type=\"date\"\n                                onChange={(event) => {\n                                    this.dateEdited = event.target.value;\n                                }}\n                            />\n                            <FormControl\n                                defaultValue={this.timeEdited}\n                                aria-label=\"Heure de départ\"\n                                type=\"time\"\n                                onChange={(event) => {\n                                    this.timeEdited = event.target.value;\n                                }}\n                            />\n                        </InputGroup>\n                    </Form.Group>\n                    <Form.Group>\n                        <Form.Label>Incrément</Form.Label>\n                        <Form.Control\n                            defaultValue={\"00:10:00\"}\n                            type=\"time\" step=\"1\" placeholder=\"Incrément\"\n                            onChange={(event) => {\n                                var secondsInc =\n                                    parseInt(event.target.value.slice(0, 2) * 3600, 10);\n                                secondsInc += parseInt(event.target.value.slice(3, 5) * 60, 10);\n                                var secondsPart = parseInt(event.target.value.slice(6, 8), 10);\n                                secondsInc += isNaN(secondsPart) ? 0 : secondsPart;\n                                this.increment = secondsInc;\n                            }} />\n                    </Form.Group>\n                </Modal.Body>\n                <Modal.Footer>\n                    <Button variant=\"danger\" onClick={this.handleClose}>\n                        Annuler\n                    </Button>\n                    <Button variant=\"success\" onClick={this.handleValidate}>\n                        Valider\n                    </Button>\n                </Modal.Footer>\n            </Modal>\n        );\n    }\n\n}\n\nconst mapState = (state) => {\n    let selectedId = Object.keys(state.circulationsById).find(\n        (id) => { return state.circulationsById[id].selected });\n    return ({\n        shown: state.toolbar.fanHeureDepartModal.shown,\n        startDate:\n            (selectedId === undefined)\n                ? new Date(Date.now())\n                : new Date(getHeureDepart(state.circulationsById[selectedId]))\n    });\n}\n\nexport default connect(mapState)(FanHeureDepartModal)","import React from 'react'\nimport { connect } from 'react-redux'\nimport { fanNumMarcheButtonClicked, fanNumMarcheClosed, fanNumMarcheValidated } from '../../app/actions'\n\nimport Button from 'react-bootstrap/Button'\nimport Modal from 'react-bootstrap/Modal'\nimport FormControl from 'react-bootstrap/FormControl'\nimport Form from 'react-bootstrap/Form'\nimport { getNumMarche } from '../../app/tools/CirculationXmlTools'\n\nclass FanNumMarcheModal extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.numMarcheEdited = this.props.selectedNumMarche;\n        this.increment = 2;\n\n        // These bindings are necessary to make `this` work in the callback    \n        this.handleShow = this.handleShow.bind(this);\n        this.handleClose = this.handleClose.bind(this);\n        this.handleValidate = this.handleValidate.bind(this);\n    }\n\n    handleShow(event) {\n        this.props.dispatch(fanNumMarcheButtonClicked());\n        event.stopPropagation();\n    }\n\n    handleClose(event) {\n        this.props.dispatch(fanNumMarcheClosed());\n        if (event) {\n            event.stopPropagation();\n        }\n    }\n\n    handleValidate(event) {\n        this.props.dispatch(\n            fanNumMarcheValidated(this.numMarcheEdited, this.increment));\n        event.stopPropagation();\n    }\n\n    render() {\n        return (\n            <Modal show={this.props.shown} onHide={this.handleClose}\n                onClick={(event) => { event.stopPropagation(); }}>\n                <Modal.Header closeButton>\n                    <Modal.Title>Ventilatation des numéros de marche</Modal.Title>\n                </Modal.Header>\n                <Modal.Body>\n                    <Form.Group>\n                        <Form.Label>Numéro de marche intial</Form.Label>\n                        <FormControl\n                            defaultValue={this.numMarcheEdited}\n                            aria-label=\"Numéro de marche\"\n                            type=\"number\"\n                            onChange={(event) => {\n                                this.numMarcheEdited = parseInt(event.target.value, 10);\n                            }}\n                        />\n                    </Form.Group>\n                    <Form.Group>\n                        <Form.Label>Incrément</Form.Label>\n                        <Form.Control\n                            defaultValue={this.increment}\n                            type=\"number\" placeholder=\"Incrément\"\n                            onChange={(event) => {\n                                this.increment = parseInt(event.target.value, 10);\n                            }\n                            } />\n                    </Form.Group>\n                </Modal.Body>\n                <Modal.Footer>\n                    <Button variant=\"danger\" onClick={this.handleClose}>\n                        Annuler\n                    </Button>\n                    <Button variant=\"success\" onClick={this.handleValidate}>\n                        Valider\n                    </Button>\n                </Modal.Footer>\n            </Modal>\n        );\n    }\n\n}\n\nconst mapState = (state) => {\n    let selectedId = Object.keys(state.circulationsById).find(\n        (id) => { return state.circulationsById[id].selected });\n    return ({\n        shown: state.toolbar.fanNumMarcheModal.shown,\n        selectedNumMarche:\n            (selectedId === undefined)\n                ? 0\n                : parseInt(getNumMarche(state.circulationsById[selectedId]))\n    });\n}\n\nexport default connect(mapState)(FanNumMarcheModal)","import React from 'react'\nimport { connect } from 'react-redux'\nimport { shiftDateButtonClicked, shiftDateClosed, shiftDateValidated } from '../../app/actions'\nimport { getHeureDepart } from '../../app/tools/CirculationXmlTools'\n\nimport Button from 'react-bootstrap/Button'\nimport Modal from 'react-bootstrap/Modal'\nimport FormControl from 'react-bootstrap/FormControl'\nimport Form from 'react-bootstrap/Form'\nimport InputGroup from 'react-bootstrap/InputGroup'\n\nclass ShiftDateModal extends React.Component {\n    constructor(props) {\n        super(props);\n\n        let parsedDate = new Date(Date.now());\n        this.startDay = this.props.startDate.toISOString().slice(0, 10);\n        this.startTime = this.props.startDate.toLocaleTimeString('fr-FR');\n        this.goalDay = parsedDate.toISOString().slice(0, 10);\n        this.goalTime = this.props.startDate.toLocaleTimeString('fr-FR');\n\n        // These bindings are necessary to make `this` work in the callback    \n        this.handleShow = this.handleShow.bind(this);\n        this.handleClose = this.handleClose.bind(this);\n        this.handleValidate = this.handleValidate.bind(this);\n    }\n\n    handleShow(event) {\n        this.props.dispatch(shiftDateButtonClicked());\n        event.stopPropagation();\n    }\n\n    handleClose(event) {\n        this.props.dispatch(shiftDateClosed());\n        if (event) {\n            event.stopPropagation();\n        }\n    }\n\n    handleValidate(event) {\n        let start = new Date(this.startDay + \" \" + this.startTime);\n        let goal = new Date(this.goalDay + \" \" + this.goalTime);\n        this.props.dispatch(\n            shiftDateValidated(start.toISOString(), goal.toISOString())\n        );\n        event.stopPropagation();\n    }\n\n    render() {\n        return (\n            <Modal show={this.props.shown} onHide={this.handleClose}\n                onClick={(event) => { event.stopPropagation(); }}>\n                <Modal.Header closeButton>\n                    <Modal.Title>Décalage des heures de départ</Modal.Title>\n                </Modal.Header>\n                <Modal.Body>\n                    <Form.Group>\n                        <Form.Label>De la date</Form.Label>\n                        <InputGroup>\n                            <FormControl\n                                defaultValue={this.startDay}\n                                aria-label=\"De la date (jour)\"\n                                type=\"date\"\n                                onChange={(event) => {\n                                    this.startDay = event.target.value;\n                                }}\n                            />\n                            <FormControl\n                                defaultValue={this.startTime}\n                                aria-label=\"De la date (heure)\"\n                                type=\"time\"\n                                onChange={(event) => {\n                                    this.startTime = event.target.value;\n                                }}\n                            />\n                        </InputGroup>\n                    </Form.Group>\n\n                    <Form.Group>\n                        <Form.Label>Vers la date</Form.Label>\n                        <InputGroup>\n                            <FormControl\n                                defaultValue={this.goalDay}\n                                aria-label=\"Vers la date (jour)\"\n                                type=\"date\"\n                                onChange={(event) => {\n                                    this.goalDay = event.target.value;\n                                }}\n                            />\n                            <FormControl\n                                defaultValue={this.goalTime}\n                                aria-label=\"Vers la date (heure)\"\n                                type=\"time\"\n                                onChange={(event) => {\n                                    this.goalTime = event.target.value;\n                                }}\n                            />\n                        </InputGroup>\n                    </Form.Group>\n                </Modal.Body>\n                <Modal.Footer>\n                    <Button variant=\"danger\" onClick={this.handleClose}>\n                        Annuler\n                    </Button>\n                    <Button variant=\"success\" onClick={this.handleValidate}>\n                        Valider\n                    </Button>\n                </Modal.Footer>\n            </Modal>\n        );\n    }\n\n}\n\nconst mapState = (state) => {\n    let selectedId = Object.keys(state.circulationsById).find(\n        (id) => { return state.circulationsById[id].selected });\n    return ({\n        shown: state.toolbar.shiftDateModal.shown,\n        startDate:\n            (selectedId === undefined)\n                ? new Date(Date.now())\n                : new Date(getHeureDepart(state.circulationsById[selectedId]))\n    });\n}\n\nexport default connect(mapState)(ShiftDateModal)","import React from 'react'\nimport { connect } from 'react-redux'\nimport FanHeureDepartModal from './FanHeureDepartModal'\nimport FanNumMarcheModal from './FanNumMarcheModal';\nimport ShiftDateModal from './ShiftDateModal';\n\nclass Modals extends React.Component {\n\n    render() {\n        return (\n            <>\n                {this.props.fanHeureDepartShown ? <FanHeureDepartModal /> : <></>}\n                {this.props.fanNumMarcheShown ? <FanNumMarcheModal /> : <></>}\n                {this.props.shiftDateShown ? <ShiftDateModal /> : <></>}\n            </>\n        );\n    }\n\n}\n\nconst mapState = (state) => {\n    return ({\n        fanHeureDepartShown: state.toolbar.fanHeureDepartModal.shown,\n        fanNumMarcheShown: state.toolbar.fanNumMarcheModal.shown,\n        shiftDateShown: state.toolbar.shiftDateModal.shown\n    });\n}\n\nexport default connect(mapState)(Modals)","import React from 'react';\n\nimport './App.css';\n\nimport Container from 'react-bootstrap/Container';\nimport Toolbar from './components/Toolbar'\nimport CirculationsTable from './containers/CirculationsTable';\nimport Modals from './containers/modals/Modals';\n\nconst App = () => (\n  <Container fluid style={{ paddingLeft: 0, paddingRight: 0 }}>\n    <Toolbar />\n    <CirculationsTable />\n    <Modals />\n  </Container>\n);\n\nexport default App;\n","import { produce } from 'immer'\nimport { v1 as uuidv1 } from 'uuid';\nimport { xmlTextToCirculationsObject, getHeureDepart, withNumMarche, withHeureDepart, withCodeTCT } from '../tools/CirculationXmlTools'\n\nconst defaultCirculationObject = {\n  selected: false,\n  extended: false,\n  numMarcheEdited: false,\n  heureDepartEdited: false,\n  codeTctEdited: false\n}\n\nconst circulationsById = (state = {}, action) => {\n  switch (action.type) {\n    case 'XML_FILE_SUBMITED':\n      let circulationsToAdd = xmlTextToCirculationsObject(action.xmlText, defaultCirculationObject);\n      return ({\n        ...state,\n        ...circulationsToAdd\n      });\n    case 'SELECT_ALL':\n      return produce(state, draftState => {\n        Object.keys(draftState).forEach((id => { draftState[id].selected = true; }));\n      });\n    case 'UNSELECT_ALL':\n      return produce(state, draftState => {\n        Object.keys(draftState).forEach((id => { draftState[id].selected = false; }));\n      });\n    case 'FLIP_SELECT_ALL':\n      return produce(state, draftState => {\n        Object.keys(draftState).forEach((id => {\n          draftState[id].selected = !(draftState[id].selected);\n        }));\n      });\n    case 'CIRCULATION_CHANGED':\n      return produce(state, draftState => {\n        draftState[action.id] = {\n          ...draftState[action.id],\n          ...action.circulation\n        };\n      })\n    case 'CIRCULATION_ROW_CLICKED_ON':\n      return produce(state, draftState => {\n        if (draftState[action.id] != null) {\n          draftState[action.id].selected = !(draftState[action.id].selected);\n        }\n      });\n    case 'CIRCULATION_DELETED':\n      return omit(action.id, state);\n    case 'DELETE_SELECTED_BUTTON_PRESSED':\n      return filterObject(state, (circulation) => { return !circulation.selected; });\n    case 'CIRCULATION_DUPLICATED':\n      return Object.keys(state).reduce((result, id) => {\n        if (id === action.id) {\n          let newId = uuidv1();\n          return ({\n            ...result,\n            [id]: state[id],\n            [newId]: {\n              ...state[id],\n              id: newId,\n              selected: false\n            }\n          })\n        } else {\n          return ({ ...result, [id]: state[id] })\n        }\n      }, {});\n    case 'DUPLICATE_SELECTED_BUTTON_PRESSED':\n      return duplicateSelectedCirculations(state);\n    case 'NUM_MARCHE_CELL_CLICKED':\n      return produce(state, draftState => { draftState[action.id].numMarcheEdited = true; });\n    case 'STOP_NUM_MARCHE_CELL_EDITION':\n      return produce(state, draftState => { draftState[action.id].numMarcheEdited = false; });\n    case 'CIRCULATION_NUM_MARCHE_CHANGED':\n      return produce(state, draftState => {\n        draftState[action.id] = withNumMarche(draftState[action.id], action.numMarche);\n        draftState[action.id].numMarcheEdited = false;\n      });\n    case 'HEURE_DEPART_CELL_CLICKED':\n      return produce(state, draftState => { draftState[action.id].heureDepartEdited = true; });\n    case 'STOP_HEURE_DEPART_CELL_EDITION':\n      return produce(state, draftState => { draftState[action.id].heureDepartEdited = false; });\n    case 'CIRCULATION_HEURE_DEPART_CHANGED':\n      return produce(state, draftState => {\n        draftState[action.id] = withHeureDepart(draftState[action.id], action.heureDepart);\n        draftState[action.id].heureDepartEdited = false;\n      });\n    case 'TCT_CELL_CLICKED':\n      return produce(state, draftState => { draftState[action.id].codeTctEdited = true; });\n    case 'STOP_TCT_CELL_EDITION':\n      return produce(state, draftState => { draftState[action.id].codeTctEdited = false; });\n    case 'CIRCULATION_TCT_CHANGED':\n      return produce(state, draftState => {\n        draftState[action.id] = withCodeTCT(draftState[action.id], action.tctId, action.tctCode);\n        draftState[action.id].codeTctEdited = false;\n      });\n    case 'FAN_HEURE_DEPART_VALIDATED':\n      return fanHeureDepart(state, action.start, action.secondsIncrement);\n    case 'FAN_NUM_MARCHE_VALIDATED':\n      return fanNumMarche(state, action.start, action.increment);\n    case 'SHIFT_DATE_VALIDATED':\n      return shiftDate(state, action.start, action.goal);\n    default:\n      return state\n  }\n}\n\nconst omit = (keyToOmit, { [keyToOmit]: _, ...omittedPropObj } = {}) => omittedPropObj;\n\nconst filterObject = (object, filterFunction) => {\n  let filtered = {};\n  Object.keys(object).forEach((key) => {\n    if (filterFunction(object[key])) {\n      filtered[key] = object[key];\n    }\n  })\n  return filtered;\n}\n\nconst duplicateSelectedCirculations = (state) => {\n  return Object.keys(state).reduce((result, id) => {\n    if (state[id].selected) {\n      let newId = uuidv1();\n      return ({\n        ...result,\n        [id]: state[id],\n        [newId]: {\n          ...state[id],\n          id: newId,\n          selected: false\n        }\n      })\n    } else {\n      return ({ ...result, [id]: state[id] })\n    }\n  }, {});\n}\n\nconst fanHeureDepart = (state, start, secondsIncrement) => {\n  var currentDate = new Date(start);\n  return produce(state, draftState => {\n    Object.keys(draftState).forEach((id) => {\n      if (draftState[id].selected) {\n        draftState[id] = withHeureDepart(draftState[id], currentDate);\n        currentDate.setSeconds(currentDate.getSeconds() + secondsIncrement);\n      }\n    });\n  });\n}\n\nconst fanNumMarche = (state, start, increment) => {\n  var currentId = start;\n  return produce(state, draftState => {\n    Object.keys(draftState).forEach((id) => {\n      if (draftState[id].selected) {\n        draftState[id] = withNumMarche(draftState[id], currentId);\n        currentId += increment;\n      }\n    })\n  });\n}\n\nconst shiftDate = (state, start, goal) => {\n  const startDate = new Date(start);\n  const goalDate = new Date(goal);\n  const delta = goalDate - startDate;\n\n  return produce(state, draftState => {\n    Object.keys(draftState).forEach((id) => {\n      const origDate = new Date(getHeureDepart(draftState[id]));\n      draftState[id] = withHeureDepart(draftState[id], (new Date(origDate.getTime() + delta)));\n    });\n  });\n}\n\nexport default circulationsById","import { produce } from 'immer'\n\nlet defaultState = {\n    loadingInfo: {\n        isLoading: false,\n        toLoadCount: 0,\n        loadedCount: 0\n    },\n    shiftDateModal: {\n        shown: false,\n    },\n    fanHeureDepartModal: {\n        shown: false,\n    },\n    fanNumMarcheModal: {\n        shown: false,\n    }\n}\n\nconst toolbar = (state = defaultState, action) => {\n    switch (action.type) {\n        case 'FAN_HEURE_DEPART_BUTTON_CLICKED':\n            return produce(state, draftState => { draftState.fanHeureDepartModal.shown = true; });\n        case 'FAN_HEURE_DEPART_VALIDATED':\n        case 'FAN_HEURE_DEPART_CLOSED':\n            return produce(state, draftState => { draftState.fanHeureDepartModal.shown = false; });\n        case 'FAN_NUM_MARCHE_BUTTON_CLICKED':\n            return produce(state, draftState => { draftState.fanNumMarcheModal.shown = true; });\n        case 'FAN_NUM_MARCHE_VALIDATED':\n        case 'FAN_NUM_MARCHE_CLOSED':\n            return produce(state, draftState => { draftState.fanNumMarcheModal.shown = false; });\n        case 'SHIFT_DATE_BUTTON_CLICKED':\n            return produce(state, draftState => { draftState.shiftDateModal.shown = true; });\n        case 'SHIFT_DATE_VALIDATED':\n        case 'SHIFT_DATE_CLOSED':\n            return produce(state, draftState => { draftState.shiftDateModal.shown = false; });\n        default:\n            return state\n    }\n}\n\nexport default toolbar","import { combineReducers } from 'redux'\nimport circulationsById from './circulationsById'\nimport toolbar from './toolbar'\n\nexport default combineReducers({\n    toolbar,\n    circulationsById\n})","import { configureStore } from '@reduxjs/toolkit'\n\nimport reducer from './reducers/index'\n\nexport default configureStore({\n  reducer\n});","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nimport store from './app/store';\nimport { Provider } from 'react-redux';\n\n// Importing the Bootstrap CSS\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nReactDOM.render(\n    <React.StrictMode>\n      <Provider store={store}>\n        <App />\n      </Provider>\n    </React.StrictMode>,\n    document.getElementById('root')\n  );\n  "],"sourceRoot":""}