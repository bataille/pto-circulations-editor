{"version":3,"sources":["app/enum.js","app/actions.js","mainComponents/toolbar/SelectionButtonsGroup.js","mainComponents/toolbar/LoadButton.js","app/tools/CirculationXmlTools.js","app/tools/SaveFile.js","mainComponents/toolbar/SaveButton.js","mainComponents/toolbar/DeleteButton.js","mainComponents/toolbar/DuplicateButton.js","mainComponents/toolbar/ShiftDateButton.js","circulationsComponents/toolbar/FanHeureDepartButton.js","circulationsComponents/toolbar/FanNumMarcheButton.js","circulationsComponents/toolbar/FanActionsDropdown.js","circulationsComponents/toolbar/CirculationsSpecificToolbar.js","mainComponents/toolbar/ObjectSpecificToolbar.js","mainComponents/toolbar/CurrentlyEditedLabel.js","mainComponents/toolbar/Toolbar.js","mainComponents/table/RowActions.js","circulationsComponents/tableRow/NumMarcheCellEditor.js","circulationsComponents/tableRow/HeureDepartCellEditor.js","circulationsComponents/tableRow/HeureArriveeCellEditor.js","app/tools/CodeTctTools.js","circulationsComponents/tableRow/CodeTctCellEditor.js","circulationsComponents/tableRow/CirculationRow.js","circulationsComponents/CirculationsTable.js","ptxComponents/tableRow/PtxRow.js","ptxComponents/PtxsTable.js","mainComponents/table/MainTable.js","mainComponents/modals/ShiftDateModal.js","circulationsComponents/modals/FanHeureDepartModal.js","circulationsComponents/modals/FanNumMarcheModal.js","circulationsComponents/modals/CirculationsSpecificModals.js","mainComponents/modals/Modals.js","App.js","app/reducers/circulationsById.js","app/tools/PtxXmlTools.js","app/reducers/ptxsById.js","app/reducers/main.js","app/reducers/index.js","app/store.js","index.js"],"names":["editedObject","clickOnRow","id","type","stopNumMarcheCellEdition","stopHeureDepartCellEdition","changeHeureDepart","heureDepart","stopHeureArriveeCellEdition","stopCodeTctCellEdition","SelectionButtonsGroup","ButtonGroup","className","this","props","OverlayTrigger","placement","delay","show","hide","overlay","Tooltip","Button","variant","disabled","onClick","dispatch","React","Component","connect","LoadButton","event","stopPropagation","preventDefault","Promise","all","Array","from","target","files","map","file","text","then","textArray","forEach","textFile","xmlText","size","isLoading","upload","click","ref","style","display","onChange","onChangeFile","bind","multiple","buttonText","state","main","loadingInfo","xmlParser","DOMParser","xmlSerializer","XMLSerializer","xmlTextToCirculationsObject","defaultCirculationObject","result","circulations","parseFromString","getElementsByTagName","circulation","currentId","hasChildNodes","childNodes","node","tagName","innerHTML","dateCreation","demandeur","localisation","parcours","serializeToString","mission","profilHoraire","profilDeCirculation","evenementsCirculation","etatCirculation","typeConvoi","typeGestion","renvoisStandards","parcoursTopologique","getNumMarche","withNumMarche","numMarche","xmlDom","getCodeTCT","withCodeTCT","tctId","tctCode","getHeureDepart","withHeureDepart","heureToWrite","Date","toISOString","slice","getDureeTrajet","detailHoraire","length","config","require","dateStringForFileName","now","getFullYear","String","getMonth","padStart","getDate","getHours","getMinutes","SaveButton","fileName","handleValidate","fileType","circulationsById","Object","keys","circulationsText","getCirculationXmlText","concatAllCirculationsAsText","content","header","xml_header","footer","xml_footer","element","document","createElement","setAttribute","encodeURIComponent","body","appendChild","removeChild","saveAsXmlFile","trigger","rootClose","Popover","Title","as","Content","InputGroup","width","FormControl","defaultValue","aria-label","value","Append","getCurrentFileName","DeleteButton","DuplicateButton","ShiftDateButton","handleShow","FanHeureDepartButton","DropdownItem","FanNumMarcheButton","FanActionsDropdown","DropdownButton","title","CirculationsSpecificToolbar","ObjectSpecificToolbar","CurrentlyEditedLabel","Badge","Navbar","bg","sticky","Collapse","RowActions","NumMarcheCellEditor","numMarcheEdit","onKeyDown","key","onKeyPress","HeureDepartCellEditor","parsedDate","dateEdited","timeEdited","toLocaleTimeString","newHeureDepart","HeureArriveeCellEditor","parsedHeureDepart","getTime","dureeTrajet","newHeureArrivee","tctCodeIdMap","CodeTctCellEditor","codeTctEdit","codeTCT","changeCodeTct","codeTct","CirculationRow","heureArrivee","selected","numMarcheEdited","codeTctEdited","heureDepartEdited","toLocaleDateString","heureArriveeEdited","ownProps","circulationsIdList","Table","hover","circulationId","PtxRow","ptxsById","ptxsIdList","ptxId","MainTable","Container","marginTop","ShiftDateModal","startDay","startDate","startTime","goalDay","goalTime","handleClose","start","goal","shiftDateValidated","Modal","shown","onHide","Header","closeButton","Body","Form","Group","Label","Footer","selectedId","find","shiftDateModal","undefined","FanHeureDepartModal","increment","secondsIncrement","Control","step","placeholder","secondsInc","parseInt","secondsPart","isNaN","fanHeureDepartModal","FanNumMarcheModal","selectedNumMarche","fanNumMarcheModal","CirculationSpecificModals","fanHeureDepartShown","fanNumMarcheShown","ObjectSpecificModals","CirculationsSpecificModals","Modals","shiftDateShown","App","fluid","paddingLeft","paddingRight","extended","omit","keyToOmit","omittedPropObj","filterObject","object","filterFunction","filtered","duplicateSelectedCirculations","reduce","newId","uuidv1","fanHeureDepart","currentDate","produce","draftState","setSeconds","getSeconds","fanNumMarche","shiftDate","delta","origDate","action","circulationsToAdd","xmlTextToPtxObject","defaultPTxObject","ptxs","ptx","defaultPtxObject","duplicateSelectedPtx","ptxsToAdd","defaultState","toLoadCount","loadedCount","getXmlFileObject","searchedString","includes","reducer","edited","configureStore","ReactDOM","render","StrictMode","store","getElementById"],"mappings":"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","file":"static/js/main.32b1ae70.chunk.js","sourcesContent":["export const editedObject = {\r\n    NONE: 'none',\r\n    CIRCULATIONS: 'circulations',\r\n    PTX: \"ptx\"\r\n}","export const submitXmlFile = (xmlText) => ({\r\n  type: 'XML_FILE_SUBMITED',\r\n  xmlText: xmlText\r\n})\r\n\r\nexport const selectAll = () => ({\r\n  type: 'SELECT_ALL'\r\n})\r\n\r\nexport const unselectAll = () => ({\r\n  type: 'UNSELECT_ALL'\r\n})\r\n\r\nexport const flipSelectionAll = () => ({\r\n  type: 'FLIP_SELECT_ALL'\r\n})\r\n\r\nexport const clickOnRow = (id) => ({\r\n  type: 'ROW_CLICKED_ON',\r\n  id: id\r\n})\r\n\r\nexport const deleteRow = (id) => ({\r\n  type: 'ROW_DELETED',\r\n  id: id\r\n})\r\n\r\nexport const deleteSelected = () => ({\r\n  type: 'DELETE_SELECTED_BUTTON_PRESSED',\r\n})\r\n\r\nexport const duplicateRow = (id) => ({\r\n  type: 'ROW_DUPLICATED',\r\n  id: id\r\n})\r\n\r\nexport const duplicateSelected = () => ({\r\n  type: 'DUPLICATE_SELECTED_BUTTON_PRESSED',\r\n})\r\n\r\nexport const shiftDateButtonClicked = () => ({\r\n  type: 'SHIFT_DATE_BUTTON_CLICKED',\r\n})\r\n\r\nexport const shiftDateClosed = () => ({\r\n  type: 'SHIFT_DATE_CLOSED'\r\n})\r\n\r\nexport const shiftDateValidated = (start, goal) =>  ({\r\n  type: 'SHIFT_DATE_VALIDATED',\r\n  start: start,\r\n  goal: goal\r\n})\r\n\r\nexport const changeCirculation = (id, circulation) => ({\r\n  type: 'CIRCULATION_CHANGED',\r\n  id: id,\r\n  circulation: circulation\r\n})\r\n\r\nexport const numMarcheCellClicked = (id) => ({\r\n  type: 'NUM_MARCHE_CELL_CLICKED',\r\n  id: id\r\n})\r\n\r\nexport const stopNumMarcheCellEdition = (id) => ({\r\n  type: 'STOP_NUM_MARCHE_CELL_EDITION',\r\n  id: id\r\n})\r\n\r\nexport const changeNumMarche = (id, numMarche) => ({\r\n  type: 'CIRCULATION_NUM_MARCHE_CHANGED',\r\n  id: id,\r\n  numMarche: numMarche\r\n})\r\n\r\nexport const heureDepartCellClicked = (id) => ({\r\n  type: 'HEURE_DEPART_CELL_CLICKED',\r\n  id: id\r\n})\r\n\r\nexport const stopHeureDepartCellEdition = (id) => ({\r\n  type: 'STOP_HEURE_DEPART_CELL_EDITION',\r\n  id: id\r\n})\r\n\r\nexport const changeHeureDepart = (id, heureDepart) => ({\r\n  type: 'CIRCULATION_HEURE_DEPART_CHANGED',\r\n  id: id,\r\n  heureDepart: heureDepart\r\n})\r\n\r\nexport const heureArriveeCellClicked = (id) => ({\r\n  type: 'HEURE_ARRIVEE_CELL_CLICKED',\r\n  id: id\r\n})\r\n\r\nexport const stopHeureArriveeCellEdition = (id) => ({\r\n  type: 'STOP_HEURE_ARRIVEE_CELL_EDITION',\r\n  id: id\r\n})\r\n\r\nexport const codeTctCellClicked = (id) => ({\r\n  type: 'TCT_CELL_CLICKED',\r\n  id: id\r\n})\r\n\r\nexport const stopCodeTctCellEdition = (id) => ({\r\n  type: 'STOP_TCT_CELL_EDITION',\r\n  id: id\r\n})\r\n\r\nexport const changeCodeTct = (id, tctId, tctCode) => ({\r\n  type: 'CIRCULATION_TCT_CHANGED',\r\n  id: id,\r\n  tctId: tctId,\r\n  tctCode: tctCode\r\n})\r\n\r\nexport const fanHeureDepartButtonClicked = () => ({\r\n  type: 'FAN_HEURE_DEPART_BUTTON_CLICKED',\r\n})\r\n\r\nexport const fanHeureDepartClosed = () => ({\r\n  type: 'FAN_HEURE_DEPART_CLOSED'\r\n})\r\n\r\nexport const fanHeureDepartValidated = (start, secondsIncrement) =>  ({\r\n  type: 'FAN_HEURE_DEPART_VALIDATED',\r\n  start: start,\r\n  secondsIncrement: secondsIncrement\r\n})\r\n\r\nexport const fanNumMarcheButtonClicked = () => ({\r\n  type: 'FAN_NUM_MARCHE_BUTTON_CLICKED',\r\n})\r\n\r\nexport const fanNumMarcheClosed = () => ({\r\n  type: 'FAN_NUM_MARCHE_CLOSED'\r\n})\r\n\r\nexport const fanNumMarcheValidated = (start, increment) =>  ({\r\n  type: 'FAN_NUM_MARCHE_VALIDATED',\r\n  start: start,\r\n  increment: increment\r\n})","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { selectAll, unselectAll, flipSelectionAll } from '../../app/actions'\r\n\r\nimport Tooltip from 'react-bootstrap/Tooltip'\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger'\r\n\r\nimport ButtonGroup from 'react-bootstrap/ButtonGroup'\r\nimport Button from 'react-bootstrap/Button'\r\nimport { ListCheck, ListTask, CircleHalf } from 'react-bootstrap-icons';\r\n\r\nclass SelectionButtonsGroup extends React.Component {\r\n\r\n  render() {\r\n    return (\r\n      <ButtonGroup className={this.props.className}>\r\n        <OverlayTrigger\r\n          placement=\"bottom\"\r\n          delay={{ show: 250, hide: 400 }}\r\n          overlay={(props) => (\r\n            <Tooltip id=\"select-all-tooltip\" {...props}>\r\n              Tout sélectionner\r\n            </Tooltip>)}\r\n        >\r\n          <Button variant=\"light\" disabled={this.props.disabled}\r\n            onClick={() => { this.props.dispatch(selectAll()) }}>\r\n            <ListCheck />\r\n          </Button >\r\n        </OverlayTrigger>\r\n        <OverlayTrigger\r\n          placement=\"bottom\"\r\n          delay={{ show: 250, hide: 400 }}\r\n          overlay={(props) => (\r\n            <Tooltip id=\"unselect-all-tooltip\" {...props}>\r\n              Tout déselectionner\r\n            </Tooltip>)}\r\n        >\r\n          <Button variant=\"light\" disabled={this.props.disabled}\r\n            onClick={() => { this.props.dispatch(unselectAll()) }}>\r\n            <ListTask />\r\n          </Button >\r\n        </OverlayTrigger>\r\n        <OverlayTrigger\r\n          placement=\"bottom\"\r\n          delay={{ show: 250, hide: 400 }}\r\n          overlay={(props) => (\r\n            <Tooltip id=\"flip-selection-tooltip\" {...props}>\r\n              Inverser la sélection\r\n            </Tooltip>)}\r\n        >\r\n          <Button variant=\"light\" disabled={this.props.disabled}\r\n            onClick={() => { this.props.dispatch(flipSelectionAll()) }}>\r\n            <CircleHalf />\r\n          </Button>\r\n        </OverlayTrigger>\r\n      </ButtonGroup>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default connect()(SelectionButtonsGroup)","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { submitXmlFile } from '../../app/actions'\r\n\r\nimport Tooltip from 'react-bootstrap/Tooltip'\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger'\r\n\r\nimport Button from 'react-bootstrap/Button'\r\nimport { Download } from 'react-bootstrap-icons';\r\n\r\nclass LoadButton extends React.Component {\r\n\r\n  onChangeFile(event) {\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n    Promise.all(Array.from(event.target.files).map((file) => { return file.text(); }))\r\n      .then(textArray => {\r\n        // var fileText = \"\";\r\n        // if (textArray.length === 1) {\r\n        //   fileText = textArray[0];\r\n        // } else {\r\n        //   fileText = textArray.reduce(\r\n        //     (acc, text) => { return (acc + text + \"\\n\"); },\r\n        //     \"<circulations>\");\r\n        //   fileText += \"</circulations>\"\r\n        // }\r\n        textArray.forEach(textFile => { this.props.dispatch(submitXmlFile(textFile)); });\r\n      });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <OverlayTrigger\r\n        placement=\"bottom\"\r\n        delay={{ show: 250, hide: 400 }}\r\n        overlay={(props) => (\r\n          <Tooltip id=\"load-button-tooltip\" {...props}>\r\n            Charger un ou plusieurs fichiers à éditer\r\n          </Tooltip>)}\r\n      >\r\n        <Button variant=\"primary\" className={this.props.className} size={this.props.size}\r\n          disabled={this.props.isLoading}\r\n          onClick={() => { if (!this.props.isLoading) { this.upload.click() } }}>\r\n          <input type=\"file\" id=\"circulationsFiles\"\r\n            ref={(ref) => this.upload = ref}\r\n            style={{ display: \"none\" }}\r\n            onChange={this.onChangeFile.bind(this)} multiple />\r\n          <Download />\r\n          {this.props.buttonText}\r\n        </Button >\r\n      </OverlayTrigger>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nconst mapState = (state) => {\r\n  return { isLoading: state.main.loadingInfo.isLoading }\r\n}\r\n\r\nexport default connect(mapState)(LoadButton)","const xmlParser = new DOMParser();\r\nconst xmlSerializer = new XMLSerializer();\r\n\r\nexport const xmlTextToCirculationsObject = (xmlText, defaultCirculationObject) => {\r\n  let result = { };\r\n  let xmlDoc = xmlParser.parseFromString(xmlText, \"application/xml\");\r\n  let circulations = xmlDoc.getElementsByTagName(\"Circulation\");\r\n\r\n  Array.from(circulations).forEach((circulation) => {\r\n    var currentId = 0;\r\n    if (circulation.hasChildNodes) {\r\n      circulation.childNodes.forEach((node) => {\r\n        switch (node.tagName) {\r\n          case \"id\":\r\n            currentId = node.innerHTML;\r\n            result[currentId] = {\r\n              ...defaultCirculationObject,\r\n              id: node.innerHTML,\r\n            };\r\n            break;\r\n          case \"dateCreation\":\r\n            result[currentId].dateCreation = node.innerHTML;\r\n            break;\r\n          case \"demandeur\":\r\n            result[currentId].demandeur = node.innerHTML;\r\n            break;\r\n          case \"localisation\":\r\n            result[currentId].localisation = node.innerHTML;\r\n            break;\r\n          case \"Parcours\":\r\n            result[currentId].parcours = xmlSerializer.serializeToString(node);\r\n            break;\r\n          case \"Mission\":\r\n            result[currentId].mission = xmlSerializer.serializeToString(node);\r\n            break;\r\n          case \"ProfilHoraire\":\r\n            result[currentId].profilHoraire = xmlSerializer.serializeToString(node);\r\n            break;\r\n          case \"ProfilDeCirculation\":\r\n            result[currentId].profilDeCirculation = xmlSerializer.serializeToString(node);\r\n            break;\r\n          case \"evenementsCirculation\":\r\n            result[currentId].evenementsCirculation = xmlSerializer.serializeToString(node);\r\n            break;\r\n          case \"EtatCirculation\":\r\n            result[currentId].etatCirculation = xmlSerializer.serializeToString(node);\r\n            break;\r\n          case \"TypeConvoi\":\r\n            result[currentId].typeConvoi = xmlSerializer.serializeToString(node);\r\n            break;\r\n          case \"TypeGestion\":\r\n            result[currentId].typeGestion = xmlSerializer.serializeToString(node);\r\n            break;\r\n          case \"renvoisStandards\":\r\n            result[currentId].renvoisStandards = xmlSerializer.serializeToString(node);\r\n            break;\r\n          case \"ParcoursTopologique\":\r\n            result[currentId].parcoursTopologique = xmlSerializer.serializeToString(node);\r\n            break;\r\n          default:\r\n            return;\r\n        }\r\n      })\r\n    }\r\n  })\r\n\r\n  return result;\r\n}\r\n\r\nexport const getNumMarche = (circulation) => {\r\n    let xmlDom = xmlParser.parseFromString(circulation.etatCirculation, \"application/xml\");\r\n    return xmlDom.getElementsByTagName(\"numMarcheOrigine\")[0].innerHTML;\r\n}\r\n\r\nexport const withNumMarche = (circulation, numMarche) => {\r\n  let xmlDom = xmlParser.parseFromString(circulation.etatCirculation, \"application/xml\");\r\n  xmlDom.getElementsByTagName(\"numMarcheOrigine\")[0].innerHTML = numMarche;\r\n  return ({\r\n    ...circulation,\r\n    etatCirculation: xmlSerializer.serializeToString(xmlDom) \r\n  })\r\n}\r\n\r\nexport const getCodeTCT = (circulation) => {\r\n    let xmlDom = xmlParser.parseFromString(circulation.typeGestion, \"application/xml\");\r\n    return xmlDom.getElementsByTagName(\"tct\")[0].getElementsByTagName(\"libelle\")[0].innerHTML;\r\n}\r\n\r\nexport const withCodeTCT = (circulation, tctId, tctCode) => {\r\n    let xmlDom = xmlParser.parseFromString(circulation.typeGestion, \"application/xml\");\r\n    xmlDom.getElementsByTagName(\"tct\")[0].getElementsByTagName(\"id\")[0].innerHTML = tctId;\r\n    xmlDom.getElementsByTagName(\"tct\")[0].getElementsByTagName(\"code\")[0].innerHTML = tctCode;\r\n    xmlDom.getElementsByTagName(\"tct\")[0].getElementsByTagName(\"libelle\")[0].innerHTML = tctCode;\r\n    return ({\r\n      ...circulation,\r\n      typeGestion: xmlSerializer.serializeToString(xmlDom) \r\n    })\r\n}\r\nexport const getHeureDepart = (circulation) => {\r\n    let xmlDom = xmlParser.parseFromString(circulation.etatCirculation, \"application/xml\");\r\n    return xmlDom.getElementsByTagName(\"dateHeureOrigine\")[0].innerHTML;\r\n}\r\n\r\nexport const withHeureDepart = (circulation, heureDepart) => {\r\n    let heureToWrite = new Date(heureDepart);\r\n    let xmlDom = xmlParser.parseFromString(circulation.etatCirculation, \"application/xml\");\r\n    xmlDom.getElementsByTagName(\"dateHeureOrigine\")[0].innerHTML = heureToWrite.toISOString().slice(0,-5)+\"Z\";\r\n    return ({\r\n      ...circulation,\r\n      etatCirculation: xmlSerializer.serializeToString(xmlDom) \r\n    })\r\n}\r\n\r\nexport const getDureeTrajet = (circulation) => {\r\n  let xmlDom = xmlParser.parseFromString(circulation.profilHoraire, \"application/xml\");\r\n  let detailHoraire = xmlDom.getElementsByTagName(\"detailsHoraire\")[0]\r\n    .getElementsByTagName(\"DetailHoraire\");\r\n  return detailHoraire[detailHoraire.length - 1].getElementsByTagName(\"tempsDepuisOrigine\")[0].innerHTML;\r\n}\r\n\r\nexport const getDepart = (circulation) => {\r\n    let xmlDom = xmlParser.parseFromString(circulation.mission, \"application/xml\");\r\n    return xmlDom.getElementsByTagName(\"etapesMission\")[0]\r\n        .getElementsByTagName(\"EtapeMission\")[0]\r\n        .getElementsByTagName(\"pr\")[0].getAttribute(\"id\");\r\n}\r\n\r\nexport const getArrivee = (circulation) => {\r\n    let xmlDom = xmlParser.parseFromString(circulation.mission, \"application/xml\");\r\n    const Etapes = xmlDom.getElementsByTagName(\"etapesMission\")[0]\r\n        .getElementsByTagName(\"EtapeMission\");\r\n    return Etapes[Etapes.length - 1].getElementsByTagName(\"pr\")[0].getAttribute(\"id\");\r\n}\r\n\r\nexport const getCirculationXmlText = (circulation) => {\r\n  var circulationsText = \"<Circulation>\\n\";\r\n\r\n  circulationsText += \"<id>\" + circulation.id + \"</id>\\n\";\r\n  circulationsText += \"<dateCreation>\" + circulation.dateCreation + \"</dateCreation>\\n\";\r\n  circulationsText += \"<demandeur>\" + circulation.demandeur + \"</demandeur>\\n\"\r\n  circulationsText += \"<localisation>\" + circulation.localisation + \"</localisation>\\n\";\r\n  circulationsText += circulation.parcours + \"\\n\";\r\n  circulationsText += circulation.mission + \"\\n\";\r\n  circulationsText += circulation.profilHoraire + \"\\n\";\r\n  circulationsText += circulation.profilDeCirculation + \"\\n\";\r\n  circulationsText += circulation.evenementsCirculation + \"\\n\";\r\n  circulationsText += circulation.etatCirculation + \"\\n\";\r\n  circulationsText += circulation.typeConvoi + \"\\n\";\r\n  circulationsText += circulation.typeGestion + \"\\n\";\r\n  circulationsText += circulation.renvoisStandards + \"\\n\";\r\n  circulationsText += circulation.parcoursTopologique + \"\\n\";\r\n\r\n  circulationsText += \"</Circulation>\\n\";\r\n\r\n  return circulationsText;\r\n}\r\n\r\nexport const concatAllCirculationsAsText = (circulationsById) => {\r\n  var text = \"<circulations>\\n\";\r\n\r\n  Object.keys(circulationsById).forEach((id) => {\r\n      text += getCirculationXmlText(circulationsById[id]);\r\n  });\r\n\r\n  text += \"</circulations>\";\r\n  return text;\r\n}","const config = require('../../config/config.json') \r\n\r\nexport const saveAsXmlFile = (fileName, content) => {\r\n    const header = config.xml_header;\r\n    const footer = config.xml_footer;\r\n\r\n    var element = document.createElement('a');\r\n    element.setAttribute('href',\r\n        'data:application/xml;charset=utf-8,' + encodeURIComponent(header + content + footer));\r\n    element.setAttribute('download', fileName);\r\n\r\n    element.style.display = 'none';\r\n    document.body.appendChild(element);\r\n\r\n    element.click();\r\n\r\n    document.body.removeChild(element);\r\n}","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport Popover from 'react-bootstrap/Popover'\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger'\r\n\r\nimport Button from 'react-bootstrap/Button'\r\nimport { Upload } from 'react-bootstrap-icons';\r\n\r\nimport InputGroup from 'react-bootstrap/InputGroup'\r\nimport FormControl from 'react-bootstrap/FormControl'\r\nimport { Check } from 'react-bootstrap-icons';\r\n\r\nimport { editedObject } from '../../app/enum'\r\nimport { concatAllCirculationsAsText } from '../../app/tools/CirculationXmlTools'\r\nimport { saveAsXmlFile } from '../../app/tools/SaveFile'\r\n\r\nconst dateStringForFileName = () => {\r\n    let now = new Date();\r\n    var result = \"\";\r\n\r\n    result += now.getFullYear();\r\n    result += String(now.getMonth()).padStart(2, '0')\r\n    result += String(now.getDate()).padStart(2, '0');\r\n    result += \"T\";\r\n    result += String(now.getHours()).padStart(2, '0');\r\n    result += String(now.getMinutes()).padStart(2, '0');\r\n\r\n    return result;\r\n}\r\n\r\nclass SaveButton extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.fileName = dateStringForFileName() + \"_circulations.xml\";\r\n        this.handleValidate = this.handleValidate.bind(this);\r\n    }\r\n\r\n    getCurrentFileName() {\r\n        var fileType = \"\";\r\n\r\n        switch (this.props.editedObject) {\r\n            case editedObject.CIRCULATIONS:\r\n                fileType = \"circulations\";\r\n                break;\r\n            default:\r\n                fileType = \"\";\r\n        }\r\n\r\n        return dateStringForFileName() + \"_\" + fileType + \".xml\";\r\n    }\r\n\r\n    handleValidate() {\r\n        var xmlText = \"\";\r\n\r\n        switch (this.props.editedObject) {\r\n            case editedObject.CIRCULATIONS:\r\n                xmlText = concatAllCirculationsAsText(this.props.circulations);\r\n                break;\r\n            default:\r\n                xmlText = \"\";\r\n        }\r\n\r\n        saveAsXmlFile(this.fileName, xmlText);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <OverlayTrigger\r\n                placement=\"bottom\"\r\n                delay={{ show: 100, hide: 100 }}\r\n                trigger=\"click\"\r\n                rootClose={ true }\r\n                overlay={(props) => (\r\n                    <Popover id=\"save-name-popover\" placement=\"bottom\" {...props}>\r\n                        <Popover.Title as=\"h3\">Nom du fichier</Popover.Title>\r\n                        <Popover.Content>\r\n                            <InputGroup className={this.props.className} style={{ width: 300 }}>\r\n                                <FormControl\r\n                                    defaultValue={this.fileName}\r\n                                    aria-label=\"Nom du fichier\"\r\n                                    onChange={(event) => { this.fileName = event.target.value }}\r\n                                    onClick={(event) => { event.stopPropagation() }}\r\n                                />\r\n                                <InputGroup.Append>\r\n                                    <Button variant=\"success\"\r\n                                        onClick={(event) => {\r\n                                            this.handleValidate();\r\n                                            event.stopPropagation();\r\n                                        }}>\r\n                                        <Check />\r\n                                    </Button >\r\n                                </InputGroup.Append>\r\n                            </InputGroup>\r\n                        </Popover.Content>\r\n                    </Popover>\r\n                )}\r\n            >\r\n                <Button variant=\"success\" className={this.props.className}\r\n                onClick={() => { this.fileName = this.getCurrentFileName(); }}\r\n                disabled={this.props.editedObject === editedObject.NONE}\r\n                >\r\n                    <Upload />\r\n                </Button >\r\n            </OverlayTrigger>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return ({\r\n        editedObject : state.editedObject,\r\n        circulations: state.circulationsById\r\n    })\r\n}\r\n\r\nexport default connect(mapStateToProps)(SaveButton)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { deleteSelected } from '../../app/actions'\r\n\r\nimport Tooltip from 'react-bootstrap/Tooltip'\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger'\r\n\r\nimport Button from 'react-bootstrap/Button'\r\nimport { Trash } from 'react-bootstrap-icons';\r\n\r\nclass DeleteButton extends React.Component {\r\n\r\n  render() {\r\n    return (\r\n      <OverlayTrigger\r\n        placement=\"bottom\"\r\n        delay={{ show: 250, hide: 400 }}\r\n        overlay={(props) => (\r\n          <Tooltip id=\"button-tooltip\" {...props}>\r\n            Supprimer\r\n          </Tooltip>)}\r\n      >\r\n        <Button variant=\"light\" className={this.props.className}\r\n          disabled={this.props.disabled}\r\n          onClick={() => { this.props.dispatch(deleteSelected()) }}>\r\n          <Trash />\r\n        </Button >\r\n      </OverlayTrigger>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default connect()(DeleteButton)","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { duplicateSelected } from '../../app/actions'\r\n\r\nimport Tooltip from 'react-bootstrap/Tooltip'\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger'\r\n\r\nimport Button from 'react-bootstrap/Button'\r\nimport { Files } from 'react-bootstrap-icons';\r\n\r\nclass DuplicateButton extends React.Component {\r\n\r\n  render() {\r\n    return (\r\n      <OverlayTrigger\r\n        placement=\"bottom\"\r\n        delay={{ show: 250, hide: 400 }}\r\n        overlay={(props) => (\r\n          <Tooltip id=\"duplicate-button-tooltip\" {...props}>\r\n            Dupliquer\r\n          </Tooltip>)}\r\n      >\r\n        <Button variant=\"light\" className={this.props.className}\r\n          disabled={this.props.disabled}\r\n          onClick={() => { this.props.dispatch(duplicateSelected()) }}>\r\n          <Files />\r\n        </Button >\r\n      </OverlayTrigger>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default connect()(DuplicateButton)","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { shiftDateButtonClicked } from '../../app/actions'\r\n\r\nimport Tooltip from 'react-bootstrap/Tooltip'\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger'\r\n\r\nimport Button from 'react-bootstrap/Button'\r\nimport { BoxArrowRight } from 'react-bootstrap-icons'\r\n\r\nclass ShiftDateButton extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        // These bindings are necessary to make `this` work in the callback    \r\n        this.handleShow = this.handleShow.bind(this);\r\n    }\r\n\r\n    handleShow(event) {\r\n        this.props.dispatch(shiftDateButtonClicked());\r\n        event.stopPropagation();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <OverlayTrigger\r\n                placement=\"bottom\"\r\n                delay={{ show: 250, hide: 400 }}\r\n                overlay={(props) => (\r\n                    <Tooltip id=\"shift-date-tooltip\" {...props}>\r\n                        Déplacer la date et l'heure\r\n                    </Tooltip>)}>\r\n                <Button variant=\"light\" className={this.props.className} \r\n                    disabled={this.props.disabled} onClick={this.handleShow}>\r\n                    <BoxArrowRight />\r\n                </Button>\r\n            </OverlayTrigger >\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default connect()(ShiftDateButton)","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { fanHeureDepartButtonClicked } from '../../app/actions'\r\n\r\nimport DropdownItem from 'react-bootstrap/DropdownItem'\r\n\r\nclass FanHeureDepartButton extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        // These bindings are necessary to make `this` work in the callback    \r\n        this.handleShow = this.handleShow.bind(this);\r\n    }\r\n\r\n    handleShow(event) {\r\n        this.props.dispatch(fanHeureDepartButtonClicked());\r\n        event.stopPropagation();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <DropdownItem variant=\"light\" onClick={this.handleShow}>\r\n                Heure départ\r\n            </DropdownItem>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default connect()(FanHeureDepartButton)","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { fanNumMarcheButtonClicked } from '../../app/actions'\r\n\r\nimport DropdownItem from 'react-bootstrap/DropdownItem'\r\n\r\nclass FanNumMarcheButton extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        // These bindings are necessary to make `this` work in the callback    \r\n        this.handleShow = this.handleShow.bind(this);\r\n    }\r\n\r\n    handleShow(event) {\r\n        this.props.dispatch(fanNumMarcheButtonClicked());\r\n        event.stopPropagation();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <DropdownItem onClick={this.handleShow}>\r\n                Numéro de marche\r\n            </DropdownItem>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default connect()(FanNumMarcheButton)","import React from 'react'\r\n\r\nimport Tooltip from 'react-bootstrap/Tooltip'\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger'\r\n\r\nimport DropdownButton from 'react-bootstrap/DropdownButton'\r\nimport { ListNested } from 'react-bootstrap-icons';\r\n\r\nimport FanHeureDepartButton from './FanHeureDepartButton'\r\nimport FanNumMarcheButton from './FanNumMarcheButton'\r\n\r\nclass FanActionsDropdown extends React.Component {\r\n\r\n  render() {\r\n    return (\r\n      <OverlayTrigger\r\n        placement=\"right\"\r\n        delay={{ show: 250, hide: 400 }}\r\n        overlay={(props) => (\r\n          <Tooltip id=\"fan-dropdown-tooltip\" {...props}>\r\n            Répartir pour la sélection\r\n          </Tooltip>)}\r\n      >\r\n        <DropdownButton variant=\"light\" title={<ListNested />}>\r\n            <FanNumMarcheButton />\r\n            <FanHeureDepartButton />\r\n        </DropdownButton>\r\n      </OverlayTrigger>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default FanActionsDropdown","import React from 'react';\r\n\r\nimport FanActionsDropdown from './FanActionsDropdown'\r\n\r\nconst CirculationsSpecificToolbar = () => (\r\n        <FanActionsDropdown />\r\n)\r\n\r\nexport default CirculationsSpecificToolbar;\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { editedObject } from '../../app/enum'\r\nimport CirculationsSpecificToolbar from '../../circulationsComponents/toolbar/CirculationsSpecificToolbar'\r\n\r\nclass ObjectSpecificToolbar extends React.Component {\r\n\r\n    render() {\r\n        switch (this.props.editedObject) {\r\n            case editedObject.CIRCULATIONS:\r\n                return (<CirculationsSpecificToolbar />);\r\n            case editedObject.NONE:\r\n            default:\r\n                return (<></>);\r\n        }\r\n    }\r\n\r\n}\r\n\r\nconst mapState = (state) => {\r\n    return { editedObject: state.editedObject }\r\n}\r\n\r\nexport default connect(mapState)(ObjectSpecificToolbar)","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport Badge from 'react-bootstrap/Badge'\r\nimport { editedObject } from '../../app/enum'\r\n\r\nclass CurrentlyEditedLabel extends React.Component {\r\n\r\n    render() {\r\n        switch (this.props.editedObject) {\r\n            case editedObject.CIRCULATIONS:\r\n                return (<Badge variant=\"primary\" {...this.props}>Circulations</Badge>);\r\n            case editedObject.PTX:\r\n                return (<Badge variant=\"warning\" {...this.props}>PTX</Badge>);\r\n            case editedObject.NONE:\r\n            default:\r\n                return (<></>);\r\n        }\r\n    }\r\n\r\n}\r\n\r\nconst mapState = (state) => {\r\n    return { editedObject: state.editedObject }\r\n}\r\n\r\nexport default connect(mapState)(CurrentlyEditedLabel)","import React from 'react';\r\nimport { connect } from 'react-redux'\r\n\r\nimport Navbar from 'react-bootstrap/Navbar'\r\nimport ButtonGroup from 'react-bootstrap/ButtonGroup'\r\n\r\nimport { editedObject } from '../../app/enum'\r\n\r\nimport SelectionButtonsGroup from './SelectionButtonsGroup'\r\nimport LoadButton from './LoadButton'\r\nimport SaveButton from './SaveButton'\r\nimport DeleteButton from './DeleteButton'\r\nimport DuplicateButton from './DuplicateButton'\r\nimport ShiftDateButton from './ShiftDateButton'\r\nimport ObjectSpecificToolbar from './ObjectSpecificToolbar'\r\nimport CurrentlyEditedLabel from './CurrentlyEditedLabel'\r\n\r\nconst Toolbar = (props) => (\r\n    <Navbar bg=\"dark\" sticky=\"top\">\r\n        <LoadButton className=\"mr-2\" />\r\n        <SelectionButtonsGroup className=\"mr-2\" disabled={props.editedObject === editedObject.NONE} />\r\n        <ButtonGroup className=\"mr-2\">\r\n            <DuplicateButton disabled={props.editedObject === editedObject.NONE} />\r\n            <DeleteButton disabled={props.editedObject === editedObject.NONE} />\r\n        </ButtonGroup>\r\n\r\n        <ShiftDateButton className=\"mr-2\" disabled={props.editedObject === editedObject.NONE } />\r\n        <ObjectSpecificToolbar />\r\n\r\n        <Navbar.Collapse className=\"justify-content-end\">\r\n            <CurrentlyEditedLabel className=\"mr-sm-3\" />\r\n            <SaveButton fileName=\"circulations.xml\" />\r\n        </Navbar.Collapse>\r\n    </Navbar>\r\n)\r\n\r\nconst mapState = (state) => {\r\n    return { editedObject: state.editedObject }\r\n}\r\n\r\nexport default connect(mapState)(Toolbar)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { duplicateRow } from '../../app/actions'\r\nimport { deleteRow } from '../../app/actions'\r\n\r\nimport Button from 'react-bootstrap/Button'\r\nimport { Files } from 'react-bootstrap-icons';\r\nimport { Trash } from 'react-bootstrap-icons';\r\n\r\nclass RowActions extends React.Component {\r\n\r\n  render() {\r\n    return (\r\n      <div className={this.props.className}>\r\n        <Button\r\n          onClick={(event) => {\r\n            this.props.dispatch(duplicateRow(this.props.id));\r\n            event.stopPropagation();\r\n          }}\r\n          variant=\"outline-dark\" size=\"sm\"\r\n          className=\"mr-1 py-0 btn-xs\" >\r\n          <Files />\r\n        </Button>\r\n        <Button\r\n          onClick={(event) => {\r\n            this.props.dispatch(deleteRow(this.props.id));\r\n            event.stopPropagation();\r\n          }}\r\n          variant=\"outline-dark\" size=\"sm\"\r\n          className=\"py-0 btn-xs\" >\r\n          <Trash />\r\n        </Button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default connect()(RowActions)","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { changeNumMarche, stopNumMarcheCellEdition } from '../../app/actions'\r\n\r\nimport InputGroup from 'react-bootstrap/InputGroup'\r\nimport Button from 'react-bootstrap/Button'\r\nimport FormControl from 'react-bootstrap/FormControl'\r\nimport { Check } from 'react-bootstrap-icons';\r\n\r\nclass NumMarcheCellEditor extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.numMarcheEdit = props.numMarche;\r\n\r\n        // This binding is necessary to make `this` work in the callback    \r\n        this.handleValidate = this.handleValidate.bind(this);\r\n    }\r\n\r\n    handleValidate() {\r\n        if (this.props.numMarche !== this.numMarcheEdit) {\r\n            this.props.dispatch(\r\n                changeNumMarche(this.props.id, this.numMarcheEdit));\r\n        } else {\r\n            this.props.dispatch(\r\n                stopNumMarcheCellEdition(this.props.id));\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <InputGroup className={this.props.className}>\r\n                <FormControl\r\n                    defaultValue={this.props.numMarche}\r\n                    aria-label=\"Numéro de marche\"\r\n                    onChange={(event) => { this.numMarcheEdit = event.target.value }}\r\n                    onClick={(event) => { event.stopPropagation() }}\r\n                    onKeyDown={(event) => { \r\n                        if (event.key === \"Escape\") {\r\n                        this.props.dispatch(stopNumMarcheCellEdition(this.props.id));\r\n                    }}}\r\n                    onKeyPress={(event) => {\r\n                        if (event.key === \"Enter\") {\r\n                            this.handleValidate();\r\n                    }}}\r\n                />\r\n                <InputGroup.Append>\r\n                    <Button variant=\"success\"\r\n                        onClick={(event) => {\r\n                            this.handleValidate();\r\n                            event.stopPropagation();\r\n                        }}>\r\n                        <Check />\r\n                    </Button >\r\n                </InputGroup.Append>\r\n            </InputGroup>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default connect()(NumMarcheCellEditor)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { changeHeureDepart, stopHeureDepartCellEdition } from '../../app/actions'\r\n\r\nimport InputGroup from 'react-bootstrap/InputGroup'\r\nimport Button from 'react-bootstrap/Button'\r\nimport FormControl from 'react-bootstrap/FormControl'\r\nimport { Check } from 'react-bootstrap-icons';\r\n\r\nclass HeureDepartCellEditor extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        let parsedDate = new Date(props.heureDepart);\r\n        this.dateEdited = parsedDate.toISOString().slice(0, 10);\r\n        this.timeEdited = parsedDate.toLocaleTimeString('fr-FR');\r\n\r\n        // This binding is necessary to make `this` work in the callback    \r\n        this.handleValidate = this.handleValidate.bind(this);\r\n    }\r\n\r\n    handleValidate() {\r\n        let newHeureDepart = new Date(\r\n            this.dateEdited + \" \" + this.timeEdited);\r\n        if (newHeureDepart !== this.props.heureDepart) {\r\n            this.props.dispatch(changeHeureDepart(\r\n                this.props.id, newHeureDepart.toISOString()))\r\n\r\n        } else {\r\n            this.props.dispatch(stopHeureDepartCellEdition(this.props.id));\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={this.props.className}>\r\n                <InputGroup>\r\n                    <FormControl\r\n                        defaultValue={this.dateEdited}\r\n                        aria-label=\"Date de départ\"\r\n                        type=\"date\"\r\n                        onChange={(event) => {\r\n                            this.dateEdited = event.target.value\r\n                        }}\r\n                        onClick={(event) => { event.stopPropagation() }}\r\n                        onKeyDown={(event) => {\r\n                            if (event.key === \"Escape\") {\r\n                                this.props.dispatch(stopHeureDepartCellEdition(this.props.id));\r\n                            }\r\n                        }}\r\n                        onKeyPress={(event) => {\r\n                            if (event.key === \"Enter\") {\r\n                                this.handleValidate();\r\n                            }\r\n                        }}\r\n                    />\r\n                    <FormControl\r\n                        defaultValue={this.timeEdited}\r\n                        aria-label=\"Heure de départ\"\r\n                        type=\"time\"\r\n                        onChange={(event) => { this.timeEdited = event.target.value }}\r\n                        onClick={(event) => { event.stopPropagation() }}\r\n                        onKeyDown={(event) => {\r\n                            if (event.key === \"Escape\") {\r\n                                this.props.dispatch(stopHeureDepartCellEdition(this.props.id));\r\n                            }\r\n                        }}\r\n                        onKeyPress={(event) => {\r\n                            if (event.key === \"Enter\") {\r\n                                this.handleValidate();\r\n                            }\r\n                        }}\r\n                    />\r\n                    <InputGroup.Append>\r\n                        <Button variant=\"success\"\r\n                            onClick={(event) => {\r\n                                this.handleValidate();\r\n                                event.stopPropagation();\r\n                            }}>\r\n                            <Check />\r\n                        </Button >\r\n                    </InputGroup.Append>\r\n                </InputGroup>\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default connect()(HeureDepartCellEditor)\r\n","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { changeHeureDepart, stopHeureArriveeCellEdition } from '../../app/actions'\r\n\r\nimport InputGroup from 'react-bootstrap/InputGroup'\r\nimport Button from 'react-bootstrap/Button'\r\nimport FormControl from 'react-bootstrap/FormControl'\r\nimport { Check } from 'react-bootstrap-icons';\r\n\r\nclass HeureArriveeCellEditor extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        let parsedHeureDepart = new Date(props.heureDepart);\r\n        let parsedDate = new Date(parsedHeureDepart.getTime() + 1000 * props.dureeTrajet); \r\n        this.dateEdited = parsedDate.toISOString().slice(0, 10);\r\n        this.timeEdited = parsedDate.toLocaleTimeString('fr-FR');\r\n\r\n        // This binding is necessary to make `this` work in the callback    \r\n        this.handleValidate = this.handleValidate.bind(this);\r\n    }\r\n\r\n    handleValidate() {\r\n        let newHeureArrivee = new Date(this.dateEdited + \" \" + this.timeEdited);\r\n        let newHeureDepart = new Date(newHeureArrivee.getTime() - 1000 * this.props.dureeTrajet);\r\n        if (newHeureDepart !== this.props.heureDepart) {\r\n            this.props.dispatch(changeHeureDepart(\r\n                this.props.id, newHeureDepart.toISOString()))\r\n\r\n        } else {\r\n            this.props.dispatch(stopHeureArriveeCellEdition(this.props.id));\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className={this.props.className}>\r\n                <InputGroup>\r\n                    <FormControl\r\n                        defaultValue={this.dateEdited}\r\n                        aria-label=\"Date de départ\"\r\n                        type=\"date\"\r\n                        onChange={(event) => {\r\n                            this.dateEdited = event.target.value\r\n                        }}\r\n                        onClick={(event) => { event.stopPropagation() }}\r\n                        onKeyDown={(event) => {\r\n                            if (event.key === \"Escape\") {\r\n                                this.props.dispatch(stopHeureArriveeCellEdition(this.props.id));\r\n                            }\r\n                        }}\r\n                        onKeyPress={(event) => {\r\n                            if (event.key === \"Enter\") {\r\n                                this.handleValidate();\r\n                            }\r\n                        }}\r\n                    />\r\n                    <FormControl\r\n                        defaultValue={this.timeEdited}\r\n                        aria-label=\"Heure de départ\"\r\n                        type=\"time\"\r\n                        onChange={(event) => { this.timeEdited = event.target.value }}\r\n                        onClick={(event) => { event.stopPropagation() }}\r\n                        onKeyDown={(event) => {\r\n                            if (event.key === \"Escape\") {\r\n                                this.props.dispatch(stopHeureArriveeCellEdition(this.props.id));\r\n                            }\r\n                        }}\r\n                        onKeyPress={(event) => {\r\n                            if (event.key === \"Enter\") {\r\n                                this.handleValidate();\r\n                            }\r\n                        }}\r\n                    />\r\n                    <InputGroup.Append>\r\n                        <Button variant=\"success\"\r\n                            onClick={(event) => {\r\n                                this.handleValidate();\r\n                                event.stopPropagation();\r\n                            }}>\r\n                            <Check />\r\n                        </Button >\r\n                    </InputGroup.Append>\r\n                </InputGroup>\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default connect()(HeureArriveeCellEditor)\r\n","const tctCodeIdMap = {\r\n    \"FCB\": \"77e8acc5-2d5c-11e6-8bb5-01e08e116de3\",\r\n    \"FCC\": \"7c996166-2d5c-11e6-a2d2-01e08e116de3\",\r\n    \"FEC\": \"76982e97-2d5c-11e6-8203-01e08e116de3\",\r\n    \"FER\": \"9009a7b6-2d5c-11e6-af37-01e08e116de3\",\r\n    \"FLC\": \"9f1e1dc1-2d5c-11e6-9942-01e08e116de3\",\r\n    \"FMB\": \"a87a1b74-2d5c-11e6-959d-01e08e116de3\",\r\n    \"FRR\": \"8a559299-2d5c-11e6-820b-01e08e116de3\",\r\n    \"FVC\": \"0460da1f-2d5d-11e6-b2be-01e08e116de3\",\r\n    \"HYD\": \"013eacaf-2d5e-11e6-a2b9-01e08e116de3\",\r\n    \"HZF\": \"807a7227-2d5c-11e6-b4aa-01e08e116de3\",\r\n    \"HZI\": \"dbee4698-2d5d-11e6-83ca-01e08e116de3\",\r\n    \"HZN\": \"fcaf8b51-2d5c-11e6-b540-01e08e116de3\",\r\n    \"IAT\": \"844416b7-2d7b-11e6-a021-01148e116de3\",\r\n    \"IEA\": \"ad77bd92-2d78-11e6-b578-01148e116de3\",\r\n    \"IVO\": \"8ddbe0fe-2d5c-11e6-90ac-01e08e116de3\",\r\n    \"JAB\": \"8492a97e-2d5d-11e6-93b3-01e08e116de3\",\r\n    \"JAC\": \"ce7c9a7d-2d5d-11e6-8f95-01e08e116de3\",\r\n    \"LBB\": \"ad4f8172-2d78-11e6-b384-01148e116de3\",\r\n    \"LBC\": \"76ceb1ad-2d5c-11e6-8409-01e08e116de3\",\r\n    \"LBG\": \"9ed9e77a-2d5c-11e6-95a2-01e08e116de3\",\r\n    \"LBL\": \"5b3d758f-2d5c-11e6-89c5-01e08e116de3\",\r\n    \"LCA\": \"3a4773c1-2d5d-11e6-9f32-01e08e116de3\",\r\n    \"LVD\": \"5ab0ab1c-2d5c-11e6-83e7-01e08e116de3\",\r\n    \"LVH\": \"5a58bbca-2d5c-11e6-802f-01e08e116de3\",\r\n    \"RBD\": \"fe9e3ec5-2d5b-11e6-892f-01e08e116de3\",\r\n    \"RBK\": \"6d957615-2d5c-11e6-8c5c-01e08e116de3\",\r\n    \"RBS\": \"00b5e5f7-2d5c-11e6-90cb-01e08e116de3\",\r\n    \"RCD\": \"6e53e9ee-2d5c-11e6-95fc-01e08e116de3\",\r\n    \"RCK\": \"6dbb8ee8-2d5c-11e6-8dfd-01e08e116de3\",\r\n    \"SCD\": \"dd4454d2-2d5c-11e6-9b0a-01e08e116de3\",\r\n    \"SCK\": \"8872471c-2d5c-11e6-ac4c-01e08e116de3\"\r\n}\r\n\r\nexport const getCodesTctArray = () => {\r\n    return Object.keys(tctCodeIdMap);\r\n}\r\n\r\nexport const getCodeTctId = (tctCode) => {\r\n     return tctCodeIdMap[tctCode];\r\n}","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { getCodesTctArray, getCodeTctId } from '../../app/tools/CodeTctTools'\r\nimport { changeCodeTct, stopCodeTctCellEdition } from '../../app/actions'\r\n\r\nimport InputGroup from 'react-bootstrap/InputGroup'\r\nimport Button from 'react-bootstrap/Button'\r\nimport FormControl from 'react-bootstrap/FormControl'\r\nimport { Check } from 'react-bootstrap-icons';\r\n\r\nclass CodeTctCellEditor extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.codeTctEdit = props.codeTCT;\r\n\r\n        // This binding is necessary to make `this` work in the callback    \r\n        this.handleValidate = this.handleValidate.bind(this);\r\n    }\r\n\r\n    handleValidate() {\r\n        if (this.props.codeTCT !== this.codeTctEdit) {\r\n            this.props.dispatch(\r\n                changeCodeTct(\r\n                    this.props.id, \r\n                    getCodeTctId(this.codeTctEdit), \r\n                    this.codeTctEdit));\r\n        } else {\r\n            this.props.dispatch(\r\n                stopCodeTctCellEdition(this.props.id));\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <InputGroup className={this.props.className}>\r\n                <FormControl as=\"select\"\r\n                    defaultValue={this.props.codeTCT}\r\n                    aria-label=\"Code TCT\"\r\n                    onChange={(event) => { this.codeTctEdit = event.target.value }}\r\n                    onClick={(event) => { event.stopPropagation() }}\r\n                    onKeyDown={(event) => {\r\n                        if (event.key === \"Escape\") {\r\n                            this.props.dispatch(stopCodeTctCellEdition(this.props.id));\r\n                        }\r\n                    }}\r\n                    onKeyPress={(event) => {\r\n                        if (event.key === \"Enter\") {\r\n                            this.handleValidate();\r\n                        }\r\n                }}>\r\n                    {getCodesTctArray().map(codeTct => (\r\n                        <option>{codeTct}</option>\r\n                    ))}\r\n                </FormControl>\r\n                <InputGroup.Append>\r\n                    <Button variant=\"success\"\r\n                        onClick={(event) => {\r\n                            this.handleValidate();\r\n                            event.stopPropagation();\r\n                        }}>\r\n                        <Check />\r\n                    </Button >\r\n                </InputGroup.Append>\r\n            </InputGroup>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nexport default connect()(CodeTctCellEditor)\r\n","import React from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { clickOnRow, numMarcheCellClicked, heureDepartCellClicked, codeTctCellClicked, heureArriveeCellClicked } from '../../app/actions'\r\nimport { getCodeTCT, getDureeTrajet, getHeureDepart, getNumMarche } from '../../app/tools/CirculationXmlTools'\r\n\r\nimport RowActions from '../../mainComponents/table/RowActions'\r\nimport NumMarcheCellEditor from './NumMarcheCellEditor'\r\nimport HeureDepartCellEditor from './HeureDepartCellEditor'\r\nimport HeureArriveeCellEditor from './HeureArriveeCellEditor'\r\nimport CodeTctCellEditor from './CodeTctCellEditor'\r\n\r\nclass CirculationRow extends React.Component {\r\n    render() {\r\n        let heureDepart = new Date(this.props.heureDepart);\r\n        let heureArrivee = new Date(heureDepart.getTime() + 1000 * this.props.dureeTrajet);\r\n        return (\r\n            <tr className={this.props.selected ? \"table-secondary\" : \"\"}\r\n                onClick={() => { this.props.dispatch(clickOnRow(this.props.id)) }} >\r\n                <td>{this.props.id}</td>\r\n                <td>{\r\n                    this.props.numMarcheEdited\r\n                        ? <NumMarcheCellEditor\r\n                            id={this.props.id}\r\n                            numMarche={this.props.numMarche} />\r\n                        : <span onClick={(event) => {\r\n                            this.props.dispatch(numMarcheCellClicked(this.props.id));\r\n                            event.stopPropagation();\r\n                        }}>\r\n                            {this.props.numMarche}\r\n                        </span>\r\n                }</td>\r\n                <td>{\r\n                    this.props.codeTctEdited\r\n                        ? <CodeTctCellEditor\r\n                            id={this.props.id}\r\n                            codeTCT={this.props.codeTCT} />\r\n                        : <span onClick={(event) => {\r\n                            this.props.dispatch(codeTctCellClicked(this.props.id));\r\n                            event.stopPropagation();\r\n                        }}>\r\n                            {this.props.codeTCT}\r\n                        </span>\r\n                }</td>\r\n                <td>{\r\n                    this.props.heureDepartEdited\r\n                        ? <HeureDepartCellEditor\r\n                            id={this.props.id}\r\n                            heureDepart={this.props.heureDepart} />\r\n                        : <span onClick={(event) => {\r\n                            this.props.dispatch(heureDepartCellClicked(this.props.id));\r\n                            event.stopPropagation();\r\n                        }}>\r\n                            {heureDepart.toLocaleDateString('fr-FR')} - {heureDepart.toLocaleTimeString('fr-FR')}\r\n                        </span>\r\n                }</td>\r\n                <td>{\r\n                    this.props.heureArriveeEdited\r\n                        ? <HeureArriveeCellEditor\r\n                            id={this.props.id}\r\n                            heureDepart={this.props.heureDepart}\r\n                            dureeTrajet={this.props.dureeTrajet} />\r\n                        : <span onClick={(event) => {\r\n                            this.props.dispatch(heureArriveeCellClicked(this.props.id));\r\n                            event.stopPropagation();\r\n                        }}>\r\n                            {heureArrivee.toLocaleDateString('fr-FR')} - {heureArrivee.toLocaleTimeString('fr-FR')}\r\n                        </span>\r\n                }</td>\r\n                <td><RowActions\r\n                    id={this.props.id} className=\"float-right\" /></td>\r\n            </tr>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    let circulation = state.circulationsById[ownProps.id];\r\n    return {\r\n        numMarche: getNumMarche(circulation),\r\n        codeTCT: getCodeTCT(circulation),\r\n        heureDepart: getHeureDepart(circulation),\r\n        dureeTrajet: getDureeTrajet(circulation),\r\n        selected: circulation.selected,\r\n        numMarcheEdited: circulation.numMarcheEdited,\r\n        heureDepartEdited: circulation.heureDepartEdited,\r\n        heureArriveeEdited: circulation.heureArriveeEdited,\r\n        codeTctEdited: circulation.codeTctEdited\r\n    }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps)(CirculationRow);","import React from 'react';\r\nimport { connect } from 'react-redux'\r\n\r\nimport Table from 'react-bootstrap/Table';\r\nimport CirculationRow from './tableRow/CirculationRow';\r\n\r\nconst CirculationsTable = ({ circulationsIdList }) => (\r\n    <Table hover>\r\n        <thead>\r\n            <tr>\r\n                <th className=\"w-30\">Id</th>\r\n                <th className=\"w-10\">Num. Marche</th>\r\n                <th className=\"w-10\">Code TCT</th>\r\n                <th className=\"w-15\">Date et heure de départ</th>\r\n                <th className=\"w-15\">Date et heure d'arrivée</th>\r\n                <th className=\"w-10\"></th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            {circulationsIdList.map(circulationId => (\r\n                <CirculationRow  key={circulationId}\r\n                id={circulationId} />\r\n            ))}\r\n        </tbody>\r\n    </Table >\r\n)\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        circulationsIdList: Object.keys(state.circulationsById)\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(CirculationsTable);","import React from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { clickOnRow } from '../../app/actions'\r\n\r\nimport RowActions from '../../mainComponents/table/RowActions'\r\n\r\nclass PtxRow extends React.Component {\r\n    render() {\r\n        return (\r\n            <tr className={this.props.selected ? \"table-secondary\" : \"\"}\r\n                onClick={() => { this.props.dispatch(clickOnRow(this.props.id)) }} >\r\n                <td>{this.props.id}</td>\r\n                <td><RowActions\r\n                    id={this.props.id} className=\"float-right\" /></td>\r\n            </tr>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    let ptx = state.ptxsById[ownProps.id];\r\n    return {\r\n        selected: ptx.selected,\r\n    }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps)(PtxRow);","import React from 'react';\r\nimport { connect } from 'react-redux'\r\n\r\nimport Table from 'react-bootstrap/Table';\r\n\r\nimport PtxRow from './tableRow/PtxRow'\r\n\r\nconst PtxsTable = ({ ptxsIdList }) => (\r\n    <Table hover>\r\n        <thead>\r\n            <tr>\r\n                <th className=\"w-30\">Id</th>\r\n                <th className=\"w-10\"></th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            {ptxsIdList.map(ptxId => (\r\n                <PtxRow key={ptxId}\r\n                id={ptxId} />\r\n            ))}\r\n        </tbody>\r\n    </Table >\r\n)\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        ptxsIdList: Object.keys(state.ptxsById)\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps)(PtxsTable);","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { editedObject } from '../../app/enum'\r\n\r\nimport Container from 'react-bootstrap/Container'\r\n\r\nimport LoadButton from '../toolbar/LoadButton'\r\nimport CirculationsTable from '../../circulationsComponents/CirculationsTable'\r\nimport PtxsTable from '../../ptxComponents/PtxsTable'\r\n\r\nclass MainTable extends React.Component {\r\n\r\n    render() {\r\n        switch (this.props.editedObject) {\r\n            case editedObject.CIRCULATIONS:\r\n                return (<CirculationsTable />);\r\n            case editedObject.PTX:\r\n                return (<PtxsTable />);\r\n            case editedObject.NONE:\r\n            default:\r\n                return (\r\n                    <Container style={{ marginTop: 50 }}>\r\n                        <h2>Éditeur de fichiers xml pour l'import dans GOC 2.0</h2>\r\n                        <p>\r\n                            <b>Aucun fichier chargé</b><br />\r\n                            Pour commencer charger un fichier xml à éditer\r\n                        </p>\r\n                        <LoadButton buttonText=\" Charger un fichier\" />\r\n                    </Container>\r\n                );\r\n        }\r\n    }\r\n\r\n}\r\n\r\nconst mapState = (state) => {\r\n    return { editedObject: state.editedObject }\r\n}\r\n\r\nexport default connect(mapState)(MainTable)","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { shiftDateButtonClicked, shiftDateClosed, shiftDateValidated } from '../../app/actions'\r\nimport { getHeureDepart } from '../../app/tools/CirculationXmlTools'\r\n\r\nimport Button from 'react-bootstrap/Button'\r\nimport Modal from 'react-bootstrap/Modal'\r\nimport FormControl from 'react-bootstrap/FormControl'\r\nimport Form from 'react-bootstrap/Form'\r\nimport InputGroup from 'react-bootstrap/InputGroup'\r\n\r\nclass ShiftDateModal extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        let parsedDate = new Date(Date.now());\r\n        this.startDay = this.props.startDate.toISOString().slice(0, 10);\r\n        this.startTime = this.props.startDate.toLocaleTimeString('fr-FR');\r\n        this.goalDay = parsedDate.toISOString().slice(0, 10);\r\n        this.goalTime = this.props.startDate.toLocaleTimeString('fr-FR');\r\n\r\n        // These bindings are necessary to make `this` work in the callback    \r\n        this.handleShow = this.handleShow.bind(this);\r\n        this.handleClose = this.handleClose.bind(this);\r\n        this.handleValidate = this.handleValidate.bind(this);\r\n    }\r\n\r\n    handleShow(event) {\r\n        this.props.dispatch(shiftDateButtonClicked());\r\n        event.stopPropagation();\r\n    }\r\n\r\n    handleClose(event) {\r\n        this.props.dispatch(shiftDateClosed());\r\n        if (event) {\r\n            event.stopPropagation();\r\n        }\r\n    }\r\n\r\n    handleValidate(event) {\r\n        let start = new Date(this.startDay + \" \" + this.startTime);\r\n        let goal = new Date(this.goalDay + \" \" + this.goalTime);\r\n        this.props.dispatch(\r\n            shiftDateValidated(start.toISOString(), goal.toISOString())\r\n        );\r\n        event.stopPropagation();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Modal show={this.props.shown} onHide={this.handleClose}\r\n                onClick={(event) => { event.stopPropagation(); }}>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>Décalage des heures de départ</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <Form.Group>\r\n                        <Form.Label>De la date</Form.Label>\r\n                        <InputGroup>\r\n                            <FormControl\r\n                                defaultValue={this.startDay}\r\n                                aria-label=\"De la date (jour)\"\r\n                                type=\"date\"\r\n                                onChange={(event) => {\r\n                                    this.startDay = event.target.value;\r\n                                }}\r\n                            />\r\n                            <FormControl\r\n                                defaultValue={this.startTime}\r\n                                aria-label=\"De la date (heure)\"\r\n                                type=\"time\"\r\n                                onChange={(event) => {\r\n                                    this.startTime = event.target.value;\r\n                                }}\r\n                            />\r\n                        </InputGroup>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group>\r\n                        <Form.Label>Vers la date</Form.Label>\r\n                        <InputGroup>\r\n                            <FormControl\r\n                                defaultValue={this.goalDay}\r\n                                aria-label=\"Vers la date (jour)\"\r\n                                type=\"date\"\r\n                                onChange={(event) => {\r\n                                    this.goalDay = event.target.value;\r\n                                }}\r\n                            />\r\n                            <FormControl\r\n                                defaultValue={this.goalTime}\r\n                                aria-label=\"Vers la date (heure)\"\r\n                                type=\"time\"\r\n                                onChange={(event) => {\r\n                                    this.goalTime = event.target.value;\r\n                                }}\r\n                            />\r\n                        </InputGroup>\r\n                    </Form.Group>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button variant=\"danger\" onClick={this.handleClose}>\r\n                        Annuler\r\n                    </Button>\r\n                    <Button variant=\"success\" onClick={this.handleValidate}>\r\n                        Valider\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nconst mapState = (state) => {\r\n    let selectedId = Object.keys(state.circulationsById).find(\r\n        (id) => { return state.circulationsById[id].selected });\r\n    return ({\r\n        shown: state.main.shiftDateModal.shown,\r\n        startDate:\r\n            (selectedId === undefined)\r\n                ? new Date(Date.now())\r\n                : new Date(getHeureDepart(state.circulationsById[selectedId]))\r\n    });\r\n}\r\n\r\nexport default connect(mapState)(ShiftDateModal)","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { fanHeureDepartButtonClicked, fanHeureDepartClosed, fanHeureDepartValidated } from '../../app/actions'\r\nimport { getHeureDepart } from '../../app/tools/CirculationXmlTools'\r\n\r\nimport Button from 'react-bootstrap/Button'\r\nimport Modal from 'react-bootstrap/Modal'\r\nimport FormControl from 'react-bootstrap/FormControl'\r\nimport Form from 'react-bootstrap/Form'\r\nimport InputGroup from 'react-bootstrap/InputGroup'\r\n\r\nclass FanHeureDepartModal extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.dateEdited = this.props.startDate.toISOString().slice(0, 10);\r\n        this.timeEdited = this.props.startDate.toLocaleTimeString('fr-FR');\r\n\r\n        this.increment = 600; // default: 10 minutes increment\r\n\r\n        // These bindings are necessary to make `this` work in the callback    \r\n        this.handleShow = this.handleShow.bind(this);\r\n        this.handleClose = this.handleClose.bind(this);\r\n        this.handleValidate = this.handleValidate.bind(this);\r\n    }\r\n\r\n    handleShow(event) {\r\n        this.props.dispatch(fanHeureDepartButtonClicked());\r\n        event.stopPropagation();\r\n    }\r\n\r\n    handleClose(event) {\r\n        this.props.dispatch(fanHeureDepartClosed());\r\n        if (event) {\r\n            event.stopPropagation();\r\n        }\r\n    }\r\n\r\n    handleValidate(event) {\r\n        let newHeureDepart = new Date(\r\n            this.dateEdited + \" \" + this.timeEdited);\r\n        this.props.dispatch(\r\n            fanHeureDepartValidated(newHeureDepart.toISOString(), this.increment));\r\n        event.stopPropagation();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Modal show={this.props.shown} onHide={this.handleClose}\r\n                onClick={(event) => { event.stopPropagation(); }}>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>Ventilatation des heures de départ</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <Form.Group>\r\n                        <Form.Label>Heure de départ</Form.Label>\r\n\r\n                        <InputGroup>\r\n                            <FormControl\r\n                                defaultValue={this.dateEdited}\r\n                                aria-label=\"Date de départ\"\r\n                                type=\"date\"\r\n                                onChange={(event) => {\r\n                                    this.dateEdited = event.target.value;\r\n                                }}\r\n                            />\r\n                            <FormControl\r\n                                defaultValue={this.timeEdited}\r\n                                aria-label=\"Heure de départ\"\r\n                                type=\"time\"\r\n                                onChange={(event) => {\r\n                                    this.timeEdited = event.target.value;\r\n                                }}\r\n                            />\r\n                        </InputGroup>\r\n                    </Form.Group>\r\n                    <Form.Group>\r\n                        <Form.Label>Incrément</Form.Label>\r\n                        <Form.Control\r\n                            defaultValue={\"00:10:00\"}\r\n                            type=\"time\" step=\"1\" placeholder=\"Incrément\"\r\n                            onChange={(event) => {\r\n                                var secondsInc =\r\n                                    parseInt(event.target.value.slice(0, 2) * 3600, 10);\r\n                                secondsInc += parseInt(event.target.value.slice(3, 5) * 60, 10);\r\n                                var secondsPart = parseInt(event.target.value.slice(6, 8), 10);\r\n                                secondsInc += isNaN(secondsPart) ? 0 : secondsPart;\r\n                                this.increment = secondsInc;\r\n                            }} />\r\n                    </Form.Group>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button variant=\"danger\" onClick={this.handleClose}>\r\n                        Annuler\r\n                    </Button>\r\n                    <Button variant=\"success\" onClick={this.handleValidate}>\r\n                        Valider\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nconst mapState = (state) => {\r\n    let selectedId = Object.keys(state.circulationsById).find(\r\n        (id) => { return state.circulationsById[id].selected });\r\n    return ({\r\n        shown: state.main.fanHeureDepartModal.shown,\r\n        startDate:\r\n            (selectedId === undefined)\r\n                ? new Date(Date.now())\r\n                : new Date(getHeureDepart(state.circulationsById[selectedId]))\r\n    });\r\n}\r\n\r\nexport default connect(mapState)(FanHeureDepartModal)","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { fanNumMarcheButtonClicked, fanNumMarcheClosed, fanNumMarcheValidated } from '../../app/actions'\r\n\r\nimport Button from 'react-bootstrap/Button'\r\nimport Modal from 'react-bootstrap/Modal'\r\nimport FormControl from 'react-bootstrap/FormControl'\r\nimport Form from 'react-bootstrap/Form'\r\nimport { getNumMarche } from '../../app/tools/CirculationXmlTools'\r\n\r\nclass FanNumMarcheModal extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.numMarcheEdited = this.props.selectedNumMarche;\r\n        this.increment = 2;\r\n\r\n        // These bindings are necessary to make `this` work in the callback    \r\n        this.handleShow = this.handleShow.bind(this);\r\n        this.handleClose = this.handleClose.bind(this);\r\n        this.handleValidate = this.handleValidate.bind(this);\r\n    }\r\n\r\n    handleShow(event) {\r\n        this.props.dispatch(fanNumMarcheButtonClicked());\r\n        event.stopPropagation();\r\n    }\r\n\r\n    handleClose(event) {\r\n        this.props.dispatch(fanNumMarcheClosed());\r\n        if (event) {\r\n            event.stopPropagation();\r\n        }\r\n    }\r\n\r\n    handleValidate(event) {\r\n        this.props.dispatch(\r\n            fanNumMarcheValidated(this.numMarcheEdited, this.increment));\r\n        event.stopPropagation();\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Modal show={this.props.shown} onHide={this.handleClose}\r\n                onClick={(event) => { event.stopPropagation(); }}>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>Ventilatation des numéros de marche</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <Form.Group>\r\n                        <Form.Label>Numéro de marche intial</Form.Label>\r\n                        <FormControl\r\n                            defaultValue={this.numMarcheEdited}\r\n                            aria-label=\"Numéro de marche\"\r\n                            type=\"number\"\r\n                            onChange={(event) => {\r\n                                this.numMarcheEdited = parseInt(event.target.value, 10);\r\n                            }}\r\n                        />\r\n                    </Form.Group>\r\n                    <Form.Group>\r\n                        <Form.Label>Incrément</Form.Label>\r\n                        <Form.Control\r\n                            defaultValue={this.increment}\r\n                            type=\"number\" placeholder=\"Incrément\"\r\n                            onChange={(event) => {\r\n                                this.increment = parseInt(event.target.value, 10);\r\n                            }\r\n                            } />\r\n                    </Form.Group>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button variant=\"danger\" onClick={this.handleClose}>\r\n                        Annuler\r\n                    </Button>\r\n                    <Button variant=\"success\" onClick={this.handleValidate}>\r\n                        Valider\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nconst mapState = (state) => {\r\n    let selectedId = Object.keys(state.circulationsById).find(\r\n        (id) => { return state.circulationsById[id].selected });\r\n    return ({\r\n        shown: state.main.fanNumMarcheModal.shown,\r\n        selectedNumMarche:\r\n            (selectedId === undefined)\r\n                ? 0\r\n                : parseInt(getNumMarche(state.circulationsById[selectedId]))\r\n    });\r\n}\r\n\r\nexport default connect(mapState)(FanNumMarcheModal)","import React from 'react'\r\nimport { connect } from 'react-redux'\r\nimport FanHeureDepartModal from './FanHeureDepartModal'\r\nimport FanNumMarcheModal from './FanNumMarcheModal';\r\n\r\nclass CirculationSpecificModals extends React.Component {\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                {this.props.fanHeureDepartShown ? <FanHeureDepartModal /> : <></>}\r\n                {this.props.fanNumMarcheShown ? <FanNumMarcheModal /> : <></>}\r\n            </>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nconst mapState = (state) => {\r\n    return ({\r\n        fanHeureDepartShown: state.main.fanHeureDepartModal.shown,\r\n        fanNumMarcheShown: state.main.fanNumMarcheModal.shown,\r\n    });\r\n}\r\n\r\nexport default connect(mapState)(CirculationSpecificModals)","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { editedObject } from '../../app/enum'\r\nimport ShiftDateModal from './ShiftDateModal';\r\nimport CirculationsSpecificModals from '../../circulationsComponents/modals/CirculationsSpecificModals'\r\n\r\nfunction ObjectSpecificModals(props) {\r\n    switch (props.editedObject) {\r\n        case editedObject.CIRCULATIONS:\r\n            return (<CirculationsSpecificModals />);\r\n        default:\r\n            return (<></>);\r\n    }\r\n}\r\n\r\nclass Modals extends React.Component {\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                {this.props.shiftDateShown ? <ShiftDateModal /> : <></>}\r\n                <ObjectSpecificModals {...this.props} />\r\n            </>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nconst mapState = (state) => {\r\n    return ({\r\n        editedObject: state.editedObject,\r\n        shiftDateShown: state.main.shiftDateModal.shown\r\n    });\r\n}\r\n\r\nexport default connect(mapState)(Modals)","import React from 'react';\r\n\r\nimport './App.css';\r\n\r\nimport Container from 'react-bootstrap/Container';\r\nimport Toolbar from './mainComponents/toolbar/Toolbar'\r\nimport MainTable from './mainComponents/table/MainTable'\r\nimport Modals from './mainComponents/modals/Modals';\r\n\r\nconst App = () => (\r\n  <Container fluid style={{ paddingLeft: 0, paddingRight: 0 }}>\r\n    <Toolbar />\r\n    <MainTable />\r\n    <Modals />\r\n  </Container>\r\n);\r\n\r\nexport default App;\r\n","import { produce } from 'immer'\r\nimport { v1 as uuidv1 } from 'uuid';\r\nimport { xmlTextToCirculationsObject, getHeureDepart, withNumMarche, withHeureDepart, withCodeTCT } from '../tools/CirculationXmlTools'\r\n\r\nconst defaultCirculationObject = {\r\n  selected: false,\r\n  extended: false,\r\n  numMarcheEdited: false,\r\n  heureDepartEdited: false,\r\n  heureArriveeEdited: false,\r\n  codeTctEdited: false\r\n}\r\n\r\nconst circulationsById = (state = {}, action) => {\r\n  switch (action.type) {\r\n    case 'XML_FILE_SUBMITED':\r\n      let circulationsToAdd = xmlTextToCirculationsObject(action.xmlText, defaultCirculationObject);\r\n      return ({\r\n        ...state,\r\n        ...circulationsToAdd\r\n      });\r\n    case 'SELECT_ALL':\r\n      return produce(state, draftState => {\r\n        Object.keys(draftState).forEach((id => { draftState[id].selected = true; }));\r\n      });\r\n    case 'UNSELECT_ALL':\r\n      return produce(state, draftState => {\r\n        Object.keys(draftState).forEach((id => { draftState[id].selected = false; }));\r\n      });\r\n    case 'FLIP_SELECT_ALL':\r\n      return produce(state, draftState => {\r\n        Object.keys(draftState).forEach((id => {\r\n          draftState[id].selected = !(draftState[id].selected);\r\n        }));\r\n      });\r\n    case 'CIRCULATION_CHANGED':\r\n      return produce(state, draftState => {\r\n        draftState[action.id] = {\r\n          ...draftState[action.id],\r\n          ...action.circulation\r\n        };\r\n      })\r\n    case 'ROW_CLICKED_ON':\r\n      return produce(state, draftState => {\r\n        if (draftState[action.id] != null) {\r\n          draftState[action.id].selected = !(draftState[action.id].selected);\r\n        }\r\n      });\r\n    case 'ROW_DELETED':\r\n      return omit(action.id, state);\r\n    case 'DELETE_SELECTED_BUTTON_PRESSED':\r\n      return filterObject(state, (circulation) => { return !circulation.selected; });\r\n    case 'ROW_DUPLICATED':\r\n      return Object.keys(state).reduce((result, id) => {\r\n        if (id === action.id) {\r\n          let newId = uuidv1();\r\n          return ({\r\n            ...result,\r\n            [id]: state[id],\r\n            [newId]: {\r\n              ...state[id],\r\n              id: newId,\r\n              selected: false\r\n            }\r\n          })\r\n        } else {\r\n          return ({ ...result, [id]: state[id] })\r\n        }\r\n      }, {});\r\n    case 'DUPLICATE_SELECTED_BUTTON_PRESSED':\r\n      return duplicateSelectedCirculations(state);\r\n    case 'NUM_MARCHE_CELL_CLICKED':\r\n      return produce(state, draftState => { draftState[action.id].numMarcheEdited = true; });\r\n    case 'STOP_NUM_MARCHE_CELL_EDITION':\r\n      return produce(state, draftState => { draftState[action.id].numMarcheEdited = false; });\r\n    case 'CIRCULATION_NUM_MARCHE_CHANGED':\r\n      return produce(state, draftState => {\r\n        draftState[action.id] = withNumMarche(draftState[action.id], action.numMarche);\r\n        draftState[action.id].numMarcheEdited = false;\r\n      });\r\n    case 'HEURE_DEPART_CELL_CLICKED':\r\n      return produce(state, draftState => { \r\n        draftState[action.id].heureDepartEdited = true; \r\n        draftState[action.id].heureArriveeEdited = false; \r\n      });\r\n    case 'STOP_HEURE_DEPART_CELL_EDITION':\r\n      return produce(state, draftState => { draftState[action.id].heureDepartEdited = false; });\r\n    case 'HEURE_ARRIVEE_CELL_CLICKED':\r\n        return produce(state, draftState => { \r\n          draftState[action.id].heureArriveeEdited = true; \r\n          draftState[action.id].heureDepartEdited = false; \r\n        });\r\n    case 'STOP_HEURE_ARRIVEE_CELL_EDITION':\r\n        return produce(state, draftState => { draftState[action.id].heureArriveeEdited = false; });\r\n    case 'CIRCULATION_HEURE_DEPART_CHANGED':\r\n      return produce(state, draftState => {\r\n        draftState[action.id] = withHeureDepart(draftState[action.id], action.heureDepart);\r\n        draftState[action.id].heureDepartEdited = false;\r\n        draftState[action.id].heureArriveeEdited = false;\r\n      });\r\n    case 'TCT_CELL_CLICKED':\r\n      return produce(state, draftState => { draftState[action.id].codeTctEdited = true; });\r\n    case 'STOP_TCT_CELL_EDITION':\r\n      return produce(state, draftState => { draftState[action.id].codeTctEdited = false; });\r\n    case 'CIRCULATION_TCT_CHANGED':\r\n      return produce(state, draftState => {\r\n        draftState[action.id] = withCodeTCT(draftState[action.id], action.tctId, action.tctCode);\r\n        draftState[action.id].codeTctEdited = false;\r\n      });\r\n    case 'FAN_HEURE_DEPART_VALIDATED':\r\n      return fanHeureDepart(state, action.start, action.secondsIncrement);\r\n    case 'FAN_NUM_MARCHE_VALIDATED':\r\n      return fanNumMarche(state, action.start, action.increment);\r\n    case 'SHIFT_DATE_VALIDATED':\r\n      return shiftDate(state, action.start, action.goal);\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nconst omit = (keyToOmit, { [keyToOmit]: _, ...omittedPropObj } = {}) => omittedPropObj;\r\n\r\nconst filterObject = (object, filterFunction) => {\r\n  let filtered = {};\r\n  Object.keys(object).forEach((key) => {\r\n    if (filterFunction(object[key])) {\r\n      filtered[key] = object[key];\r\n    }\r\n  })\r\n  return filtered;\r\n}\r\n\r\nconst duplicateSelectedCirculations = (state) => {\r\n  return Object.keys(state).reduce((result, id) => {\r\n    if (state[id].selected) {\r\n      let newId = uuidv1();\r\n      return ({\r\n        ...result,\r\n        [id]: state[id],\r\n        [newId]: {\r\n          ...state[id],\r\n          id: newId,\r\n          selected: false\r\n        }\r\n      })\r\n    } else {\r\n      return ({ ...result, [id]: state[id] })\r\n    }\r\n  }, {});\r\n}\r\n\r\nconst fanHeureDepart = (state, start, secondsIncrement) => {\r\n  var currentDate = new Date(start);\r\n  return produce(state, draftState => {\r\n    Object.keys(draftState).forEach((id) => {\r\n      if (draftState[id].selected) {\r\n        draftState[id] = withHeureDepart(draftState[id], currentDate);\r\n        currentDate.setSeconds(currentDate.getSeconds() + secondsIncrement);\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\nconst fanNumMarche = (state, start, increment) => {\r\n  var currentId = start;\r\n  return produce(state, draftState => {\r\n    Object.keys(draftState).forEach((id) => {\r\n      if (draftState[id].selected) {\r\n        draftState[id] = withNumMarche(draftState[id], currentId);\r\n        currentId += increment;\r\n      }\r\n    })\r\n  });\r\n}\r\n\r\nconst shiftDate = (state, start, goal) => {\r\n  const startDate = new Date(start);\r\n  const goalDate = new Date(goal);\r\n  const delta = goalDate - startDate;\r\n\r\n  return produce(state, draftState => {\r\n    Object.keys(draftState).forEach((id) => {\r\n      const origDate = new Date(getHeureDepart(draftState[id]));\r\n      draftState[id] = withHeureDepart(draftState[id], (new Date(origDate.getTime() + delta)));\r\n    });\r\n  });\r\n}\r\n\r\nexport default circulationsById","const xmlParser = new DOMParser();\r\n\r\nexport const xmlTextToPtxObject = (xmlText, defaultPTxObject) => {\r\n  let result = {};\r\n  let xmlDoc = xmlParser.parseFromString(xmlText, \"application/xml\");\r\n  let ptxs = xmlDoc.getElementsByTagName(\"PlancheTravaux\");\r\n\r\n  Array.from(ptxs).forEach((ptx) => {\r\n    var currentId = ptx.getElementsByTagName(\"id\")[0].innerHTML;\r\n    result[currentId] = {\r\n      id: currentId,\r\n      ptx: ptx.innerHTML,\r\n      ...defaultPTxObject\r\n    }\r\n  })\r\n\r\n  return result;\r\n}\r\n\r\nexport const getPtxXmlText = (ptx) => {\r\n  var ptxText = \"<PlancheTravaux>\\n\";\r\n  ptxText += ptx + \"\\n\";\r\n  ptxText += \"</PlancheTravaux>\\n\";\r\n\r\n  return ptxText;\r\n}\r\n\r\nexport const concatAllPtxsAsText = (ptxsById) => {\r\n  var text = \"<planchesTravaux>\\n\";\r\n\r\n  Object.keys(ptxsById).forEach((id) => {\r\n    text += getPtxXmlText(ptxsById[id]);\r\n  });\r\n\r\n  text += \"</planchesTravaux>\";\r\n  return text;\r\n}","import { produce } from 'immer'\r\nimport { v1 as uuidv1 } from 'uuid';\r\nimport { xmlTextToPtxObject } from '../tools/PtxXmlTools'\r\n\r\nconst defaultPtxObject = {\r\n  selected: false,\r\n  extended: false,\r\n}\r\n\r\nconst ptxsById = (state = {}, action) => {\r\n  switch (action.type) {\r\n    case 'XML_FILE_SUBMITED':\r\n      let ptxsToAdd = xmlTextToPtxObject(action.xmlText, defaultPtxObject);\r\n      return ({\r\n        ...state,\r\n        ...ptxsToAdd\r\n      });\r\n      case 'SELECT_ALL':\r\n        return produce(state, draftState => {\r\n          Object.keys(draftState).forEach((id => { draftState[id].selected = true; }));\r\n        });\r\n      case 'UNSELECT_ALL':\r\n        return produce(state, draftState => {\r\n          Object.keys(draftState).forEach((id => { draftState[id].selected = false; }));\r\n        });\r\n      case 'FLIP_SELECT_ALL':\r\n        return produce(state, draftState => {\r\n          Object.keys(draftState).forEach((id => {\r\n            draftState[id].selected = !(draftState[id].selected);\r\n          }));\r\n        });\r\n      case 'ROW_CLICKED_ON':\r\n        return produce(state, draftState => {\r\n          if (draftState[action.id] != null) {\r\n            draftState[action.id].selected = !(draftState[action.id].selected);\r\n          }\r\n        });\r\n      case 'ROW_DELETED':\r\n        return omit(action.id, state);\r\n      case 'DELETE_SELECTED_BUTTON_PRESSED':\r\n        return filterObject(state, (circulation) => { return !circulation.selected; });\r\n      case 'ROW_DUPLICATED':\r\n        return Object.keys(state).reduce((result, id) => {\r\n          if (id === action.id) {\r\n            let newId = uuidv1();\r\n            return ({\r\n              ...result,\r\n              [id]: state[id],\r\n              [newId]: {\r\n                ...state[id],\r\n                id: newId,\r\n                selected: false\r\n              }\r\n            })\r\n          } else {\r\n            return ({ ...result, [id]: state[id] })\r\n          }\r\n        }, {});\r\n      case 'DUPLICATE_SELECTED_BUTTON_PRESSED':\r\n        return duplicateSelectedPtx(state);\r\n      case 'SHIFT_DATE_VALIDATED':\r\n        return shiftDate(state, action.start, action.goal);\r\n      default:\r\n        return state\r\n    }\r\n}\r\n\r\nconst omit = (keyToOmit, { [keyToOmit]: _, ...omittedPropObj } = {}) => omittedPropObj;\r\n\r\nconst filterObject = (object, filterFunction) => {\r\n  let filtered = {};\r\n  Object.keys(object).forEach((key) => {\r\n    if (filterFunction(object[key])) {\r\n      filtered[key] = object[key];\r\n    }\r\n  })\r\n  return filtered;\r\n}\r\n\r\nconst duplicateSelectedPtx = (state) => {\r\n  return Object.keys(state).reduce((result, id) => {\r\n    if (state[id].selected) {\r\n      let newId = uuidv1();\r\n      return ({\r\n        ...result,\r\n        [id]: state[id],\r\n        [newId]: {\r\n          ...state[id],\r\n          id: newId,\r\n          selected: false\r\n        }\r\n      })\r\n    } else {\r\n      return ({ ...result, [id]: state[id] })\r\n    }\r\n  }, {});\r\n}\r\n\r\nconst shiftDate = (state, start, goal) => {\r\n  const startDate = new Date(start);\r\n  const goalDate = new Date(goal);\r\n  const delta = goalDate - startDate;\r\n\r\n  return state;\r\n}\r\n\r\nexport default ptxsById","import { produce } from 'immer'\r\n\r\nlet defaultState = {\r\n    loadingInfo: {\r\n        isLoading: false,\r\n        toLoadCount: 0,\r\n        loadedCount: 0\r\n    },\r\n    shiftDateModal: {\r\n        shown: false,\r\n    },\r\n    fanHeureDepartModal: {\r\n        shown: false,\r\n    },\r\n    fanNumMarcheModal: {\r\n        shown: false,\r\n    }\r\n}\r\n\r\nconst main = (state = defaultState, action) => {\r\n    switch (action.type) {\r\n        case 'FAN_HEURE_DEPART_BUTTON_CLICKED':\r\n            return produce(state, draftState => { draftState.fanHeureDepartModal.shown = true; });\r\n        case 'FAN_HEURE_DEPART_VALIDATED':\r\n        case 'FAN_HEURE_DEPART_CLOSED':\r\n            return produce(state, draftState => { draftState.fanHeureDepartModal.shown = false; });\r\n        case 'FAN_NUM_MARCHE_BUTTON_CLICKED':\r\n            return produce(state, draftState => { draftState.fanNumMarcheModal.shown = true; });\r\n        case 'FAN_NUM_MARCHE_VALIDATED':\r\n        case 'FAN_NUM_MARCHE_CLOSED':\r\n            return produce(state, draftState => { draftState.fanNumMarcheModal.shown = false; });\r\n        case 'SHIFT_DATE_BUTTON_CLICKED':\r\n            return produce(state, draftState => { draftState.shiftDateModal.shown = true; });\r\n        case 'SHIFT_DATE_VALIDATED':\r\n        case 'SHIFT_DATE_CLOSED':\r\n            return produce(state, draftState => { draftState.shiftDateModal.shown = false; });\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport default main","import { produce } from 'immer'\r\nimport { editedObject } from '../enum'\r\n\r\nimport circulationsById from './circulationsById'\r\nimport ptxsById from './ptxsById'\r\nimport main from './main'\r\n\r\nconst reducer = (state = { editedObject: editedObject.NONE }, action) => {\r\n    switch (action.type) {\r\n        case 'XML_FILE_SUBMITED':\r\n            let edited = getXmlFileObject(action.xmlText);\r\n            return produce(state, draftState => {\r\n                draftState.editedObject = edited;\r\n                if (edited === editedObject.CIRCULATIONS) {\r\n                    draftState.circulationsById = circulationsById(state.circulationsById, action);\r\n                } else if (edited === editedObject.PTX) {\r\n                    draftState.ptxsById = ptxsById(state.ptxsById, action);\r\n                }\r\n            });\r\n        default:\r\n            return produce(state, draftState => {\r\n                draftState.main = main(state.main, action);\r\n                if (state.editedObject === editedObject.CIRCULATIONS) {\r\n                    draftState.circulationsById = circulationsById(state.circulationsById, action);\r\n                } else if (state.editedObject === editedObject.PTX) {\r\n                    draftState.ptxsById = ptxsById(state.ptxsById, action);\r\n                }\r\n            });\r\n    }\r\n\r\n}\r\n\r\nconst getXmlFileObject = (xmlText) => {\r\n    let searchedString = xmlText.slice(0, 100);\r\n    if (searchedString.includes(\"<circulations>\")) {\r\n        return editedObject.CIRCULATIONS;\r\n    } else if (searchedString.includes(\"<planchesTravaux>\")) {\r\n        return editedObject.PTX;\r\n    } else {\r\n        return editedObject.NONE;\r\n    }\r\n}\r\nexport default reducer;","import { configureStore } from '@reduxjs/toolkit'\r\n\r\nimport reducer from './reducers/index'\r\n\r\nexport default configureStore({\r\n  reducer\r\n});","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nimport store from './app/store';\r\nimport { Provider } from 'react-redux';\r\n\r\n// Importing the Bootstrap CSS\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport './Bootstrap-override.css';\r\n\r\nReactDOM.render(\r\n    <React.StrictMode>\r\n      <Provider store={store}>\r\n        <App />\r\n      </Provider>\r\n    </React.StrictMode>,\r\n    document.getElementById('root')\r\n  );\r\n  "],"sourceRoot":""}